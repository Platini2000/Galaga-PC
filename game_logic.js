(function(_0x3c7556,_0x359738){const _0xb03b8c=_0x21a6,_0xc8684c=_0x3c7556();while(!![]){try{const _0x54d211=-parseInt(_0xb03b8c(0x27b))/0x1*(parseInt(_0xb03b8c(0x1d8))/0x2)+parseInt(_0xb03b8c(0x212))/0x3+parseInt(_0xb03b8c(0x1cb))/0x4*(parseInt(_0xb03b8c(0x236))/0x5)+-parseInt(_0xb03b8c(0x1d4))/0x6+parseInt(_0xb03b8c(0x1b2))/0x7*(parseInt(_0xb03b8c(0x221))/0x8)+-parseInt(_0xb03b8c(0x227))/0x9*(-parseInt(_0xb03b8c(0x258))/0xa)+-parseInt(_0xb03b8c(0x271))/0xb*(parseInt(_0xb03b8c(0x1d2))/0xc);if(_0x54d211===_0x359738)break;else _0xc8684c['push'](_0xc8684c['shift']());}catch(_0x54350d){_0xc8684c['push'](_0xc8684c['shift']());}}}(_0x1b0a,0x7c0db));let currentWavePatternIndex=-0x1,aiNeedsStabilization=!![],aiStabilizationEndTime=0x0,smoothedShipX=undefined;function resetGame(){const _0x5cf9ae=_0x21a6;try{level=0x1,currentWavePatternIndex=-0x1,isPaused=![],isShowingIntro=![],introStep=0x0,isWaveTransitioning=![],isGridSoundPlaying=![],isEntrancePhaseActive=![],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,enemySpawnTimeouts[_0x5cf9ae(0x27e)](clearTimeout),enemySpawnTimeouts=[],squadronCompletionStatus={},squadronEntranceFiringStatus={},isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0,isCsCompletionDelayActive=![],csCompletionDelayStartTime=0x0,csCompletionResultIsPerfect=![],csIntroSoundPlayed=![],gameOverSequenceStartTime=0x0,gameStartTime=0x0,stopAllGameSounds(),player1CompletedLevel=-0x1,forceCenterShipNextReset=![],isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',isShipCaptured=![],capturingBossId=null,captureBeamActive=![],captureBeamSource={'x':0x0,'y':0x0},captureBeamTargetY=0x0,captureBeamProgress=0x0,captureAttemptMadeThisLevel=![],isShowingCaptureMessage=![],captureMessageStartTime=0x0,capturedBossIdWithMessage=null,fallingShips=[],isDualShipActive=![],player1IsDualShipActive=![],player2IsDualShipActive=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,player1Score=0x0,player2Score=0x0,player1Lives=0x3,player2Lives=0x3,player1ShotsFired=0x0,player2ShotsFired=0x0,player1EnemiesHit=0x0,player2EnemiesHit=0x0,player1MaxLevelReached=0x1,player2MaxLevelReached=0x1,lastGridFireCheckTime=0x0,firstEnemyLanded=![],player1LifeThresholdsMet=new Set(),player2LifeThresholdsMet=new Set(),currentPlayer=0x1,score=player1Score,playerLives=player1Lives,player1TriggeredHighScoreSound=![],player2TriggeredHighScoreSound=![],scoreEarnedThisCS=0x0,playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],resetAllMessages(),explosions=[],isChallengingStage=![],challengingStageEnemiesHit=0x0,isShowingResultsScreen=![],currentWaveDefinition=null,isFullGridWave=![],hitSparks=[],resetWave();}catch(_0x332da8){console[_0x5cf9ae(0x27a)]('FATAL\x20Error\x20in\x20resetGame:',_0x332da8),isWaveTransitioning=![],isGridSoundPlaying=![],isEntrancePhaseActive=![],isCsCompletionDelayActive=![],csCompletionDelayStartTime=0x0,csCompletionResultIsPerfect=![],csIntroSoundPlayed=![],isPaused=![],currentWavePatternIndex=-0x1,player1CompletedLevel=-0x1,isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',squadronCompletionStatus={},squadronEntranceFiringStatus={},isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0,resetAllMessages(),forceCenterShipNextReset=![],player1ShotsFired=0x0,player2ShotsFired=0x0,player1EnemiesHit=0x0,player2EnemiesHit=0x0,player1MaxLevelReached=0x1,player2MaxLevelReached=0x1,isShipCaptured=![],capturingBossId=null,captureBeamActive=![],captureBeamSource={'x':0x0,'y':0x0},captureBeamTargetY=0x0,captureBeamProgress=0x0,captureAttemptMadeThisLevel=![],isShowingCaptureMessage=![],captureMessageStartTime=0x0,capturedBossIdWithMessage=null,fallingShips=[],isDualShipActive=![],player1IsDualShipActive=![],player2IsDualShipActive=![],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,isFullGridWave=![],hitSparks=[],player1TriggeredHighScoreSound=![],player2TriggeredHighScoreSound=![],lastGridFireCheckTime=0x0,firstEnemyLanded=![],player1LifeThresholdsMet=new Set(),player2LifeThresholdsMet=new Set(),playerIntroSoundPlayed=![],stageIntroSoundPlayed=![];typeof enemySpawnTimeouts!==_0x5cf9ae(0x20b)&&Array['isArray'](enemySpawnTimeouts)&&enemySpawnTimeouts[_0x5cf9ae(0x27e)](clearTimeout);enemySpawnTimeouts=[];if(typeof showMenuState===_0x5cf9ae(0x1bf))showMenuState();}}function resetAllMessages(){showCsHitsMessage=![],csHitsMessageStartTime=0x0,showPerfectMessage=![],perfectMessageStartTime=0x0,showCsBonusScoreMessage=![],csBonusScoreMessageStartTime=0x0,showCSClearMessage=![],csClearMessageStartTime=0x0,showCsHitsForClearMessage=![],showCsScoreForClearMessage=![],showExtraLifeMessage=![],extraLifeMessageStartTime=0x0,showReadyMessage=![],readyMessageStartTime=0x0,readyForNextWave=![],readyForNextWaveReset=![];}function stopAllGameSounds(){const _0x2fc60c=_0x21a6,_0xdffea6=[gridBackgroundSound,entranceSound,butterflyDiveSound,startSound,coinSound,bossGalagaDiveSound,enemyShootSound,levelUpSound,gameOverSound,playerShootSound,extraLifeSound,csPerfectSound,csClearSound,explosionSound,waveUpSound,readySound,tripleAttackSound,captureSound,shipCapturedSound,dualShipSound,resultsMusicSound,hiScoreSound];_0xdffea6[_0x2fc60c(0x27e)](_0x385570=>stopSound(_0x385570)),isGridSoundPlaying=![];}function getWaveType(_0x269752){const _0x14e02f=_0x21a6,_0xf0297d=(_0x269752-0x1)%0x4;switch(_0xf0297d){case 0x0:return _0x14e02f(0x1ef);case 0x1:return _0x14e02f(0x24b);case 0x2:return _0x14e02f(0x1e5);case 0x3:return _0x14e02f(0x1ed);default:console[_0x14e02f(0x27a)](_0x14e02f(0x29f)+_0xf0297d+'\x20voor\x20level\x20'+_0x269752);return _0x14e02f(0x1a6);}}function generateWaveDefinition(_0xa01ea7){const _0x1a24ff=_0x21a6;let _0x1f0432=[];currentWavePatternIndex=-0x1;const _0x18fe48=getWaveType(_0xa01ea7);if(typeof waveEntrancePatterns===_0x1a24ff(0x20b)||!Array[_0x1a24ff(0x247)](waveEntrancePatterns)||waveEntrancePatterns[_0x1a24ff(0x299)]<0x2)return console['error'](_0x1a24ff(0x259)+_0xa01ea7+')!'),[];if(_0x18fe48==='challenging_stage')_0x1f0432=[];else{if(_0x18fe48===_0x1a24ff(0x1ef)){currentWavePatternIndex=0x0;const _0x4a9fc4=waveEntrancePatterns[0x0];if(!_0x4a9fc4||_0x4a9fc4[_0x1a24ff(0x299)]===0x0)console['error'](_0x1a24ff(0x1e0)+_0xa01ea7+_0x1a24ff(0x1e3)),_0x1f0432=[];else try{_0x1f0432=JSON['parse'](JSON[_0x1a24ff(0x205)](_0x4a9fc4),(_0xf99d69,_0x288ca0)=>{const _0x6b88e7=_0x1a24ff;return _0x288ca0&&typeof _0x288ca0===_0x6b88e7(0x278)&&_0x288ca0[_0x6b88e7(0x1c2)]===ENEMY3_TYPE&&typeof _0x288ca0['hasCapturedShip']===_0x6b88e7(0x20b)&&(_0x288ca0[_0x6b88e7(0x1ff)]=![]),_0x288ca0;});}catch(_0x12ceba){console[_0x1a24ff(0x27a)](_0x1a24ff(0x234),_0x12ceba),_0x1f0432=[];}}else{if(_0x18fe48===_0x1a24ff(0x24b)){currentWavePatternIndex=0x0;const _0x49adb9=waveEntrancePatterns[0x0];if(!_0x49adb9||_0x49adb9[_0x1a24ff(0x299)]===0x0)console['error'](_0x1a24ff(0x1e0)+_0xa01ea7+_0x1a24ff(0x261)),_0x1f0432=[];else try{_0x1f0432=JSON[_0x1a24ff(0x209)](JSON[_0x1a24ff(0x205)](_0x49adb9),(_0x23015,_0x4ef10e)=>{const _0x136fef=_0x1a24ff;return _0x4ef10e&&typeof _0x4ef10e===_0x136fef(0x278)&&_0x4ef10e[_0x136fef(0x1c2)]===ENEMY3_TYPE&&typeof _0x4ef10e[_0x136fef(0x1ff)]===_0x136fef(0x20b)&&(_0x4ef10e[_0x136fef(0x1ff)]=![]),_0x4ef10e;});}catch(_0x696ebf){console[_0x1a24ff(0x27a)]('Error\x20deep\x20copying\x20selected\x20pattern\x200\x20for\x20Entrance\x201:',_0x696ebf),_0x1f0432=[];}}else{if(_0x18fe48==='entrance_flight_2'){currentWavePatternIndex=0x1;const _0x4aecd7=waveEntrancePatterns[0x1];if(!_0x4aecd7||_0x4aecd7[_0x1a24ff(0x299)]===0x0)console['error'](_0x1a24ff(0x1e0)+_0xa01ea7+'\x20(Entrance\x202):\x20Basis\x20patroon\x201\x20is\x20ongeldig\x20of\x20leeg!'),_0x1f0432=[];else try{_0x1f0432=JSON[_0x1a24ff(0x209)](JSON[_0x1a24ff(0x205)](_0x4aecd7),(_0xd330ab,_0xcc493a)=>{const _0x429344=_0x1a24ff;return _0xcc493a&&typeof _0xcc493a===_0x429344(0x278)&&_0xcc493a[_0x429344(0x1c2)]===ENEMY3_TYPE&&typeof _0xcc493a[_0x429344(0x1ff)]===_0x429344(0x20b)&&(_0xcc493a[_0x429344(0x1ff)]=![]),_0xcc493a;});}catch(_0x2d3adb){console['error'](_0x1a24ff(0x28c),_0x2d3adb),_0x1f0432=[];}}else _0x1f0432=[];}}}if(_0x18fe48!=='challenging_stage'){if(typeof normalWaveEntrancePaths===_0x1a24ff(0x20b)||Object[_0x1a24ff(0x24d)](normalWaveEntrancePaths)[_0x1a24ff(0x299)]===0x0)return console[_0x1a24ff(0x27a)](_0x1a24ff(0x25b)+_0xa01ea7+')!\x20Cannot\x20validate\x20paths.'),_0x1f0432;for(let _0x2c1c8b=_0x1f0432[_0x1a24ff(0x299)]-0x1;_0x2c1c8b>=0x0;_0x2c1c8b--){const _0x32a26f=_0x1f0432[_0x2c1c8b];if(!normalWaveEntrancePaths?.[_0x32a26f['pathId']]){console['warn'](_0x1a24ff(0x1e0)+_0xa01ea7+',\x20Pattern\x20'+currentWavePatternIndex+':\x20Squadron\x20pathId\x20\x22'+_0x32a26f[_0x1a24ff(0x2ad)]+_0x1a24ff(0x1da)),_0x1f0432['splice'](_0x2c1c8b,0x1);continue;}if(_0x32a26f[_0x1a24ff(0x257)]&&Array[_0x1a24ff(0x247)](_0x32a26f[_0x1a24ff(0x257)])){for(let _0x2b4b90=_0x32a26f['enemies']['length']-0x1;_0x2b4b90>=0x0;_0x2b4b90--){const _0x3633e7=_0x32a26f['enemies'][_0x2b4b90];(!_0x3633e7||!normalWaveEntrancePaths?.[_0x3633e7[_0x1a24ff(0x282)]])&&(console[_0x1a24ff(0x290)]('Wave\x20'+_0xa01ea7+_0x1a24ff(0x1e8)+currentWavePatternIndex+_0x1a24ff(0x27c)+_0x32a26f[_0x1a24ff(0x2ad)]+_0x1a24ff(0x238)+_0x3633e7?.[_0x1a24ff(0x282)]+_0x1a24ff(0x293)),_0x32a26f[_0x1a24ff(0x257)][_0x1a24ff(0x1c1)](_0x2b4b90,0x1)),_0x3633e7&&_0x3633e7[_0x1a24ff(0x1c2)]===ENEMY3_TYPE&&typeof _0x3633e7['hasCapturedShip']==='undefined'&&(_0x3633e7[_0x1a24ff(0x1ff)]=![]);}_0x32a26f['enemies'][_0x1a24ff(0x299)]===0x0&&(console[_0x1a24ff(0x290)](_0x1a24ff(0x1e0)+_0xa01ea7+_0x1a24ff(0x1e8)+currentWavePatternIndex+_0x1a24ff(0x240)+_0x32a26f['pathId']+_0x1a24ff(0x215)),_0x1f0432[_0x1a24ff(0x1c1)](_0x2c1c8b,0x1));}else console[_0x1a24ff(0x290)](_0x1a24ff(0x1e0)+_0xa01ea7+',\x20Pattern\x20'+currentWavePatternIndex+_0x1a24ff(0x240)+_0x32a26f[_0x1a24ff(0x2ad)]+'\x22\x20has\x20no\x20valid\x20enemies\x20array.\x20Removing.'),_0x1f0432[_0x1a24ff(0x1c1)](_0x2c1c8b,0x1);}}return _0x1f0432;}function resetWave(){const _0x34589d=_0x21a6;stopAllGameSounds(),isWaveTransitioning=![],isGridSoundPlaying=![],scoreEarnedThisCS=0x0,resetAllMessages(),isCsCompletionDelayActive=![],csCompletionDelayStartTime=0x0,csCompletionResultIsPerfect=![],csIntroSoundPlayed=![],isPaused=![],isShipCaptured=![],capturingBossId=null,captureBeamActive=![],captureBeamSource={'x':0x0,'y':0x0},captureBeamTargetY=0x0,captureBeamProgress=0x0,captureAttemptMadeThisLevel=![],isShowingCaptureMessage=![],captureMessageStartTime=0x0,capturedBossIdWithMessage=null,fallingShips=[],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,playerIntroSoundPlayed=![],stageIntroSoundPlayed=![],lastGridFireCheckTime=0x0,firstEnemyLanded=![];const _0x42babf=player1Score,_0xc3a2ac=player2Score;_0x42babf<highScore&&(player1TriggeredHighScoreSound=![]);_0xc3a2ac<highScore&&(player2TriggeredHighScoreSound=![]);bullets=[],enemyBullets=[],enemies=[],explosions=[],gridMoveDirection=0x1,lastEnemyDetachTime=0x0,currentGridOffsetX=0x0,isEntrancePhaseActive=![],currentWaveDefinition=null,currentWavePatternIndex=-0x1,enemySpawnTimeouts['forEach'](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronCompletionStatus={},squadronEntranceFiringStatus={},isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0,hitSparks=[],isFullGridWave=![],isChallengingStage=![];try{const _0xa017a0=getWaveType(level);isChallengingStage=_0xa017a0==='challenging_stage',isFullGridWave=_0xa017a0===_0x34589d(0x1ef),challengingStageEnemiesHit=0x0,isShowingIntro=!![],introDisplayStartTime=Date[_0x34589d(0x1bb)]();if(isChallengingStage)isTwoPlayerMode?introStep=0x1:introStep=0x3;else{if(isFullGridWave){if(isTwoPlayerMode)introStep=0x1;else level===0x1?introStep=0x1:introStep=0x2;}else isTwoPlayerMode?introStep=0x1:introStep=0x2;}level===0x1&&currentPlayer===0x1&&playSound(startSound),gameCanvas?.[_0x34589d(0x1de)]>0x0&&ship?(ship['y']=gameCanvas[_0x34589d(0x297)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,(!isManualControl||forceCenterShipNextReset)&&(isDualShipActive?ship['x']=gameCanvas[_0x34589d(0x1de)]/0x2-ship['width']:ship['x']=gameCanvas[_0x34589d(0x1de)]/0x2-ship[_0x34589d(0x1de)]/0x2,ship['targetX']=ship['x'],smoothedShipX=ship['x'],aiNeedsStabilization=!![])):console['warn'](_0x34589d(0x24e)),forceCenterShipNextReset=![];}catch(_0x2cc885){console[_0x34589d(0x27a)](_0x34589d(0x285),_0x2cc885),isWaveTransitioning=![],isGridSoundPlaying=![],isShowingIntro=![],introStep=0x0,isChallengingStage=![],isFullGridWave=![],resetAllMessages(),isCsCompletionDelayActive=![],csCompletionDelayStartTime=0x0,csCompletionResultIsPerfect=![],csIntroSoundPlayed=![],isPaused=![],currentWavePatternIndex=-0x1,squadronCompletionStatus={},squadronEntranceFiringStatus={},isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0,forceCenterShipNextReset=![],isShipCaptured=![],capturingBossId=null,captureBeamActive=![],captureBeamSource={'x':0x0,'y':0x0},captureBeamTargetY=0x0,captureBeamProgress=0x0,captureAttemptMadeThisLevel=![],isShowingCaptureMessage=![],captureMessageStartTime=0x0,capturedBossIdWithMessage=null,fallingShips=[],isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,hitSparks=[],player1TriggeredHighScoreSound=![],player2TriggeredHighScoreSound=![],lastGridFireCheckTime=0x0,firstEnemyLanded=![],playerIntroSoundPlayed=![],stageIntroSoundPlayed=![];typeof enemySpawnTimeouts!==_0x34589d(0x20b)&&Array['isArray'](enemySpawnTimeouts)&&enemySpawnTimeouts[_0x34589d(0x27e)](clearTimeout);enemySpawnTimeouts=[];if(typeof showMenuState==='function')showMenuState();}}const createBulletSimple=(_0x293bf9,_0x3fed76=null)=>{const _0x1260f8=_0x21a6;if(!_0x293bf9||playerLives<=0x0||!isInGameState||!ship||isShipCaptured)return![];const _0x575e1b=scaleValue(level,BASE_ENEMY_BULLET_SPEED,MAX_ENEMY_BULLET_SPEED),_0x24d33f=_0x3fed76?_0x3fed76['x']:_0x293bf9['x']+_0x293bf9['width']/0x2,_0x327708=_0x3fed76?_0x3fed76['y']:_0x293bf9['y']+_0x293bf9[_0x1260f8(0x297)]/0x2;let _0x30072b=0x0,_0x2874f4=_0x575e1b;const _0x51ea43=ship['x']+ship[_0x1260f8(0x1de)]/0x2-_0x24d33f,_0x16e1c7=ship['y']+ship[_0x1260f8(0x297)]/0x2-_0x327708,_0x50504e=Math['sqrt'](_0x51ea43*_0x51ea43+_0x16e1c7*_0x16e1c7);if(_0x50504e>0x0){let _0x410f00=0x0;!isChallengingStage&&(_0x410f00=scaleValue(level,BASE_ENEMY_AIM_FACTOR,MAX_ENEMY_AIM_FACTOR));let _0x46d15d=Math['atan2'](_0x16e1c7,_0x51ea43);return _0x30072b=Math[_0x1260f8(0x25d)](_0x46d15d)*_0x575e1b*_0x410f00,_0x2874f4=Math[_0x1260f8(0x204)](_0x575e1b**0x2-_0x30072b**0x2),_0x2874f4=Math['max'](_0x575e1b*(0x1-_0x410f00)*0.5,_0x2874f4),_0x16e1c7<0x0&&(_0x2874f4=Math[_0x1260f8(0x1b7)](_0x2874f4)),enemyBullets[_0x1260f8(0x279)]({'x':_0x24d33f-ENEMY_BULLET_WIDTH/0x2,'y':_0x327708,'width':ENEMY_BULLET_WIDTH,'height':ENEMY_BULLET_HEIGHT,'vx':_0x30072b,'vy':_0x2874f4,'type':_0x293bf9[_0x1260f8(0x1c2)]}),!![];}return![];};function _0x21a6(_0x39a507,_0x347421){const _0x1b0af5=_0x1b0a();return _0x21a6=function(_0x21a677,_0x28b998){_0x21a677=_0x21a677-0x198;let _0x2ac8c9=_0x1b0af5[_0x21a677];return _0x2ac8c9;},_0x21a6(_0x39a507,_0x347421);}function scheduleSingleEntranceSquadron(_0x50e64f,_0x3995a7,_0xddd806){const _0x59ef68=_0x21a6;if(isFullGridWave||isChallengingStage)return console['warn'](_0x59ef68(0x22d)+level+_0x59ef68(0x1b6)+isFullGridWave+_0x59ef68(0x1f2)+isChallengingStage+_0x59ef68(0x1d7)),_0x50e64f?.[_0x59ef68(0x257)]?.[_0x59ef68(0x299)]>0x0&&(enemiesSpawnedThisWave+=_0x50e64f[_0x59ef68(0x257)][_0x59ef68(0x299)],squadronCompletionStatus[_0x3995a7]&&(squadronCompletionStatus[_0x3995a7][_0x59ef68(0x222)]=squadronCompletionStatus[_0x3995a7][_0x59ef68(0x1d0)])),![];const _0xf18e71=normalWaveEntrancePaths,_0x208cd4=_0x50e64f[_0x59ef68(0x2ad)],_0x425e55=_0xf18e71[_0x208cd4];if(!_0x425e55||_0x425e55[_0x59ef68(0x299)]===0x0)return console['error'](_0x59ef68(0x1d3)+_0x208cd4+'\x20for\x20squadron\x20'+_0x3995a7+_0x59ef68(0x200)),_0x50e64f?.[_0x59ef68(0x257)]?.[_0x59ef68(0x299)]>0x0&&(enemiesSpawnedThisWave+=_0x50e64f[_0x59ef68(0x257)][_0x59ef68(0x299)],squadronCompletionStatus[_0x3995a7]&&(squadronCompletionStatus[_0x3995a7][_0x59ef68(0x222)]=squadronCompletionStatus[_0x3995a7][_0x59ef68(0x1d0)])),![];const _0x50dc26=setTimeout(()=>{const _0x50e630=_0x59ef68,_0x29fe4e=enemySpawnTimeouts[_0x50e630(0x2a7)](_0x50dc26);if(_0x29fe4e>-0x1)enemySpawnTimeouts['splice'](_0x29fe4e,0x1);if(isPaused||!isInGameState||!isEntrancePhaseActive||isChallengingStage||isWaveTransitioning||playerLives<=0x0||isShipCaptured||isFullGridWave){_0x50e64f?.['enemies']?.[_0x50e630(0x299)]>0x0&&(enemiesSpawnedThisWave+=_0x50e64f[_0x50e630(0x257)][_0x50e630(0x299)],squadronCompletionStatus[_0x3995a7]&&(squadronCompletionStatus[_0x3995a7][_0x50e630(0x222)]=squadronCompletionStatus[_0x3995a7][_0x50e630(0x1d0)]));return;}try{squadronEntranceFiringStatus[_0x3995a7]?(squadronEntranceFiringStatus[_0x3995a7][_0x50e630(0x1ec)]=Date[_0x50e630(0x1bb)]()+_0xddd806,squadronEntranceFiringStatus[_0x3995a7][_0x50e630(0x262)]=![]):(console['warn'](_0x50e630(0x1cd)+_0x3995a7+_0x50e630(0x295)),squadronEntranceFiringStatus[_0x3995a7]={'hasFired':![],'scheduledStartTime':Date[_0x50e630(0x1bb)]()+_0xddd806});const _0x358050=ENEMY_SPAWN_DELAY_IN_SQUADRON,_0x33171a=_0x358050*0x2,_0x2024a4=0x1;_0x50e64f[_0x50e630(0x257)][_0x50e630(0x27e)]((_0x284602,_0x539e0d)=>{const _0x316a61=_0x50e630;if(!_0x284602||!_0x284602['type']||typeof _0x284602[_0x316a61(0x1f6)]===_0x316a61(0x20b)||typeof _0x284602[_0x316a61(0x294)]===_0x316a61(0x20b)||!_0x284602[_0x316a61(0x282)]){console[_0x316a61(0x27a)](_0x316a61(0x2aa)+_0x3995a7+_0x316a61(0x270)+_0x208cd4+_0x316a61(0x28d)+_0x539e0d+_0x316a61(0x21f)),enemiesSpawnedThisWave++;squadronCompletionStatus[_0x3995a7]&&squadronCompletionStatus[_0x3995a7][_0x316a61(0x222)]++;return;}const _0xdd6953=_0xf18e71[_0x284602['entrancePathId']];(!_0xdd6953||_0xdd6953[_0x316a61(0x299)]===0x0)&&console[_0x316a61(0x290)](_0x316a61(0x248)+_0x284602[_0x316a61(0x282)]+_0x316a61(0x2b8)+_0x3995a7+_0x316a61(0x25c)+_0x539e0d+'\x20not\x20found.\x20Enemy\x20will\x20follow\x20squadron\x20path\x20\x22'+_0x208cd4+'\x22.');let _0x520cfb=0x0;const _0xc11ff9=getWaveType(level),_0x57b766=_0xc11ff9===_0x316a61(0x1ed)&&(_0x3995a7===0x2||_0x3995a7===0x3);if(_0x57b766){const _0x2830df=Math[_0x316a61(0x1a3)](_0x539e0d/0x2);_0x539e0d%0x2===0x0?_0x520cfb=_0x2830df*_0x33171a:_0x520cfb=_0x2830df*_0x33171a+_0x2024a4;}else _0x520cfb=_0x539e0d*ENEMY_SPAWN_DELAY_IN_SQUADRON;const _0x4b55ca=setTimeout(()=>{const _0xf7c8c5=_0x316a61,_0x57aa20=enemySpawnTimeouts[_0xf7c8c5(0x2a7)](_0x4b55ca);if(_0x57aa20>-0x1)enemySpawnTimeouts[_0xf7c8c5(0x1c1)](_0x57aa20,0x1);if(isPaused||!isInGameState||!isEntrancePhaseActive||isChallengingStage||isWaveTransitioning||playerLives<=0x0||isShipCaptured||isFullGridWave){enemiesSpawnedThisWave++;squadronCompletionStatus[_0x3995a7]&&squadronCompletionStatus[_0x3995a7][_0xf7c8c5(0x222)]++;return;}try{let _0x21e834=_0x284602['type'],_0xd1db1d=_0x21e834===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x3c45d2,_0x4b0735;if(_0x21e834===ENEMY1_TYPE)_0x3c45d2=ENEMY1_WIDTH,_0x4b0735=ENEMY1_HEIGHT;else _0x21e834===ENEMY3_TYPE?(_0x3c45d2=BOSS_WIDTH,_0x4b0735=BOSS_HEIGHT):(_0x3c45d2=ENEMY_WIDTH,_0x4b0735=ENEMY_HEIGHT);let _0x11a41b=0x0,_0x5e3393=0x0;if(_0x425e55&&_0x425e55[0x0]?.['p0'])_0x11a41b=_0x425e55[0x0]['p0']['x'],_0x5e3393=_0x425e55[0x0]['p0']['y'];else throw new Error(_0xf7c8c5(0x296)+_0x208cd4);let _0x48abfc,_0x373e33;try{const {x:_0xeadab1,y:_0x4995ae}=getCurrentGridSlotPosition(_0x284602[_0xf7c8c5(0x1f6)],_0x284602[_0xf7c8c5(0x294)],_0x3c45d2);_0x48abfc=_0xeadab1,_0x373e33=_0x4995ae;}catch(_0x26c522){console['error'](_0xf7c8c5(0x2b1)+_0x284602[_0xf7c8c5(0x1c2)]+_0xf7c8c5(0x1f3)+_0x284602['gridRow']+','+_0x284602[_0xf7c8c5(0x294)]+']',_0x26c522),_0x48abfc=gameCanvas?.[_0xf7c8c5(0x1de)]/0x2||0xc8,_0x373e33=ENEMY_TOP_MARGIN+_0x284602[_0xf7c8c5(0x1f6)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}let _0x8a8964=0x0;const _0x555abb=_0x57b766,_0x2684dc=_0x555abb&&_0x539e0d%0x2!==0x0;_0x2684dc?_0x8a8964=-ENTRANCE_PAIR_PATH_T_OFFSET:_0x8a8964=-_0x539e0d*PATH_T_OFFSET_PER_ENEMY;const _0x45cf02={'x':_0x11a41b,'y':_0x5e3393,'width':_0x3c45d2,'height':_0x4b0735,'targetGridX':_0x48abfc,'targetGridY':_0x373e33,'speed':0x0,'state':_0xf7c8c5(0x21d),'gridRow':_0x284602[_0xf7c8c5(0x1f6)],'gridCol':_0x284602[_0xf7c8c5(0x294)],'type':_0x21e834,'health':_0xd1db1d,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':_0x208cd4,'pathSegmentIndex':0x0,'pathT':_0x8a8964,'squadronId':_0x3995a7,'squadronEnemyIndex':_0x539e0d,'id':'enemy-entr-'+_0x3995a7+'-'+_0x539e0d+'-'+Date[_0xf7c8c5(0x1bb)]()+'-'+Math[_0xf7c8c5(0x1e1)]()[_0xf7c8c5(0x243)](0x24)[_0xf7c8c5(0x29e)](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':_0xf7c8c5(0x21b),'hasCapturedShip':_0x21e834===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x21e834===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':0x1};enemies['push'](_0x45cf02),enemiesSpawnedThisWave++;squadronCompletionStatus[_0x3995a7]&&squadronCompletionStatus[_0x3995a7]['completed']++;if(_0x539e0d===0x0){let _0x3341bd=0x5dc;(_0x3995a7===0x0||_0x3995a7===0x1)&&(_0x3341bd=0xfa);const _0x71767a=_0x45cf02['id'],_0x306e71=setTimeout(()=>{const _0x2fc10c=_0xf7c8c5,_0x5718f3=enemySpawnTimeouts[_0x2fc10c(0x2a7)](_0x306e71);if(_0x5718f3>-0x1)enemySpawnTimeouts[_0x2fc10c(0x1c1)](_0x5718f3,0x1);if(isPaused||!isInGameState||playerLives<=0x0||isChallengingStage||isWaveTransitioning||isShipCaptured||isFullGridWave)return;fireFixedEnemyBurst(_0x71767a,null,0x0,0x3);},_0x3341bd);enemySpawnTimeouts[_0xf7c8c5(0x279)](_0x306e71);}}catch(_0x27d6c9){console[_0xf7c8c5(0x27a)](_0xf7c8c5(0x1a4)+_0x3995a7+_0xf7c8c5(0x2b9)+_0x539e0d+_0xf7c8c5(0x1c4)+_0x208cd4+'):',_0x27d6c9),enemiesSpawnedThisWave++,squadronCompletionStatus[_0x3995a7]&&squadronCompletionStatus[_0x3995a7]['completed']++;}},_0x520cfb);enemySpawnTimeouts[_0x316a61(0x279)](_0x4b55ca);});}catch(_0x49cb1b){console[_0x50e630(0x27a)](_0x50e630(0x2b0)+_0x3995a7+_0x50e630(0x270)+_0x208cd4+'):',_0x49cb1b),_0x50e64f?.[_0x50e630(0x257)]?.[_0x50e630(0x299)]>0x0&&(enemiesSpawnedThisWave+=_0x50e64f[_0x50e630(0x257)][_0x50e630(0x299)],squadronCompletionStatus[_0x3995a7]&&(squadronCompletionStatus[_0x3995a7][_0x50e630(0x222)]=squadronCompletionStatus[_0x3995a7]['total']));}},_0xddd806);return enemySpawnTimeouts[_0x59ef68(0x279)](_0x50dc26),!![];};function startChallengingStageSequence(){const _0x414b04=_0x21a6;currentWaveDefinition=[],isEntrancePhaseActive=![],enemySpawnTimeouts[_0x414b04(0x27e)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronEntranceFiringStatus={};Object['keys'](challengingStagePaths)[_0x414b04(0x299)]===0x0&&defineChallengingStagePaths();if(Object[_0x414b04(0x24d)](challengingStagePaths)[_0x414b04(0x299)]===0x0){console[_0x414b04(0x27a)](_0x414b04(0x249)),isWaveTransitioning=!![],setTimeout(()=>{const _0xe25541=_0x414b04;(isInGameState||!isInGameState&&playerLives>0x0)&&typeof resetWave===_0xe25541(0x1bf)&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);return;}const _0x2a1b39=[_0x414b04(0x23b),_0x414b04(0x1b1),_0x414b04(0x1bc),_0x414b04(0x1fd)],_0x273ddb=[_0x414b04(0x23d),_0x414b04(0x24f),'CS_LoopAttack_BL',_0x414b04(0x288)],_0x273784=[..._0x2a1b39,..._0x273ddb];for(const _0x464c92 of _0x273784){if(!challengingStagePaths[_0x414b04(0x1d1)](_0x464c92)){console[_0x414b04(0x27a)](_0x414b04(0x26a)+_0x464c92+_0x414b04(0x230)),isWaveTransitioning=!![],setTimeout(()=>{(isInGameState||!isInGameState&&playerLives>0x0)&&typeof resetWave==='function'&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);return;}}let _0x539675=[..._0x2a1b39],_0x2aa7de=[..._0x273ddb][_0x414b04(0x24a)](()=>Math[_0x414b04(0x1e1)]()-0.5);_0x539675[_0x414b04(0x279)](..._0x2aa7de),currentWaveDefinition=[];for(let _0x51e330=0x0;_0x51e330<CHALLENGING_STAGE_SQUADRON_COUNT;_0x51e330++){const _0x493838=_0x539675[_0x51e330],_0x124b0d={'pathId':_0x493838,'enemies':[]};for(let _0x7c9831=0x0;_0x7c9831<CHALLENGING_STAGE_SQUADRON_SIZE;_0x7c9831++){let _0x3421ef=_0x7c9831<Math['floor'](CHALLENGING_STAGE_SQUADRON_SIZE/0x2)?ENEMY1_TYPE:ENEMY2_TYPE;_0x124b0d['enemies'][_0x414b04(0x279)]({'type':_0x3421ef,'entrancePathId':_0x493838});}currentWaveDefinition[_0x414b04(0x279)](_0x124b0d);}challengingStageTotalEnemies=CHALLENGING_STAGE_ENEMY_COUNT,totalEnemiesScheduledForWave=challengingStageTotalEnemies,enemiesSpawnedThisWave=0x0;if(currentWaveDefinition[_0x414b04(0x299)]>0x0){isEntrancePhaseActive=!![],enemySpawnTimeouts=[];let _0x2533bb=0x0;const _0x20983d=-0x1c,_0x2cc867=Math[_0x414b04(0x1a3)](Math[_0x414b04(0x245)](0x0,level-0x3)/0x4)+0x1,_0x2c2680=scaleValue(_0x2cc867,BASE_CS_SPEED_MULTIPLIER,MAX_CS_SPEED_MULTIPLIER);currentWaveDefinition[_0x414b04(0x27e)]((_0x143ec3,_0x3be2c2)=>{const _0x3362f7=_0x414b04;let _0x2b385a=0x0;if(_0x3be2c2<=0x1)_0x2b385a=0x0;else _0x3be2c2<=0x3?_0x2b385a=CHALLENGING_STAGE_SQUADRON_INTERVAL:_0x2b385a=(_0x3be2c2-0x2)*CHALLENGING_STAGE_SQUADRON_INTERVAL;let _0x2410f9=_0x2c2680;(_0x3be2c2===0x2||_0x3be2c2===0x3)&&(_0x2410f9*=CS_HORIZONTAL_FLYBY_SPEED_FACTOR);const _0x45b3e0=setTimeout(()=>{const _0x244359=_0x21a6,_0x5bdb4f=enemySpawnTimeouts[_0x244359(0x2a7)](_0x45b3e0);if(_0x5bdb4f>-0x1)enemySpawnTimeouts['splice'](_0x5bdb4f,0x1);if(!isPaused&&isInGameState&&isEntrancePhaseActive&&isChallengingStage&&!isWaveTransitioning&&playerLives>0x0)try{const _0x3fc4a4=_0x143ec3[_0x244359(0x2ad)],_0x42f706=challengingStagePaths,_0xb02761=_0x42f706[_0x3fc4a4];if(!_0xb02761||_0xb02761[_0x244359(0x299)]===0x0){console[_0x244359(0x27a)](_0x244359(0x228)+_0x3fc4a4+_0x244359(0x207)+_0x3be2c2+_0x244359(0x27f)),enemiesSpawnedThisWave+=_0x143ec3['enemies'][_0x244359(0x299)];return;}let _0x27493a=CS_ENEMY_SPAWN_DELAY_IN_SQUADRON;if(_0x3be2c2>=0x2&&_0x3be2c2<=0x3)_0x27493a=CS_HORIZONTAL_FLYBY_SPAWN_DELAY;else _0x3be2c2>=0x4&&(_0x27493a=CS_LOOP_ATTACK_SPAWN_DELAY);_0x143ec3[_0x244359(0x257)]['forEach']((_0x5ca8f3,_0x205619)=>{const _0x3b9633=_0x244359;if(!_0x5ca8f3||!_0x5ca8f3[_0x3b9633(0x1c2)]){console['error']('CS:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20'+_0x3be2c2+_0x3b9633(0x25c)+_0x205619+_0x3b9633(0x21f)),enemiesSpawnedThisWave++;return;}const _0x20346c=_0x205619*_0x27493a,_0x247006=setTimeout(()=>{const _0x441264=_0x3b9633,_0x43e058=enemySpawnTimeouts[_0x441264(0x2a7)](_0x247006);if(_0x43e058>-0x1)enemySpawnTimeouts[_0x441264(0x1c1)](_0x43e058,0x1);if(isPaused||!isInGameState||!isEntrancePhaseActive||!isChallengingStage||isWaveTransitioning||playerLives<=0x0){enemiesSpawnedThisWave++;return;}try{let _0x474c20=_0x5ca8f3[_0x441264(0x1c2)],_0x2f565d=_0x474c20===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x549872,_0x5938d2;if(_0x474c20===ENEMY1_TYPE)_0x549872=ENEMY1_WIDTH,_0x5938d2=ENEMY1_HEIGHT;else _0x474c20===ENEMY3_TYPE?(_0x549872=BOSS_WIDTH,_0x5938d2=BOSS_HEIGHT):(_0x549872=ENEMY_WIDTH,_0x5938d2=ENEMY_HEIGHT);let _0x10f212=0x0,_0x5758b5=0x0;if(_0xb02761[0x0]?.['p0'])_0x10f212=_0xb02761[0x0]['p0']['x'],_0x5758b5=_0xb02761[0x0]['p0']['y'];else throw new Error(_0x441264(0x226)+_0x3fc4a4);(_0x3be2c2===0x0||_0x3be2c2===0x1)&&(_0x10f212+=_0x20983d);const _0x97249d=-_0x205619*PATH_T_OFFSET_PER_ENEMY,_0x499db5={'x':_0x10f212,'y':_0x5758b5,'width':_0x549872,'height':_0x5938d2,'targetGridX':0x0,'targetGridY':0x0,'speed':0x0,'state':_0x441264(0x20d),'gridRow':-0x1,'gridCol':-0x1,'type':_0x474c20,'health':_0x2f565d,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':_0x3fc4a4,'pathSegmentIndex':0x0,'pathT':_0x97249d,'squadronId':_0x3be2c2,'id':_0x441264(0x199)+_0x3be2c2+'-'+_0x205619+'-'+Date[_0x441264(0x1bb)]()+'-'+Math[_0x441264(0x1e1)]()[_0x441264(0x243)](0x24)[_0x441264(0x29e)](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':'normal','hasCapturedShip':_0x474c20===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x474c20===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':_0x2410f9};enemies[_0x441264(0x279)](_0x499db5),enemiesSpawnedThisWave++;}catch(_0x26da1e){console[_0x441264(0x27a)](_0x441264(0x20a)+_0x3be2c2+_0x441264(0x2b9)+_0x205619+_0x441264(0x1c4)+_0x3fc4a4+'):',_0x26da1e),enemiesSpawnedThisWave++;}},_0x20346c);enemySpawnTimeouts[_0x3b9633(0x279)](_0x247006),_0x2533bb++;});}catch(_0x139b5e){console[_0x244359(0x27a)](_0x244359(0x19e)+_0x3be2c2+':',_0x139b5e),enemiesSpawnedThisWave+=_0x143ec3['enemies'][_0x244359(0x299)];}else _0x143ec3?.['enemies']?.[_0x244359(0x299)]>0x0&&(enemiesSpawnedThisWave+=_0x143ec3['enemies'][_0x244359(0x299)]);},_0x2b385a);enemySpawnTimeouts[_0x3362f7(0x279)](_0x45b3e0);});}else console[_0x414b04(0x290)]('CS:\x20No\x20squadrons\x20generated.\x20Skipping\x20CS\x20sequence.'),isWaveTransitioning=!![],setTimeout(()=>{const _0x55e474=_0x414b04;(isInGameState||!isInGameState&&playerLives>0x0)&&typeof resetWave===_0x55e474(0x1bf)&&resetWave();},NEXT_WAVE_DELAY_AFTER_MESSAGE);}function fireEnemyBurst(_0x328154,_0x816ea5,_0x23c9ce){const _0x25b79a=_0x21a6;if(!_0x328154||isPaused||!isInGameState||playerLives<=0x0||isChallengingStage||isWaveTransitioning||isShipCaptured)return;const _0x162168=Math[_0x25b79a(0x28e)](scaleValue(level,BASE_ENEMY_BULLET_BURST_COUNT,MAX_ENEMY_BULLET_BURST_COUNT));for(let _0x5d63f3=0x0;_0x5d63f3<_0x162168;_0x5d63f3++){const _0x3915d0=_0x23c9ce+_0x5d63f3*ENTRANCE_FIRE_BURST_DELAY_MS,_0x3ba71f=setTimeout(()=>{const _0x2f8452=_0x25b79a;try{const _0x2c5732=enemySpawnTimeouts[_0x2f8452(0x2a7)](_0x3ba71f);_0x2c5732>-0x1&&enemySpawnTimeouts['splice'](_0x2c5732,0x1);if(isPaused||!isInGameState||playerLives<=0x0||isChallengingStage||isWaveTransitioning||isShipCaptured)return;const _0x56b16f=enemies[_0x2f8452(0x1a9)](_0x4b65c4=>_0x4b65c4&&_0x4b65c4['id']===_0x328154);_0x56b16f&&_0x56b16f['state']===_0x816ea5&&(createBulletSimple(_0x56b16f)&&(_0x5d63f3===0x0&&playSound(enemyShootSound),_0x56b16f['lastFiredTime']=Date['now']()));}catch(_0xa65acb){console[_0x2f8452(0x27a)](_0x2f8452(0x26c)+(_0x5d63f3+0x1)+'/'+_0x162168+_0x2f8452(0x1a2)+_0x328154+':',_0xa65acb);}},_0x3915d0);enemySpawnTimeouts[_0x25b79a(0x279)](_0x3ba71f);}}function fireFixedEnemyBurst(_0x5df9c5,_0x451f63,_0x7bd34c,_0x166b4e){const _0xacd29c=_0x21a6;if(!_0x5df9c5||isPaused||!isInGameState||playerLives<=0x0||isChallengingStage||isWaveTransitioning||isShipCaptured||_0x166b4e<=0x0)return;for(let _0x339a7c=0x0;_0x339a7c<_0x166b4e;_0x339a7c++){const _0x196059=_0x7bd34c+_0x339a7c*ENTRANCE_FIRE_BURST_DELAY_MS,_0x3d905a=setTimeout(()=>{const _0x4a53bb=_0x21a6;try{const _0x2e42fd=enemySpawnTimeouts['indexOf'](_0x3d905a);_0x2e42fd>-0x1&&enemySpawnTimeouts[_0x4a53bb(0x1c1)](_0x2e42fd,0x1);if(isPaused||!isInGameState||playerLives<=0x0||isChallengingStage||isWaveTransitioning||isShipCaptured)return;const _0x4dbf6d=enemies[_0x4a53bb(0x1a9)](_0x4f43c8=>_0x4f43c8&&_0x4f43c8['id']===_0x5df9c5);if(_0x4dbf6d)createBulletSimple(_0x4dbf6d)&&(_0x339a7c===0x0&&playSound(enemyShootSound),_0x4dbf6d[_0x4a53bb(0x1a1)]=Date['now']());else{}}catch(_0x168cb8){console[_0x4a53bb(0x27a)]('Error\x20during\x20FIXED\x20enemy\x20burst\x20firing\x20(bullet\x20'+(_0x339a7c+0x1)+'/'+_0x166b4e+_0x4a53bb(0x1a2)+_0x5df9c5+':',_0x168cb8);}},_0x196059);enemySpawnTimeouts[_0xacd29c(0x279)](_0x3d905a);}}function startFullGridWave(){const _0x47e156=_0x21a6;if(!currentWaveDefinition||currentWaveDefinition['length']===0x0||!isFullGridWave){console[_0x47e156(0x27a)](_0x47e156(0x21c)),isWaveTransitioning=!![],readyForNextWaveReset=!![];return;}playSound(entranceSound),enemySpawnTimeouts[_0x47e156(0x27e)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,squadronCompletionStatus={},squadronEntranceFiringStatus={};let _0x3c18b7=0x0;currentWaveDefinition[_0x47e156(0x27e)]((_0xd55a72,_0x3d7291)=>{const _0x2eba96=_0x47e156;let _0x5b60f2=0x0;_0xd55a72&&_0xd55a72['enemies']&&Array[_0x2eba96(0x247)](_0xd55a72[_0x2eba96(0x257)])?(_0x5b60f2=_0xd55a72[_0x2eba96(0x257)]['length'],_0xd55a72[_0x2eba96(0x257)]['forEach']((_0x5669fa,_0x2ae78a)=>{const _0x3e5741=_0x2eba96;try{if(!_0x5669fa||!_0x5669fa[_0x3e5741(0x1c2)]||typeof _0x5669fa[_0x3e5741(0x1f6)]===_0x3e5741(0x20b)||typeof _0x5669fa['gridCol']===_0x3e5741(0x20b)){console[_0x3e5741(0x27a)](_0x3e5741(0x26d)+_0x3d7291+',\x20index\x20'+_0x2ae78a+_0x3e5741(0x21f));return;}let _0x3b3dd3=_0x5669fa['type'],_0x29952c=_0x3b3dd3===ENEMY3_TYPE?ENEMY3_MAX_HITS:0x1,_0x119bed,_0x117b07;if(_0x3b3dd3===ENEMY1_TYPE)_0x119bed=ENEMY1_WIDTH,_0x117b07=ENEMY1_HEIGHT;else _0x3b3dd3===ENEMY3_TYPE?(_0x119bed=BOSS_WIDTH,_0x117b07=BOSS_HEIGHT):(_0x119bed=ENEMY_WIDTH,_0x117b07=ENEMY_HEIGHT);let _0x5d186c,_0x4913a9;try{const {x:_0x234183,y:_0x227fb2}=getCurrentGridSlotPosition(_0x5669fa[_0x3e5741(0x1f6)],_0x5669fa[_0x3e5741(0x294)],_0x119bed);_0x5d186c=_0x234183,_0x4913a9=_0x227fb2;}catch(_0x37edba){console[_0x3e5741(0x27a)](_0x3e5741(0x1c5)+_0x5669fa['type']+_0x3e5741(0x1f3)+_0x5669fa[_0x3e5741(0x1f6)]+','+_0x5669fa[_0x3e5741(0x294)]+']',_0x37edba),_0x5d186c=gameCanvas?.[_0x3e5741(0x1de)]/0x2||0xc8,_0x4913a9=ENEMY_TOP_MARGIN+_0x5669fa[_0x3e5741(0x1f6)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}const _0x2aeb93={'x':_0x5d186c,'y':_0x4913a9,'width':_0x119bed,'height':_0x117b07,'targetGridX':_0x5d186c,'targetGridY':_0x4913a9,'speed':0x0,'state':_0x3e5741(0x251),'gridRow':_0x5669fa['gridRow'],'gridCol':_0x5669fa['gridCol'],'type':_0x3b3dd3,'health':_0x29952c,'isDamaged':![],'velocityX':0x0,'velocityY':0x0,'attackPathStep':0x0,'initialY':0x0,'initialX':0x0,'diveDirection':0x1,'lastFiredTime':0x0,'targetX1':0x0,'targetY1':0x0,'targetX2':0x0,'targetY2':0x0,'targetX3':0x0,'targetY3':0x0,'attackPathSegments':[],'attackPathSegmentIndex':0x0,'attackPathT':0x0,'attackStartTime':0x0,'attackFormationOffsetX':0x0,'attackGroupId':null,'entrancePathId':null,'pathSegmentIndex':0x0,'pathT':0x0,'squadronId':_0x3d7291,'squadronEnemyIndex':_0x2ae78a,'id':_0x3e5741(0x256)+_0x3d7291+'-'+_0x2ae78a+'-'+Date[_0x3e5741(0x1bb)]()+'-'+Math['random']()[_0x3e5741(0x243)](0x24)[_0x3e5741(0x29e)](0x2,0x7),'justReturned':![],'canFireThisDive':![],'attackType':_0x3e5741(0x21b),'hasCapturedShip':_0x3b3dd3===ENEMY3_TYPE?![]:undefined,'capturedShipX':undefined,'capturedShipY':undefined,'capturedShipLastFiredTime':_0x3b3dd3===ENEMY3_TYPE?0x0:undefined,'captureStartTime':0x0,'capturePrepareTimeout':null,'pathSpeedMultiplier':0x1};enemies[_0x3e5741(0x279)](_0x2aeb93),_0x3c18b7++;}catch(_0x24720d){console[_0x3e5741(0x27a)]('Full\x20Grid:\x20Error\x20placing\x20enemy\x20(Sq\x20'+_0x3d7291+_0x3e5741(0x2b9)+_0x2ae78a+'):',_0x24720d);}})):console[_0x2eba96(0x290)](_0x2eba96(0x1b4)+_0x3d7291+_0x2eba96(0x23a)),squadronCompletionStatus[_0x3d7291]={'completed':_0x5b60f2,'total':_0x5b60f2};}),totalEnemiesScheduledForWave=_0x3c18b7,enemiesSpawnedThisWave=_0x3c18b7,isEntrancePhaseActive=![],gridJustCompleted=!![],!isGridSoundPlaying&&(isGridSoundPlaying=!![],playSound(gridBackgroundSound)),GRID_BREATH_ENABLED&&!isGridBreathingActive&&(isGridBreathingActive=!![],gridBreathStartTime=Date['now'](),currentGridBreathFactor=0x0),lastGridFireCheckTime=Date[_0x47e156(0x1bb)](),firstEnemyLanded=!![];}function scheduleEntranceFlightWave(){const _0x41dcdb=_0x21a6;if(isFullGridWave||isChallengingStage){console[_0x41dcdb(0x290)](_0x41dcdb(0x218)+level+_0x41dcdb(0x1b6)+isFullGridWave+_0x41dcdb(0x1f2)+isChallengingStage+_0x41dcdb(0x1d7)),isEntrancePhaseActive=![];return;}if(!currentWaveDefinition||currentWaveDefinition[_0x41dcdb(0x299)]===0x0){console[_0x41dcdb(0x290)](_0x41dcdb(0x1fc)),isEntrancePhaseActive=![],stopSound(entranceSound),isWaveTransitioning=!![],readyForNextWaveReset=!![];return;}const _0x49d922=normalWaveEntrancePaths;if(Object[_0x41dcdb(0x24d)](_0x49d922)[_0x41dcdb(0x299)]===0x0){console[_0x41dcdb(0x27a)]('CRITICAL:\x20Failed\x20to\x20define\x20Normal\x20Wave\x20entrance\x20paths!'),isEntrancePhaseActive=![],stopSound(entranceSound),isWaveTransitioning=!![],readyForNextWaveReset=!![];return;}enemySpawnTimeouts[_0x41dcdb(0x27e)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,currentWaveDefinition[_0x41dcdb(0x27e)](_0x223551=>totalEnemiesScheduledForWave+=_0x223551[_0x41dcdb(0x257)][_0x41dcdb(0x299)]),enemiesSpawnedThisWave=0x0,squadronCompletionStatus={},squadronEntranceFiringStatus={},isEntrancePhaseActive=!![],playSound(entranceSound),currentWaveDefinition['forEach']((_0x39535a,_0x6514e0)=>{const _0x1448bb=_0x41dcdb;squadronCompletionStatus[_0x6514e0]={'completed':0x0,'total':_0x39535a[_0x1448bb(0x257)]?.[_0x1448bb(0x299)]||0x0,'hasFiredPostLanding':![]};const _0x21e1b2=_0x6514e0*NORMAL_WAVE_SQUADRON_INTERVAL;squadronEntranceFiringStatus[_0x6514e0]={'hasFired':![],'scheduledStartTime':0x0},scheduleSingleEntranceSquadron(_0x39535a,_0x6514e0,_0x21e1b2);});}function checkAndScheduleNextSquadron(_0x16e0bd){}function resetJustReturnedFlags(_0x1aeb0d){const _0x4f7ce3=_0x21a6;enemies[_0x4f7ce3(0x27e)](_0x1e44bc=>{const _0x48b39b=_0x4f7ce3;let _0x2c7ce8=![];if(_0x1aeb0d instanceof Set)_0x2c7ce8=_0x1aeb0d[_0x48b39b(0x280)](_0x1e44bc['id']);else typeof _0x1aeb0d==='string'&&(_0x2c7ce8=_0x1e44bc['id']===_0x1aeb0d);_0x1e44bc&&_0x1e44bc[_0x48b39b(0x260)]===_0x48b39b(0x251)&&_0x1e44bc[_0x48b39b(0x1f9)]&&!_0x2c7ce8&&(_0x1e44bc[_0x48b39b(0x1f9)]=![]);});}function generateAttackPath(_0x10a482){const _0x57a732=_0x21a6;try{if(!_0x10a482||!gameCanvas)return[];const _0x15331f=_0x10a482['type']===ENEMY3_TYPE?BOSS_WIDTH:_0x10a482[_0x57a732(0x1c2)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x3b5e79=_0x10a482[_0x57a732(0x1c2)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x10a482['type']===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT,_0x2afef2=_0x15331f*0.5,_0x2d4528=gameCanvas[_0x57a732(0x1de)],_0x38e57c=gameCanvas[_0x57a732(0x297)];let _0x5d7c09=[];const _0x1130a3={'x':_0x10a482['x'],'y':_0x10a482['y']},_0x2e42c1=Math[_0x57a732(0x1b3)](_0x38e57c*0.06,_0x3b5e79*1.8),_0xc27270=Math[_0x57a732(0x1b3)](_0x2d4528*0.04,_0x15331f*1.2),_0x4bc047=_0x10a482['x']+_0x15331f/0x2<_0x2d4528/0x2?0x1:-0x1,_0x2ddaf6={'x':_0x1130a3['x']-_0x4bc047*_0xc27270*0.6,'y':_0x1130a3['y']-_0x2e42c1};_0x2ddaf6['x']=Math[_0x57a732(0x245)](_0x2afef2,Math[_0x57a732(0x1b3)](_0x2d4528-_0x2afef2-_0x15331f,_0x2ddaf6['x'])),_0x2ddaf6['y']=Math[_0x57a732(0x245)](_0x2afef2,_0x2ddaf6['y']);const _0x4645f4={'x':_0x1130a3['x']+_0x4bc047*_0xc27270*0.1,'y':_0x1130a3['y']-_0x2e42c1*1.4},_0x3aa698={'x':_0x2ddaf6['x']+_0x4bc047*_0xc27270*0.3,'y':_0x1130a3['y']-_0x2e42c1*1.5},_0x62aa23={'p0':_0x1130a3,'p1':_0x4645f4,'p2':_0x3aa698,'p3':_0x2ddaf6};_0x5d7c09['push'](_0x62aa23);const _0x1cbed9=_0x2ddaf6,_0x4e3067=_0x38e57c*0.45,_0x2ce250=_0x2d4528*0.22,_0x5114eb=_0x38e57c*0.28,_0x50862c=0.5,_0x763df8=0.6,_0x5be849=_0x38e57c*0.85,_0x38f0aa=Math[_0x57a732(0x1a3)](Math[_0x57a732(0x1e1)]()*0x3);let _0x486acc=[];if(_0x38f0aa===0x0){const _0x28be5c=_0x4e3067+Math[_0x57a732(0x1e1)]()*_0x38e57c*0.1,_0x381f6c=_0x2ce250+Math['random']()*_0x2d4528*0.08,_0x1791ff=_0x5114eb+Math['random']()*_0x38e57c*0.08,_0x4973dc=_0x1cbed9['x']+_0x4bc047*_0x381f6c*0.5,_0x552259=Math[_0x57a732(0x1b3)](_0x5be849,_0x1cbed9['y']+_0x28be5c),_0x3f41d3=_0x4973dc+_0x4bc047*_0x381f6c*0.5,_0x74ca22=Math[_0x57a732(0x245)](_0x1cbed9['y']+0x14,_0x552259-_0x1791ff),_0x471dbc=_0x3f41d3-_0x4bc047*_0x381f6c*0.9,_0x3b2ace=Math[_0x57a732(0x245)](_0x1cbed9['y']+0x28,_0x74ca22+_0x1791ff*0.6),_0x273936=_0x471dbc-_0x4bc047*_0x381f6c*0.3,_0x2d4ace=_0x38e57c+_0x3b5e79*0x2,_0x1fc036=Math[_0x57a732(0x245)](_0x2afef2,Math['min'](_0x2d4528-_0x2afef2-_0x15331f,_0x4973dc)),_0x3fc9d5=Math[_0x57a732(0x245)](_0x2afef2,Math[_0x57a732(0x1b3)](_0x2d4528-_0x2afef2-_0x15331f,_0x3f41d3)),_0x1c8780=Math[_0x57a732(0x245)](_0x2afef2,Math[_0x57a732(0x1b3)](_0x2d4528-_0x2afef2-_0x15331f,_0x471dbc)),_0x3e912a={'x':_0x1cbed9['x'],'y':_0x1cbed9['y']+_0x28be5c*_0x763df8*0.5},_0xe32c81={'x':_0x1fc036-_0x4bc047*_0x381f6c*_0x50862c,'y':_0x552259},_0x110fd0={'x':_0x1fc036,'y':_0x552259},_0x529c31={'x':_0x1fc036+_0x4bc047*_0x381f6c*_0x50862c,'y':_0x552259},_0x432960={'x':_0x3fc9d5,'y':_0x74ca22+_0x1791ff*_0x763df8},_0x42aad9={'x':_0x3fc9d5,'y':_0x74ca22},_0x48c848={'x':_0x3fc9d5,'y':_0x74ca22-_0x1791ff*_0x763df8*0.5},_0x17a2f7={'x':_0x1c8780+_0x4bc047*_0x381f6c*_0x50862c,'y':_0x3b2ace},_0x2e0f23={'x':_0x1c8780,'y':_0x3b2ace},_0x5e27c1={'x':_0x2e0f23['x'],'y':_0x2e0f23['y']+_0x38e57c*0.1},_0x5a11e1={'x':_0x273936,'y':_0x2d4ace-_0x38e57c*0.2},_0x333f3e={'x':_0x273936,'y':_0x2d4ace};_0x486acc=[{'p0':_0x1cbed9,'p1':_0x3e912a,'p2':_0xe32c81,'p3':_0x110fd0},{'p0':_0x110fd0,'p1':_0x529c31,'p2':_0x432960,'p3':_0x42aad9},{'p0':_0x42aad9,'p1':_0x48c848,'p2':_0x17a2f7,'p3':_0x2e0f23},{'p0':_0x2e0f23,'p1':_0x5e27c1,'p2':_0x5a11e1,'p3':_0x333f3e}];}else{if(_0x38f0aa===0x1){const _0x459c75=_0x4e3067*0.8+Math[_0x57a732(0x1e1)]()*_0x38e57c*0.1,_0x38ed39=_0x2ce250*1.2+Math[_0x57a732(0x1e1)]()*_0x2d4528*0.1,_0x203810=_0x5114eb*0.7+Math[_0x57a732(0x1e1)]()*_0x38e57c*0.1,_0x2e0af5=_0x1cbed9['x']+_0x4bc047*_0x38ed39*0.4,_0x28e64a=Math[_0x57a732(0x1b3)](_0x5be849-_0x203810*0.5,_0x1cbed9['y']+_0x459c75*0.6),_0x7f2d59=_0x2e0af5+_0x4bc047*_0x38ed39*0.6,_0x1807ac=Math[_0x57a732(0x1b3)](_0x5be849,_0x28e64a+_0x203810),_0x35fefe=_0x7f2d59-_0x4bc047*_0x38ed39*0.5,_0x438558=_0x38e57c+_0x3b5e79*0x2,_0x4f84b2=Math[_0x57a732(0x245)](_0x2afef2,Math[_0x57a732(0x1b3)](_0x2d4528-_0x2afef2-_0x15331f,_0x2e0af5)),_0x4eff93=Math[_0x57a732(0x245)](_0x2afef2,Math[_0x57a732(0x1b3)](_0x2d4528-_0x2afef2-_0x15331f,_0x7f2d59)),_0x19dc62={'x':_0x1cbed9['x']-_0x4bc047*_0x38ed39*0.1,'y':_0x1cbed9['y']+_0x459c75*0.3},_0x572147={'x':_0x4f84b2-_0x4bc047*_0x38ed39*_0x50862c*0.8,'y':_0x28e64a+_0x203810*_0x763df8*0.4},_0x421da5={'x':_0x4f84b2,'y':_0x28e64a},_0x562eef={'x':_0x4f84b2+_0x4bc047*_0x38ed39*_0x50862c*0.8,'y':_0x28e64a-_0x203810*_0x763df8*0.4},_0x23c92c={'x':_0x4eff93+_0x4bc047*_0x38ed39*_0x50862c*0.6,'y':_0x1807ac+_0x203810*_0x763df8*0.5},_0x3d0c42={'x':_0x4eff93,'y':_0x1807ac},_0xc7aa94={'x':_0x4eff93-_0x4bc047*_0x38ed39*0.2,'y':_0x1807ac+_0x38e57c*0.1},_0x5cdd97={'x':_0x35fefe,'y':_0x438558-_0x38e57c*0.3},_0x2ebc2d={'x':_0x35fefe,'y':_0x438558};_0x486acc=[{'p0':_0x1cbed9,'p1':_0x19dc62,'p2':_0x572147,'p3':_0x421da5},{'p0':_0x421da5,'p1':_0x562eef,'p2':_0x23c92c,'p3':_0x3d0c42},{'p0':_0x3d0c42,'p1':_0xc7aa94,'p2':_0x5cdd97,'p3':_0x2ebc2d}];}else{const _0x50b4df=_0x4e3067*0.6+Math[_0x57a732(0x1e1)]()*_0x38e57c*0.05,_0x52c921=_0x2ce250*0.7+Math['random']()*_0x2d4528*0.05,_0x235de3=_0x5114eb*0.6+Math[_0x57a732(0x1e1)]()*_0x38e57c*0.05,_0x756724=_0x235de3*1.5,_0x3d8884=_0x1cbed9['x']+_0x4bc047*_0x52c921*0.5,_0x1b9853=Math[_0x57a732(0x1b3)](_0x5be849-_0x756724,_0x1cbed9['y']+_0x50b4df),_0x16f3e0=_0x3d8884+_0x4bc047*_0x52c921*0.5,_0x2c0642=_0x1b9853+_0x235de3,_0x20bd53=_0x16f3e0-_0x4bc047*_0x52c921*0.8,_0x3f2309=Math[_0x57a732(0x1b3)](_0x5be849,_0x2c0642+_0x756724*0.7),_0x4388fd=_0x20bd53+_0x4bc047*_0x52c921*0.4,_0xbe7d46=_0x3f2309+_0x235de3*0.8,_0x545d9a=_0x4388fd,_0x187cc3=_0x38e57c+_0x3b5e79*0x2,_0x40006c=Math[_0x57a732(0x245)](_0x2afef2,Math['min'](_0x2d4528-_0x2afef2-_0x15331f,_0x3d8884)),_0x3dbe7e=Math[_0x57a732(0x245)](_0x2afef2,Math[_0x57a732(0x1b3)](_0x2d4528-_0x2afef2-_0x15331f,_0x16f3e0)),_0x863923=Math['max'](_0x2afef2,Math['min'](_0x2d4528-_0x2afef2-_0x15331f,_0x20bd53)),_0x592eaa=Math[_0x57a732(0x245)](_0x2afef2,Math['min'](_0x2d4528-_0x2afef2-_0x15331f,_0x4388fd)),_0x511d24={'x':_0x1cbed9['x'],'y':_0x1cbed9['y']+_0x50b4df*0.5},_0x3a2bee={'x':_0x40006c-_0x4bc047*_0x52c921*_0x50862c,'y':_0x1b9853+_0x235de3*_0x763df8*0.3},_0x4c17c9={'x':_0x40006c,'y':_0x1b9853},_0x4b54a7={'x':_0x40006c+_0x4bc047*_0x52c921*_0x50862c,'y':_0x1b9853-_0x235de3*_0x763df8*0.3},_0x3bbff2={'x':_0x3dbe7e+_0x4bc047*_0x52c921*_0x50862c,'y':_0x2c0642+_0x235de3*_0x763df8*0.5},_0x4b6f71={'x':_0x3dbe7e,'y':_0x2c0642},_0x5320dd={'x':_0x3dbe7e-_0x4bc047*_0x52c921*_0x50862c,'y':_0x2c0642-_0x235de3*_0x763df8*0.5},_0x34b550={'x':_0x863923-_0x4bc047*_0x52c921*_0x50862c,'y':_0x3f2309+_0x235de3*_0x763df8*0.4},_0x176f15={'x':_0x863923,'y':_0x3f2309},_0x477921={'x':_0x863923+_0x4bc047*_0x52c921*_0x50862c,'y':_0x3f2309-_0x235de3*_0x763df8*0.4},_0x527d77={'x':_0x592eaa+_0x4bc047*_0x52c921*_0x50862c,'y':_0xbe7d46+_0x235de3*_0x763df8*0.6},_0x59790e={'x':_0x592eaa,'y':_0xbe7d46},_0x5e5086={'x':_0x592eaa-_0x4bc047*_0x52c921*0.1,'y':_0xbe7d46+_0x38e57c*0.05},_0x5196b6={'x':_0x545d9a,'y':_0x187cc3-_0x38e57c*0.2},_0x210dc8={'x':_0x545d9a,'y':_0x187cc3};_0x486acc=[{'p0':_0x1cbed9,'p1':_0x511d24,'p2':_0x3a2bee,'p3':_0x4c17c9},{'p0':_0x4c17c9,'p1':_0x4b54a7,'p2':_0x3bbff2,'p3':_0x4b6f71},{'p0':_0x4b6f71,'p1':_0x5320dd,'p2':_0x34b550,'p3':_0x176f15},{'p0':_0x176f15,'p1':_0x477921,'p2':_0x527d77,'p3':_0x59790e},{'p0':_0x59790e,'p1':_0x5e5086,'p2':_0x5196b6,'p3':_0x210dc8}];}}return _0x5d7c09[_0x57a732(0x279)](..._0x486acc),_0x5d7c09;}catch(_0x5d6c88){return console['error'](_0x57a732(0x250)+_0x10a482?.['id']+':',_0x5d6c88),[];}}function handleEnemyHit(_0x2475cd){const _0x6c1b33=_0x21a6;if(!_0x2475cd)return{'destroyed':![],'pointsAwarded':0x0};const _0xb0196a=Date[_0x6c1b33(0x1bb)]();let _0x268514=0x0,_0xc182e8=![],_0x1aaf67=_0x2475cd['isDamaged'],_0x30ca9b=null;const _0x41b79b=_0x2475cd[_0x6c1b33(0x1c2)]===ENEMY3_TYPE?BOSS_WIDTH:_0x2475cd['type']===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x2d1e4f=_0x2475cd[_0x6c1b33(0x1c2)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x2475cd['type']===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT,_0x3a933c=_0x2475cd[_0x6c1b33(0x1c2)]===ENEMY3_TYPE&&_0x2475cd[_0x6c1b33(0x1ff)],_0x382ed8=_0x2475cd[_0x6c1b33(0x1c2)]===ENEMY3_TYPE&&_0x2475cd[_0x6c1b33(0x263)],_0x27aba6=_0x2475cd['x']+_0x41b79b/0x2,_0x35f546=_0x2475cd['y']+_0x2d1e4f*0.2;createHitSparks(_0x27aba6,_0x35f546),_0x2475cd['health']--;_0x2475cd[_0x6c1b33(0x1c2)]===ENEMY3_TYPE&&(_0x2475cd[_0x6c1b33(0x1fa)]=_0x2475cd[_0x6c1b33(0x235)]<ENEMY3_MAX_HITS);if(_0x2475cd[_0x6c1b33(0x235)]<=0x0){_0xc182e8=!![];if(_0x3a933c&&_0x382ed8){if(_0x2475cd[_0x6c1b33(0x263)]){const _0x38cbde=_0x2475cd[_0x6c1b33(0x263)]['width'],_0x3c09d1=_0x2475cd[_0x6c1b33(0x263)][_0x6c1b33(0x297)],_0x50a2f2=_0x2475cd['x']+(_0x41b79b-_0x38cbde)/0x2+CAPTURED_SHIP_OFFSET_X,_0x326a82=_0x2475cd['y']+CAPTURED_SHIP_OFFSET_Y,_0x12983e=fallingShips[_0x6c1b33(0x267)](_0x1a9009=>Math[_0x6c1b33(0x1b7)](_0x1a9009['x']-_0x50a2f2)<0x1&&Math['abs'](_0x1a9009['y']-_0x326a82)<0x1);!_0x12983e?fallingShips[_0x6c1b33(0x279)]({'x':_0x50a2f2,'y':_0x326a82,'width':_0x38cbde,'height':_0x3c09d1,'creationTime':_0xb0196a,'tintProgress':0x1,'rotation':0x0}):console[_0x6c1b33(0x290)](_0x6c1b33(0x1ab));}else console[_0x6c1b33(0x27a)]('[handleEnemyHit]\x20CRITICAL:\x20Boss\x20destroyed,\x20had\x20ship\x20initially\x20but\x20dimensions\x20missing!');_0x2475cd['hasCapturedShip']=![],_0x2475cd[_0x6c1b33(0x263)]=null;}else _0x3a933c&&!_0x382ed8&&(console[_0x6c1b33(0x27a)](_0x6c1b33(0x28a)+_0x2475cd['id']+_0x6c1b33(0x232)),_0x2475cd['hasCapturedShip']=![],_0x2475cd['capturedShipDimensions']=null);if(isChallengingStage){let _0x468042=0x64;const _0x30e59f=csLastHitTime;csLastHitTime=_0xb0196a,csLastChainHitPosition={'x':_0x2475cd['x'],'y':_0x2475cd['y']},csCurrentChainHits>0x0&&_0xb0196a-_0x30e59f<CS_CHAIN_BREAK_TIME_MS?csCurrentChainHits++:(csCurrentChainHits=0x1,csCurrentChainScore=0x0),csCurrentChainHits>=CS_CHAIN_SCORE_THRESHOLD&&(_0x468042*=0x2),_0x268514=_0x468042,csCurrentChainScore+=_0x268514,scoreEarnedThisCS+=_0x268514,challengingStageEnemiesHit++,_0x30ca9b=explosionSound;}else{if(_0x2475cd[_0x6c1b33(0x260)]==='in_grid')_0x268514=_0x2475cd['type']===ENEMY1_TYPE?0x32:_0x2475cd['type']===ENEMY2_TYPE?0x50:0x0,_0x2475cd['type']===ENEMY3_TYPE&&(_0x268514=0x96),_0x30ca9b=explosionSound;else{_0x268514=_0x2475cd[_0x6c1b33(0x1c2)]===ENEMY1_TYPE?0x64:_0x2475cd[_0x6c1b33(0x1c2)]===ENEMY2_TYPE?0xa0:0x0;if(_0x2475cd[_0x6c1b33(0x1c2)]===ENEMY3_TYPE){if(_0x3a933c){const _0xec03a3=[0x3e8,0x5dc,0x7d0,0xbb8];_0x268514=_0xec03a3[Math[_0x6c1b33(0x1a3)](Math[_0x6c1b33(0x1e1)]()*_0xec03a3[_0x6c1b33(0x299)])],_0x30ca9b=bossHit2Sound;}else _0x1aaf67?(_0x268514=0x190,_0x30ca9b=bossHit2Sound):(_0x268514=0x0,console[_0x6c1b33(0x290)](_0x6c1b33(0x287)+_0x268514+_0x6c1b33(0x28b)+(_0x2475cd[_0x6c1b33(0x235)]+0x1)),_0x30ca9b=explosionSound);}else _0x30ca9b=explosionSound;if(_0xc182e8&&_0x268514>0x0){const _0x59e59d=normalWaveLastHitTime;normalWaveLastHitTime=_0xb0196a,normalWaveLastChainHitPosition={'x':_0x2475cd['x'],'y':_0x2475cd['y']};normalWaveLastChainHitPosition&&_0xb0196a-_0x59e59d<NORMAL_WAVE_CHAIN_BREAK_TIME_MS?normalWaveCurrentChainHits++:(normalWaveCurrentChainHits=0x1,normalWaveCurrentChainScore=0x0);if(NORMAL_WAVE_CHAIN_BONUS_ENABLED&&normalWaveCurrentChainHits>=NORMAL_WAVE_CHAIN_SCORE_THRESHOLD){const _0x5afda1=[0x12c,0x258,0x3e8,0x5dc,0x7d0,0xbb8],_0x584cd5=Math[_0x6c1b33(0x1b3)](_0x5afda1[_0x6c1b33(0x299)]-0x1,normalWaveCurrentChainHits-NORMAL_WAVE_CHAIN_SCORE_THRESHOLD),_0x53d568=_0x5afda1[_0x584cd5];_0x268514+=_0x53d568,normalWaveCurrentChainScore+=_0x53d568;}}}}if(_0x268514>0x0){score+=_0x268514,highScore=Math[_0x6c1b33(0x245)](highScore,score);let _0x3b91cf=![],_0x12042d=null;if(!isManualControl)_0x3b91cf=player1TriggeredHighScoreSound,_0x12042d=()=>{player1TriggeredHighScoreSound=!![];};else isTwoPlayerMode?currentPlayer===0x1?(_0x3b91cf=player1TriggeredHighScoreSound,_0x12042d=()=>{player1TriggeredHighScoreSound=!![];}):(_0x3b91cf=player2TriggeredHighScoreSound,_0x12042d=()=>{player2TriggeredHighScoreSound=!![];}):(_0x3b91cf=player1TriggeredHighScoreSound,_0x12042d=()=>{player1TriggeredHighScoreSound=!![];});if(!_0x3b91cf){if(score>highScore-_0x268514){if(_0x12042d)_0x12042d();playSound(hiScoreSound);}}_0xc182e8&&(!isManualControl||currentPlayer===0x1||!isTwoPlayerMode?(player1Score=score,player1EnemiesHit++):(player2Score=score,player2EnemiesHit++));checkAndAwardExtraLife();const _0x4bb50b=_0x2475cd[_0x6c1b33(0x260)]===_0x6c1b33(0x251)||isChallengingStage?FLOATING_SCORE_COLOR_GRID:FLOATING_SCORE_COLOR_ACTIVE;floatingScores[_0x6c1b33(0x279)]({'text':_0x268514[_0x6c1b33(0x243)](),'x':_0x2475cd['x']+_0x41b79b/0x2,'y':_0x2475cd['y'],'color':_0x4bb50b,'creationTime':_0xb0196a,'displayStartTime':_0xb0196a+FLOATING_SCORE_APPEAR_DELAY});}createExplosion(_0x2475cd['x']+_0x41b79b/0x2,_0x2475cd['y']+_0x2d1e4f/0x2);_0x2475cd['id']===capturingBossId&&stopSound(captureSound);if(_0x2475cd['state']===_0x6c1b33(0x29c)||_0x2475cd[_0x6c1b33(0x260)]===_0x6c1b33(0x21d)||_0x2475cd[_0x6c1b33(0x260)]===_0x6c1b33(0x225)||_0x2475cd[_0x6c1b33(0x260)]===_0x6c1b33(0x20d)||_0x2475cd[_0x6c1b33(0x260)]===_0x6c1b33(0x1e2)||_0x2475cd[_0x6c1b33(0x260)]===_0x6c1b33(0x2a0)){if(_0x2475cd['type']===ENEMY3_TYPE)stopSound(bossGalagaDiveSound);else stopSound(butterflyDiveSound);}}else _0xc182e8=![],_0x2475cd[_0x6c1b33(0x1c2)]===ENEMY3_TYPE?(_0x30ca9b=bossHit1Sound,_0x268514=0x0):_0x268514=0x0;return _0x30ca9b&&playSound(_0x30ca9b),{'destroyed':_0xc182e8,'pointsAwarded':_0x268514};}function createHitSparks(_0x2b898b,_0x2c280d){const _0x6af2e6=_0x21a6;if(!gameCtx)return;const _0x48ae10=Date['now']();for(let _0x414ecb=0x0;_0x414ecb<HIT_SPARK_COUNT;_0x414ecb++){const _0x47d83a=Math[_0x6af2e6(0x1e1)]()*Math['PI']*0x2,_0x5ca740=HIT_SPARK_SPEED*(0.7+Math[_0x6af2e6(0x1e1)]()*0.6),_0x3218d7=HIT_SPARK_LIFETIME*(0.8+Math[_0x6af2e6(0x1e1)]()*0.4);hitSparks[_0x6af2e6(0x279)]({'x':_0x2b898b,'y':_0x2c280d,'vx':Math[_0x6af2e6(0x25d)](_0x47d83a)*_0x5ca740,'vy':Math[_0x6af2e6(0x19a)](_0x47d83a)*_0x5ca740,'creationTime':_0x48ae10,'lifetime':_0x3218d7,'size':HIT_SPARK_SIZE,'color':HIT_SPARK_COLOR});}}function updateHitSparks(){const _0x394760=_0x21a6,_0x291018=Date[_0x394760(0x1bb)]();for(let _0x57617b=hitSparks[_0x394760(0x299)]-0x1;_0x57617b>=0x0;_0x57617b--){const _0x344e07=hitSparks[_0x57617b],_0x251b06=_0x291018-_0x344e07['creationTime'];_0x251b06>=_0x344e07[_0x394760(0x20c)]?hitSparks[_0x394760(0x1c1)](_0x57617b,0x1):(_0x344e07['vy']+=HIT_SPARK_GRAVITY,_0x344e07['x']+=_0x344e07['vx'],_0x344e07['y']+=_0x344e07['vy'],_0x344e07[_0x394760(0x29a)]=Math[_0x394760(0x245)](0x0,0x1-_0x251b06*HIT_SPARK_FADE_SPEED));}}function moveEntities(){const _0x5c6505=_0x21a6;if(isPaused)return;try{if(ship&&isInGameState&&playerLives>0x0&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage&&!isWaitingForRespawn){let _0x3459d9=ship[_0x5c6505(0x1de)];isDualShipActive&&(_0x3459d9+=DUAL_SHIP_OFFSET_X);let _0x5c2a66=ship['x'];if(isManualControl){let _0x378843=![],_0x4dbef6=![];currentPlayer===0x1||!isTwoPlayerMode?(_0x378843=leftPressed,_0x4dbef6=rightPressed):(_0x378843=p2LeftPressed,_0x4dbef6=p2RightPressed);if(_0x378843&&ship['x']>0x0)_0x5c2a66=ship['x']-ship[_0x5c6505(0x2a6)];else _0x4dbef6&&ship['x']<gameCanvas[_0x5c6505(0x1de)]-_0x3459d9&&(_0x5c2a66=ship['x']+ship[_0x5c6505(0x2a6)]);ship['x']=Math['max'](0x0,Math[_0x5c6505(0x1b3)](gameCanvas['width']-_0x3459d9,_0x5c2a66)),ship[_0x5c6505(0x244)]=ship['x'];}else{if(typeof smoothedShipX!==_0x5c6505(0x20b)){const _0x33413d=0.1,_0x4542b5=1.2;smoothedShipX+=(ship[_0x5c6505(0x244)]-smoothedShipX)*AI_SMOOTHING_FACTOR_MOVE;const _0x1dff19=smoothedShipX-ship['x'],_0x4136ce=ship[_0x5c6505(0x2a6)]*_0x4542b5;let _0x22d6cc=0x0;if(Math['abs'](_0x1dff19)>_0x33413d){const _0x49a1b8=isChallengingStage?CS_AI_MOVE_FRACTION:NORMAL_MOVE_FRACTION;_0x22d6cc=_0x1dff19*_0x49a1b8,_0x22d6cc=Math[_0x5c6505(0x245)](-_0x4136ce,Math[_0x5c6505(0x1b3)](_0x4136ce,_0x22d6cc)),Math[_0x5c6505(0x1b7)](_0x22d6cc)>Math[_0x5c6505(0x1b7)](_0x1dff19)&&(_0x22d6cc=_0x1dff19),ship['x']+=_0x22d6cc,ship['x']=Math[_0x5c6505(0x245)](0x0,Math['min'](gameCanvas[_0x5c6505(0x1de)]-_0x3459d9,ship['x']));}}else ship['x']=Math[_0x5c6505(0x245)](0x0,Math['min'](gameCanvas['width']-_0x3459d9,ship[_0x5c6505(0x244)]));}}const _0x85d636=Date[_0x5c6505(0x1bb)]();for(let _0x1c7499=bullets[_0x5c6505(0x299)]-0x1;_0x1c7499>=0x0;_0x1c7499--){const _0x54a264=bullets[_0x1c7499];_0x54a264?(_0x54a264['y']-=_0x54a264['speed'],_0x54a264['y']+PLAYER_BULLET_HEIGHT<0x0&&bullets[_0x5c6505(0x1c1)](_0x1c7499,0x1)):bullets[_0x5c6505(0x1c1)](_0x1c7499,0x1);}for(let _0x55663f=enemyBullets[_0x5c6505(0x299)]-0x1;_0x55663f>=0x0;_0x55663f--){const _0x4ff3fc=enemyBullets[_0x55663f];if(!_0x4ff3fc){enemyBullets['splice'](_0x55663f,0x1);continue;}_0x4ff3fc['x']+=_0x4ff3fc['vx'],_0x4ff3fc['y']+=_0x4ff3fc['vy'],(_0x4ff3fc['y']>gameCanvas[_0x5c6505(0x297)]||_0x4ff3fc['y']<-ENEMY_BULLET_HEIGHT||_0x4ff3fc['x']<-ENEMY_BULLET_WIDTH||_0x4ff3fc['x']>gameCanvas[_0x5c6505(0x1de)])&&enemyBullets[_0x5c6505(0x1c1)](_0x55663f,0x1);}for(let _0x11e5c4=fallingShips[_0x5c6505(0x299)]-0x1;_0x11e5c4>=0x0;_0x11e5c4--){const _0x4e2b5b=fallingShips[_0x11e5c4];if(!_0x4e2b5b){fallingShips[_0x5c6505(0x1c1)](_0x11e5c4,0x1);continue;}_0x4e2b5b['y']+=FALLING_SHIP_SPEED;const _0x1b588e=_0x85d636-_0x4e2b5b['creationTime'];typeof _0x4e2b5b['tintProgress']===_0x5c6505(0x1f8)?_0x4e2b5b[_0x5c6505(0x1e4)]=Math[_0x5c6505(0x245)](0x0,0x1-_0x1b588e/FALLING_SHIP_FADE_DURATION_MS):_0x4e2b5b[_0x5c6505(0x1e4)]=0x0;if(typeof _0x4e2b5b[_0x5c6505(0x201)]===_0x5c6505(0x1f8)){const _0xd27cd2=Math[_0x5c6505(0x1b3)](0x1,_0x1b588e/FALLING_SHIP_ROTATION_DURATION_MS);_0x4e2b5b[_0x5c6505(0x201)]=_0xd27cd2*0x2*(0x2*Math['PI']);}else _0x4e2b5b[_0x5c6505(0x201)]=0x0;if(ship&&!isDualShipActive&&!isShipCaptured&&!isWaitingForRespawn&&_0x4e2b5b['y']+_0x4e2b5b[_0x5c6505(0x297)]>=gameCanvas[_0x5c6505(0x297)]-AUTO_DOCK_THRESHOLD){fallingShips[_0x5c6505(0x1c1)](_0x11e5c4,0x1),isDualShipActive=!![];currentPlayer===0x1?player1IsDualShipActive=!![]:player2IsDualShipActive=!![];playSound(dualShipSound);continue;}_0x4e2b5b['y']>gameCanvas['height']+_0x4e2b5b[_0x5c6505(0x297)]&&fallingShips['splice'](_0x11e5c4,0x1);}let _0x156fb1=0x0;if(!isChallengingStage&&!isWaveTransitioning&&isGridSoundPlaying&&enemies[_0x5c6505(0x267)](_0x4484d2=>_0x4484d2?.['state']===_0x5c6505(0x251))&&!isShowingPlayerGameOverMessage){const _0x291896=enemies['filter'](_0x4b8e85=>_0x4b8e85?.[_0x5c6505(0x260)]==='in_grid');if(_0x291896['length']>0x0){let _0x2e4716=gameCanvas[_0x5c6505(0x1de)],_0x310071=0x0;_0x291896[_0x5c6505(0x27e)](_0x5e50c7=>{const _0x14dc51=_0x5c6505;_0x5e50c7&&(_0x2e4716=Math['min'](_0x2e4716,_0x5e50c7['x']),_0x310071=Math[_0x14dc51(0x245)](_0x310071,_0x5e50c7['x']+_0x5e50c7[_0x14dc51(0x1de)]));});const _0x24bd49=gameCanvas[_0x5c6505(0x1de)]*GRID_HORIZONTAL_MARGIN_PERCENT,_0x4dc62b=gameCanvas['width']*(0x1-GRID_HORIZONTAL_MARGIN_PERCENT);if(gridMoveDirection===0x1&&_0x310071>=_0x4dc62b)gridMoveDirection=-0x1;else gridMoveDirection===-0x1&&_0x2e4716<=_0x24bd49&&(gridMoveDirection=0x1);const _0x3d0202=scaleValue(level,BASE_GRID_MOVE_SPEED,MAX_GRID_MOVE_SPEED);_0x156fb1=_0x3d0202*gridMoveDirection,currentGridOffsetX+=_0x156fb1,enemies[_0x5c6505(0x27e)](_0x197a4e=>{const _0x5a18a3=_0x5c6505;if(_0x197a4e&&(_0x197a4e[_0x5a18a3(0x260)]===_0x5a18a3(0x1e2)||_0x197a4e[_0x5a18a3(0x260)]===_0x5a18a3(0x251)||_0x197a4e[_0x5a18a3(0x260)]==='moving_to_grid'))try{const _0x11f8cf=_0x197a4e[_0x5a18a3(0x1c2)]===ENEMY3_TYPE?BOSS_WIDTH:_0x197a4e['type']===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,{x:_0x2f7ed4,y:_0x5ca822}=getCurrentGridSlotPosition(_0x197a4e[_0x5a18a3(0x1f6)],_0x197a4e[_0x5a18a3(0x294)],_0x11f8cf);_0x197a4e[_0x5a18a3(0x1f5)]=_0x2f7ed4,_0x197a4e[_0x5a18a3(0x1c3)]=_0x5ca822;}catch(_0x3325df){console[_0x5a18a3(0x27a)](_0x5a18a3(0x203)+_0x197a4e?.['id']+_0x5a18a3(0x29b)+_0x197a4e?.[_0x5a18a3(0x260)]+_0x5a18a3(0x268),_0x3325df);}});}else isGridSoundPlaying&&(stopSound(gridBackgroundSound),isGridSoundPlaying=![]);}else isGridSoundPlaying&&(!enemies[_0x5c6505(0x267)](_0xe891bc=>_0xe891bc?.[_0x5c6505(0x260)]==='in_grid')||isChallengingStage||isWaveTransitioning||isShowingPlayerGameOverMessage)&&(stopSound(gridBackgroundSound),isGridSoundPlaying=![]);for(let _0x1f06fe=enemies[_0x5c6505(0x299)]-0x1;_0x1f06fe>=0x0;_0x1f06fe--){let _0x2f54a9=enemies[_0x1f06fe];if(!_0x2f54a9)continue;const _0xe1a31b=_0x2f54a9['id'];if(_0x2f54a9[_0x5c6505(0x1e7)]&&_0x2f54a9[_0x5c6505(0x260)]!==_0x5c6505(0x2b7)){clearTimeout(_0x2f54a9[_0x5c6505(0x1e7)]);const _0x5f1a00=enemySpawnTimeouts['indexOf'](_0x2f54a9['capturePrepareTimeout']);if(_0x5f1a00>-0x1)enemySpawnTimeouts['splice'](_0x5f1a00,0x1);_0x2f54a9['capturePrepareTimeout']=null;}const _0x47c0cc=_0x2f54a9[_0x5c6505(0x1c2)]===ENEMY3_TYPE?BOSS_WIDTH:_0x2f54a9[_0x5c6505(0x1c2)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x398466=_0x2f54a9[_0x5c6505(0x1c2)]===ENEMY3_TYPE?BOSS_HEIGHT:_0x2f54a9[_0x5c6505(0x1c2)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT;switch(_0x2f54a9['state']){case _0x5c6505(0x20d):{let _0x44b3cb=CS_ENTRANCE_PATH_SPEED;const _0x1cc376=_0x2f54a9['pathSpeedMultiplier']||0x1;_0x44b3cb*=_0x1cc376;if(!isChallengingStage){enemies['splice'](_0x1f06fe,0x1),_0x2f54a9=null;break;}let _0x26c52c=challengingStagePaths,_0x244b2a=_0x26c52c[_0x2f54a9['entrancePathId']];if(!_0x244b2a||_0x2f54a9[_0x5c6505(0x29d)]>=_0x244b2a[_0x5c6505(0x299)]){enemies[_0x5c6505(0x1c1)](_0x1f06fe,0x1),_0x2f54a9=null;break;}const _0x48ad2d=_0x244b2a[_0x2f54a9[_0x5c6505(0x29d)]];if(!_0x48ad2d||!_0x48ad2d['p0']||!_0x48ad2d['p1']||!_0x48ad2d['p2']||!_0x48ad2d['p3']){console[_0x5c6505(0x27a)](_0x5c6505(0x1bd)+_0x2f54a9[_0x5c6505(0x29d)]+_0x5c6505(0x254)+_0x2f54a9[_0x5c6505(0x282)]+'.\x20Enemy\x20'+_0x2f54a9['id']),enemies[_0x5c6505(0x1c1)](_0x1f06fe,0x1),_0x2f54a9=null;break;}_0x2f54a9[_0x5c6505(0x220)]+=_0x44b3cb;let _0x42ba4a,_0x38997b,_0x132a89=_0x2f54a9['x'],_0x5ce516=_0x2f54a9['y'];if(_0x2f54a9['pathT']>=0x1){_0x2f54a9[_0x5c6505(0x220)]=0x0,_0x2f54a9['pathSegmentIndex']++;if(_0x2f54a9[_0x5c6505(0x29d)]>=_0x244b2a[_0x5c6505(0x299)])enemies['splice'](_0x1f06fe,0x1),_0x2f54a9=null;else{const _0x5861b1=_0x244b2a[_0x2f54a9[_0x5c6505(0x29d)]];_0x5861b1?.['p0']?(_0x42ba4a=_0x5861b1['p0']['x'],_0x38997b=_0x5861b1['p0']['y']):(console[_0x5c6505(0x27a)](_0x5c6505(0x22b)+_0x2f54a9[_0x5c6505(0x29d)]+_0x5c6505(0x254)+_0x2f54a9[_0x5c6505(0x282)]+_0x5c6505(0x25a)+_0xe1a31b),enemies[_0x5c6505(0x1c1)](_0x1f06fe,0x1),_0x2f54a9=null);}}else try{_0x42ba4a=calculateBezierPoint(_0x2f54a9['pathT'],_0x48ad2d['p0']['x'],_0x48ad2d['p1']['x'],_0x48ad2d['p2']['x'],_0x48ad2d['p3']['x']),_0x38997b=calculateBezierPoint(_0x2f54a9[_0x5c6505(0x220)],_0x48ad2d['p0']['y'],_0x48ad2d['p1']['y'],_0x48ad2d['p2']['y'],_0x48ad2d['p3']['y']);}catch(_0x54c093){console[_0x5c6505(0x27a)]('Error\x20calculating\x20CS\x20Bezier\x20point\x20for\x20enemy\x20'+_0xe1a31b+':',_0x54c093),enemies[_0x5c6505(0x1c1)](_0x1f06fe,0x1),_0x2f54a9=null;}_0x2f54a9&&(isNaN(_0x42ba4a)||isNaN(_0x38997b)?(console['error'](_0x5c6505(0x273)+_0xe1a31b+_0x5c6505(0x286)),enemies[_0x5c6505(0x1c1)](_0x1f06fe,0x1),_0x2f54a9=null):(_0x2f54a9[_0x5c6505(0x1e6)]=_0x42ba4a-_0x132a89,_0x2f54a9[_0x5c6505(0x281)]=_0x38997b-_0x5ce516,_0x2f54a9['x']=_0x42ba4a,_0x2f54a9['y']=_0x38997b));break;}case _0x5c6505(0x21d):{if(isChallengingStage){enemies[_0x5c6505(0x1c1)](_0x1f06fe,0x1),_0x2f54a9=null;break;}let _0x42c065=normalWaveEntrancePaths,_0x1dbc3f=_0x42c065[_0x2f54a9['entrancePathId']],_0x4f0a50;_0x2f54a9[_0x5c6505(0x282)]==='boss_loop_left'||_0x2f54a9[_0x5c6505(0x282)]===_0x5c6505(0x1aa)?_0x4f0a50=BOSS_LOOP_ENTRANCE_PATH_SPEED:_0x4f0a50=NORMAL_ENTRANCE_PATH_SPEED;if(!_0x1dbc3f){console[_0x5c6505(0x290)]('Enemy\x20'+_0xe1a31b+'\x20missing\x20SHARED\x20path\x20'+_0x2f54a9[_0x5c6505(0x282)]+'.\x20Switching\x20to\x20moving_to_grid.');try{_0x2f54a9['targetGridX']=_0x2f54a9[_0x5c6505(0x1f5)]??gameCanvas[_0x5c6505(0x1de)]/0x2,_0x2f54a9['targetGridY']=_0x2f54a9[_0x5c6505(0x1c3)]??ENEMY_TOP_MARGIN;}catch(_0x4486b1){console[_0x5c6505(0x27a)](_0x5c6505(0x1b9)+_0xe1a31b+'\x20after\x20missing\x20path',_0x4486b1),_0x2f54a9[_0x5c6505(0x1f5)]=gameCanvas['width']/0x2,_0x2f54a9[_0x5c6505(0x1c3)]=ENEMY_TOP_MARGIN;}_0x2f54a9[_0x5c6505(0x260)]='moving_to_grid',_0x2f54a9[_0x5c6505(0x220)]=0x0,_0x2f54a9['pathSegmentIndex']=0x0,_0x2f54a9[_0x5c6505(0x1e6)]=0x0,_0x2f54a9[_0x5c6505(0x281)]=0x0;_0x2f54a9[_0x5c6505(0x224)]!==undefined&&squadronCompletionStatus[_0x2f54a9[_0x5c6505(0x224)]]&&squadronCompletionStatus[_0x2f54a9[_0x5c6505(0x224)]][_0x5c6505(0x222)]++;break;}if(_0x2f54a9[_0x5c6505(0x29d)]>=_0x1dbc3f['length']){console[_0x5c6505(0x290)](_0x5c6505(0x19b)+_0xe1a31b+_0x5c6505(0x239)+_0x2f54a9[_0x5c6505(0x29d)]+'\x20out\x20of\x20bounds\x20for\x20SHARED\x20path\x20'+_0x2f54a9['entrancePathId']+_0x5c6505(0x1ba));try{_0x2f54a9[_0x5c6505(0x1f5)]=_0x2f54a9['targetGridX']??gameCanvas[_0x5c6505(0x1de)]/0x2,_0x2f54a9[_0x5c6505(0x1c3)]=_0x2f54a9['targetGridY']??ENEMY_TOP_MARGIN;}catch(_0x3f5c64){console[_0x5c6505(0x27a)]('Error\x20getting\x20grid\x20pos\x20for\x20'+_0xe1a31b+_0x5c6505(0x206),_0x3f5c64),_0x2f54a9[_0x5c6505(0x1f5)]=gameCanvas['width']/0x2,_0x2f54a9[_0x5c6505(0x1c3)]=ENEMY_TOP_MARGIN;}_0x2f54a9[_0x5c6505(0x260)]=_0x5c6505(0x277),_0x2f54a9[_0x5c6505(0x220)]=0x0,_0x2f54a9[_0x5c6505(0x29d)]=0x0,_0x2f54a9['velocityX']=0x0,_0x2f54a9[_0x5c6505(0x281)]=0x0;_0x2f54a9[_0x5c6505(0x224)]!==undefined&&squadronCompletionStatus[_0x2f54a9['squadronId']]&&squadronCompletionStatus[_0x2f54a9['squadronId']]['completed']++;break;}const _0x556a73=_0x1dbc3f[_0x2f54a9[_0x5c6505(0x29d)]];if(!_0x556a73||!_0x556a73['p0']||!_0x556a73['p1']||!_0x556a73['p2']||!_0x556a73['p3']){console[_0x5c6505(0x27a)](_0x5c6505(0x223)+_0x2f54a9['pathSegmentIndex']+_0x5c6505(0x22e)+_0x2f54a9[_0x5c6505(0x282)]+'.\x20Enemy\x20'+_0xe1a31b+_0x5c6505(0x1ba));try{_0x2f54a9['targetGridX']=_0x2f54a9[_0x5c6505(0x1f5)]??gameCanvas[_0x5c6505(0x1de)]/0x2,_0x2f54a9['targetGridY']=_0x2f54a9[_0x5c6505(0x1c3)]??ENEMY_TOP_MARGIN+_0x2f54a9[_0x5c6505(0x1f6)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}catch(_0xc97210){console[_0x5c6505(0x27a)](_0x5c6505(0x1b9)+_0xe1a31b+_0x5c6505(0x2a3),_0xc97210),_0x2f54a9[_0x5c6505(0x1f5)]=gameCanvas[_0x5c6505(0x1de)]/0x2,_0x2f54a9[_0x5c6505(0x1c3)]=ENEMY_TOP_MARGIN;}_0x2f54a9[_0x5c6505(0x260)]=_0x5c6505(0x277),_0x2f54a9[_0x5c6505(0x220)]=0x0,_0x2f54a9[_0x5c6505(0x29d)]=0x0,_0x2f54a9[_0x5c6505(0x1e6)]=0x0,_0x2f54a9[_0x5c6505(0x281)]=0x0;_0x2f54a9['squadronId']!==undefined&&squadronCompletionStatus[_0x2f54a9[_0x5c6505(0x224)]]&&squadronCompletionStatus[_0x2f54a9[_0x5c6505(0x224)]]['completed']++;break;}_0x2f54a9[_0x5c6505(0x220)]+=_0x4f0a50;let _0x63f8d6,_0xf03e54,_0x4b13a7=_0x2f54a9['x'],_0x437aa1=_0x2f54a9['y'];if(_0x2f54a9[_0x5c6505(0x220)]>=0x1){_0x2f54a9['pathT']=0x0,_0x2f54a9[_0x5c6505(0x29d)]++;if(_0x2f54a9[_0x5c6505(0x29d)]>=_0x1dbc3f[_0x5c6505(0x299)]){let _0x15f206,_0x3de742;try{_0x15f206=calculateBezierPoint(0x1,_0x556a73['p0']['x'],_0x556a73['p1']['x'],_0x556a73['p2']['x'],_0x556a73['p3']['x']),_0x3de742=calculateBezierPoint(0x1,_0x556a73['p0']['y'],_0x556a73['p1']['y'],_0x556a73['p2']['y'],_0x556a73['p3']['y']);}catch(_0x3b880c){console[_0x5c6505(0x27a)](_0x5c6505(0x255)+_0xe1a31b+_0x5c6505(0x275)+_0x2f54a9[_0x5c6505(0x282)],_0x3b880c),_0x15f206=_0x556a73['p3']['x'],_0x3de742=_0x556a73['p3']['y'];}_0x2f54a9['x']=_0x15f206,_0x2f54a9['y']=_0x3de742;try{_0x2f54a9[_0x5c6505(0x1f5)]=_0x2f54a9['targetGridX']??gameCanvas[_0x5c6505(0x1de)]/0x2,_0x2f54a9[_0x5c6505(0x1c3)]=_0x2f54a9['targetGridY']??ENEMY_TOP_MARGIN;}catch(_0x5314c8){console['error'](_0x5c6505(0x1c8)+_0xe1a31b+_0x5c6505(0x275)+_0x2f54a9['entrancePathId'],_0x5314c8),_0x2f54a9[_0x5c6505(0x1f5)]=_0x2f54a9['x'],_0x2f54a9[_0x5c6505(0x1c3)]=ENEMY_TOP_MARGIN+_0x2f54a9[_0x5c6505(0x1f6)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}const _0x5266eb=_0x2f54a9[_0x5c6505(0x260)];_0x2f54a9[_0x5c6505(0x260)]=_0x5c6505(0x277),_0x2f54a9[_0x5c6505(0x1e6)]=0x0,_0x2f54a9[_0x5c6505(0x281)]=0x0,_0x2f54a9[_0x5c6505(0x29d)]=0x0;_0x5266eb===_0x5c6505(0x21d)&&_0x2f54a9[_0x5c6505(0x224)]!==undefined&&squadronCompletionStatus[_0x2f54a9[_0x5c6505(0x224)]]&&squadronCompletionStatus[_0x2f54a9[_0x5c6505(0x224)]][_0x5c6505(0x222)]++;break;}else{const _0x2fe695=_0x1dbc3f[_0x2f54a9['pathSegmentIndex']];if(_0x2fe695?.['p0'])_0x63f8d6=_0x2fe695['p0']['x'],_0xf03e54=_0x2fe695['p0']['y'];else{console[_0x5c6505(0x27a)](_0x5c6505(0x1af)+_0x2f54a9[_0x5c6505(0x29d)]+_0x5c6505(0x22e)+_0x2f54a9['entrancePathId']+_0x5c6505(0x25a)+_0xe1a31b+_0x5c6505(0x1ba));try{_0x2f54a9[_0x5c6505(0x1f5)]=_0x2f54a9[_0x5c6505(0x1f5)]??gameCanvas['width']/0x2,_0x2f54a9[_0x5c6505(0x1c3)]=_0x2f54a9[_0x5c6505(0x1c3)]??ENEMY_TOP_MARGIN;}catch(_0x5fb0cd){console[_0x5c6505(0x27a)](_0x5c6505(0x1b9)+_0xe1a31b+_0x5c6505(0x213),_0x5fb0cd),_0x2f54a9[_0x5c6505(0x1f5)]=gameCanvas[_0x5c6505(0x1de)]/0x2,_0x2f54a9['targetGridY']=ENEMY_TOP_MARGIN;}_0x2f54a9[_0x5c6505(0x260)]='moving_to_grid',_0x2f54a9['pathT']=0x0,_0x2f54a9[_0x5c6505(0x29d)]=0x0,_0x2f54a9[_0x5c6505(0x1e6)]=0x0,_0x2f54a9[_0x5c6505(0x281)]=0x0;_0x2f54a9[_0x5c6505(0x224)]!==undefined&&squadronCompletionStatus[_0x2f54a9[_0x5c6505(0x224)]]&&squadronCompletionStatus[_0x2f54a9[_0x5c6505(0x224)]][_0x5c6505(0x222)]++;break;}}}else try{_0x63f8d6=calculateBezierPoint(_0x2f54a9[_0x5c6505(0x220)],_0x556a73['p0']['x'],_0x556a73['p1']['x'],_0x556a73['p2']['x'],_0x556a73['p3']['x']),_0xf03e54=calculateBezierPoint(_0x2f54a9['pathT'],_0x556a73['p0']['y'],_0x556a73['p1']['y'],_0x556a73['p2']['y'],_0x556a73['p3']['y']);}catch(_0xcb1930){console[_0x5c6505(0x27a)]('Error\x20calculating\x20Normal\x20Bezier\x20point\x20for\x20enemy\x20'+_0xe1a31b+':',_0xcb1930);try{_0x2f54a9[_0x5c6505(0x1f5)]=_0x2f54a9[_0x5c6505(0x1f5)]??gameCanvas[_0x5c6505(0x1de)]/0x2,_0x2f54a9['targetGridY']=_0x2f54a9['targetGridY']??ENEMY_TOP_MARGIN;}catch(_0x30f984){console[_0x5c6505(0x27a)](_0x5c6505(0x1b9)+_0xe1a31b+'\x20after\x20bezier\x20error',_0x30f984),_0x2f54a9[_0x5c6505(0x1f5)]=gameCanvas[_0x5c6505(0x1de)]/0x2,_0x2f54a9[_0x5c6505(0x1c3)]=ENEMY_TOP_MARGIN;}_0x2f54a9[_0x5c6505(0x260)]=_0x5c6505(0x277),_0x2f54a9[_0x5c6505(0x220)]=0x0,_0x2f54a9[_0x5c6505(0x29d)]=0x0,_0x2f54a9['velocityX']=0x0,_0x2f54a9['velocityY']=0x0;_0x2f54a9[_0x5c6505(0x224)]!==undefined&&squadronCompletionStatus[_0x2f54a9['squadronId']]&&squadronCompletionStatus[_0x2f54a9[_0x5c6505(0x224)]][_0x5c6505(0x222)]++;break;}if(_0x2f54a9&&_0x2f54a9['state']==='following_entrance_path'){if(isNaN(_0x63f8d6)||isNaN(_0xf03e54)){console[_0x5c6505(0x27a)](_0x5c6505(0x291)+_0xe1a31b+_0x5c6505(0x1ba));try{_0x2f54a9[_0x5c6505(0x1f5)]=_0x2f54a9['targetGridX']??gameCanvas['width']/0x2,_0x2f54a9['targetGridY']=_0x2f54a9[_0x5c6505(0x1c3)]??ENEMY_TOP_MARGIN;}catch(_0xdc968a){console[_0x5c6505(0x27a)]('Error\x20getting\x20grid\x20pos\x20for\x20'+_0xe1a31b+_0x5c6505(0x211),_0xdc968a),_0x2f54a9['targetGridX']=gameCanvas[_0x5c6505(0x1de)]/0x2,_0x2f54a9[_0x5c6505(0x1c3)]=ENEMY_TOP_MARGIN;}_0x2f54a9['state']=_0x5c6505(0x277),_0x2f54a9[_0x5c6505(0x220)]=0x0,_0x2f54a9[_0x5c6505(0x29d)]=0x0,_0x2f54a9[_0x5c6505(0x1e6)]=0x0,_0x2f54a9[_0x5c6505(0x281)]=0x0,_0x2f54a9['squadronId']!==undefined&&squadronCompletionStatus[_0x2f54a9[_0x5c6505(0x224)]]&&squadronCompletionStatus[_0x2f54a9[_0x5c6505(0x224)]][_0x5c6505(0x222)]++;}else{let _0xd7e39f=_0x63f8d6;const _0x502f48=currentWavePatternIndex===0x1&&(_0x2f54a9[_0x5c6505(0x224)]===0x2||_0x2f54a9['squadronId']===0x3),_0x449c65=typeof _0x2f54a9[_0x5c6505(0x19f)]==='number'&&_0x2f54a9[_0x5c6505(0x19f)]%0x2!==0x0;if(_0x502f48&&_0x449c65){const _0x2b4bc9=_0x47c0cc+ENTRANCE_PAIR_HORIZONTAL_GAP;_0xd7e39f=_0x63f8d6+_0x2b4bc9;}_0x2f54a9[_0x5c6505(0x1e6)]=_0xd7e39f-_0x4b13a7,_0x2f54a9[_0x5c6505(0x281)]=_0xf03e54-_0x437aa1,_0x2f54a9['x']=_0xd7e39f,_0x2f54a9['y']=_0xf03e54;}}break;}case _0x5c6505(0x277):{if(_0x2f54a9['targetGridX']==null||_0x2f54a9[_0x5c6505(0x1c3)]==null){console[_0x5c6505(0x290)](_0x5c6505(0x19b)+_0xe1a31b+'\x20in\x20moving_to_grid\x20state\x20without\x20target.\x20Recalculating.');try{const {x:_0x2449aa,y:_0x3c824c}=getCurrentGridSlotPosition(_0x2f54a9[_0x5c6505(0x1f6)],_0x2f54a9['gridCol'],_0x47c0cc);_0x2f54a9[_0x5c6505(0x1f5)]=_0x2449aa,_0x2f54a9[_0x5c6505(0x1c3)]=_0x3c824c;}catch(_0x1f1bc0){console[_0x5c6505(0x27a)](_0x5c6505(0x1b9)+_0xe1a31b+_0x5c6505(0x1b5),_0x1f1bc0),_0x2f54a9[_0x5c6505(0x260)]='in_grid',_0x2f54a9['x']=gameCanvas[_0x5c6505(0x1de)]/0x2,_0x2f54a9['y']=ENEMY_TOP_MARGIN;break;}}const _0x4579c0=_0x2f54a9[_0x5c6505(0x1f5)],_0x1e0f27=_0x2f54a9[_0x5c6505(0x1c3)],_0xc2b9b3=_0x4579c0-_0x2f54a9['x'],_0x4a5439=_0x1e0f27-_0x2f54a9['y'],_0x26d16b=Math[_0x5c6505(0x204)](_0xc2b9b3*_0xc2b9b3+_0x4a5439*_0x4a5439),_0x5976c6=ENTRANCE_SPEED*1.2,_0x5d7778=_0x5976c6*0.5;if(_0x26d16b>_0x5d7778)_0x2f54a9[_0x5c6505(0x1e6)]=_0xc2b9b3/_0x26d16b*_0x5976c6,_0x2f54a9['velocityY']=_0x4a5439/_0x26d16b*_0x5976c6,_0x2f54a9['x']+=_0x2f54a9['velocityX'],_0x2f54a9['y']+=_0x2f54a9[_0x5c6505(0x281)];else{_0x2f54a9['x']=_0x4579c0,_0x2f54a9['y']=_0x1e0f27,_0x2f54a9[_0x5c6505(0x1e6)]=0x0,_0x2f54a9[_0x5c6505(0x281)]=0x0;const _0x3b4447=_0x2f54a9[_0x5c6505(0x260)];_0x2f54a9[_0x5c6505(0x260)]=_0x5c6505(0x251),_0x2f54a9[_0x5c6505(0x1f9)]=![];!isGridSoundPlaying&&!isChallengingStage&&(isGridSoundPlaying=!![],playSound(gridBackgroundSound));GRID_BREATH_ENABLED&&!isGridBreathingActive&&!isChallengingStage&&(isGridBreathingActive=!![],gridBreathStartTime=_0x85d636,currentGridBreathFactor=0x0);!firstEnemyLanded&&!isFullGridWave&&!isChallengingStage&&(lastGridFireCheckTime=Date[_0x5c6505(0x1bb)](),firstEnemyLanded=!![]);if(_0x3b4447===_0x5c6505(0x277)&&!isChallengingStage&&!isFullGridWave&&_0x2f54a9['squadronId']!==undefined){const _0x211464=_0x2f54a9[_0x5c6505(0x224)],_0x2df556=squadronCompletionStatus[_0x211464];if(_0x2df556&&!_0x2df556[_0x5c6505(0x283)]){const _0x2619f6=enemies[_0x5c6505(0x1cc)](_0x558a96=>{const _0x5e77be=_0x5c6505;if(_0x558a96&&_0x558a96[_0x5e77be(0x224)]===_0x211464)return _0x558a96[_0x5e77be(0x260)]===_0x5e77be(0x251)||!enemies[_0x5e77be(0x267)](_0x2ec95f=>_0x2ec95f['id']===_0x558a96['id']);return!![];});if(_0x2619f6){_0x2df556[_0x5c6505(0x283)]=!![];const _0x5a8972=enemies[_0x5c6505(0x25e)](_0x2952ea=>_0x2952ea&&_0x2952ea[_0x5c6505(0x224)]===_0x211464&&_0x2952ea[_0x5c6505(0x260)]===_0x5c6505(0x251)&&(_0x2952ea['type']===ENEMY2_TYPE||_0x2952ea[_0x5c6505(0x1c2)]===ENEMY3_TYPE)&&!(_0x2952ea[_0x5c6505(0x1c2)]===ENEMY3_TYPE&&_0x2952ea[_0x5c6505(0x1ff)]));if(_0x5a8972[_0x5c6505(0x299)]>0x0){const _0x468077=_0x5a8972[Math[_0x5c6505(0x1a3)](Math[_0x5c6505(0x1e1)]()*_0x5a8972[_0x5c6505(0x299)])],_0x2e9e1f=_0x468077['id'],_0x7ad561=0xc8+Math['random']()*0x190,_0xba4530=setTimeout(()=>{const _0x6f32ac=_0x5c6505;try{const _0x46c99b=enemySpawnTimeouts[_0x6f32ac(0x2a7)](_0xba4530);if(_0x46c99b>-0x1)enemySpawnTimeouts[_0x6f32ac(0x1c1)](_0x46c99b,0x1);if(isPaused||!isInGameState||playerLives<=0x0||isChallengingStage||isWaveTransitioning||isShipCaptured)return;const _0x43220e=enemies['find'](_0x45ba53=>_0x45ba53&&_0x45ba53['id']===_0x2e9e1f);_0x43220e&&_0x43220e[_0x6f32ac(0x260)]===_0x6f32ac(0x251)&&(createBulletSimple(_0x43220e)&&(playSound(enemyShootSound),_0x43220e[_0x6f32ac(0x1a1)]=Date[_0x6f32ac(0x1bb)]()));}catch(_0x37552d){console['error'](_0x6f32ac(0x1ee)+_0x2e9e1f+':',_0x37552d);}},_0x7ad561);enemySpawnTimeouts[_0x5c6505(0x279)](_0xba4530);}}}}}break;}case _0x5c6505(0x251):{typeof _0x2f54a9[_0x5c6505(0x1f5)]===_0x5c6505(0x1f8)&&!isNaN(_0x2f54a9[_0x5c6505(0x1f5)])&&(_0x2f54a9['x']=_0x2f54a9['targetGridX']);typeof _0x2f54a9[_0x5c6505(0x1c3)]===_0x5c6505(0x1f8)&&!isNaN(_0x2f54a9[_0x5c6505(0x1c3)])&&(_0x2f54a9['y']=_0x2f54a9[_0x5c6505(0x1c3)]);_0x2f54a9[_0x5c6505(0x1e6)]=isGridSoundPlaying?_0x156fb1:0x0,_0x2f54a9[_0x5c6505(0x281)]=0x0;_0x2f54a9[_0x5c6505(0x1c2)]===ENEMY3_TYPE&&_0x2f54a9[_0x5c6505(0x1ff)]&&_0x2f54a9[_0x5c6505(0x263)]&&(_0x2f54a9['capturedShipX']=_0x2f54a9['x']+CAPTURED_SHIP_OFFSET_X,_0x2f54a9['capturedShipY']=_0x2f54a9['y']+CAPTURED_SHIP_OFFSET_Y);break;}case _0x5c6505(0x19c):{_0x2f54a9[_0x5c6505(0x1e6)]=0x0,_0x2f54a9[_0x5c6505(0x281)]=0x0;break;}case _0x5c6505(0x2b7):{_0x2f54a9[_0x5c6505(0x1e6)]=0x0,_0x2f54a9['velocityY']=0x0;break;}case'diving_to_capture_position':{if(isShipCaptured){_0x2f54a9[_0x5c6505(0x260)]=_0x5c6505(0x1e2);try{const {x:_0x434bab,y:_0x2e7dd9}=getCurrentGridSlotPosition(_0x2f54a9[_0x5c6505(0x1f6)],_0x2f54a9[_0x5c6505(0x294)],_0x47c0cc);_0x2f54a9[_0x5c6505(0x1f5)]=_0x434bab,_0x2f54a9[_0x5c6505(0x1c3)]=_0x2e7dd9;}catch(_0x435ca0){console[_0x5c6505(0x27a)]('Error\x20getting\x20grid\x20pos\x20for\x20returning\x20boss\x20'+_0x2f54a9['id']+':',_0x435ca0),_0x2f54a9[_0x5c6505(0x1f5)]=gameCanvas[_0x5c6505(0x1de)]/0x2,_0x2f54a9[_0x5c6505(0x1c3)]=ENEMY_TOP_MARGIN;}break;}const _0x25f101=_0x2f54a9[_0x5c6505(0x244)],_0x5de186=_0x2f54a9[_0x5c6505(0x284)];if(_0x25f101==null||_0x5de186==null){console[_0x5c6505(0x27a)](_0x5c6505(0x242)+_0x2f54a9['id']+_0x5c6505(0x1d5)),_0x2f54a9[_0x5c6505(0x260)]=_0x5c6505(0x1e2);try{const {x:_0x1e0a1d,y:_0x54f3b2}=getCurrentGridSlotPosition(_0x2f54a9['gridRow'],_0x2f54a9[_0x5c6505(0x294)],_0x47c0cc);_0x2f54a9[_0x5c6505(0x1f5)]=_0x1e0a1d,_0x2f54a9['targetGridY']=_0x54f3b2;}catch(_0x4fa02a){console[_0x5c6505(0x27a)](_0x5c6505(0x1ca)+_0x2f54a9['id']+':',_0x4fa02a),_0x2f54a9[_0x5c6505(0x1f5)]=gameCanvas[_0x5c6505(0x1de)]/0x2,_0x2f54a9[_0x5c6505(0x1c3)]=ENEMY_TOP_MARGIN;}break;}const _0x2cf2c7=_0x25f101-_0x2f54a9['x'],_0x5e387a=_0x5de186-_0x2f54a9['y'],_0x353a15=Math['sqrt'](_0x2cf2c7*_0x2cf2c7+_0x5e387a*_0x5e387a),_0x548ee8=BOSS_CAPTURE_DIVE_SPEED_FACTOR*BASE_ENEMY_ATTACK_SPEED,_0x204bab=_0x548ee8*0.6;_0x353a15>_0x204bab?(_0x2f54a9[_0x5c6505(0x1e6)]=_0x2cf2c7/_0x353a15*_0x548ee8,_0x2f54a9[_0x5c6505(0x281)]=_0x5e387a/_0x353a15*_0x548ee8,_0x2f54a9['x']+=_0x2f54a9[_0x5c6505(0x1e6)],_0x2f54a9['y']+=_0x2f54a9[_0x5c6505(0x281)]):(_0x2f54a9['x']=_0x25f101,_0x2f54a9['y']=_0x5de186,_0x2f54a9[_0x5c6505(0x1e6)]=0x0,_0x2f54a9[_0x5c6505(0x281)]=0x0,_0x2f54a9[_0x5c6505(0x260)]=_0x5c6505(0x252),_0x2f54a9[_0x5c6505(0x1cf)]=_0x85d636,capturingBossId=_0x2f54a9['id'],captureBeamActive=!![],captureBeamSource={'x':_0x2f54a9['x']+_0x47c0cc/0x2,'y':_0x2f54a9['y']+_0x398466},captureBeamTargetY=_0x2f54a9['y'],captureBeamProgress=0x0,playSound(captureSound));break;}case _0x5c6505(0x252):{_0x2f54a9[_0x5c6505(0x1e6)]=0x0,_0x2f54a9['velocityY']=0x0;if(isShipCaptured&&_0x2f54a9['id']!==capturedBossIdWithMessage){console[_0x5c6505(0x290)](_0x5c6505(0x1d9)+_0x2f54a9['id']+_0x5c6505(0x23e)+capturedBossIdWithMessage+_0x5c6505(0x1b8)),captureBeamActive=![];if(capturingBossId===_0x2f54a9['id'])capturingBossId=null;_0x2f54a9['state']='returning';try{const {x:_0x428736,y:_0x3d90d0}=getCurrentGridSlotPosition(_0x2f54a9['gridRow'],_0x2f54a9[_0x5c6505(0x294)],_0x47c0cc);_0x2f54a9['targetGridX']=_0x428736,_0x2f54a9[_0x5c6505(0x1c3)]=_0x3d90d0;}catch(_0x10cda5){console[_0x5c6505(0x27a)]('Error\x20getting\x20grid\x20pos\x20for\x20returning\x20boss\x20'+_0x2f54a9['id']+':',_0x10cda5),_0x2f54a9[_0x5c6505(0x1f5)]=gameCanvas[_0x5c6505(0x1de)]/0x2,_0x2f54a9[_0x5c6505(0x1c3)]=ENEMY_TOP_MARGIN;}stopSound(captureSound);break;}const _0x511e88=_0x85d636-_0x2f54a9[_0x5c6505(0x1cf)],_0x693100=CAPTURE_BEAM_ANIMATION_DURATION_MS/0x2,_0x434965=CAPTURE_BEAM_DURATION_MS;if(_0x511e88<_0x693100)captureBeamProgress=_0x511e88/_0x693100;else{if(_0x511e88<_0x434965-_0x693100)captureBeamProgress=0x1;else{if(_0x511e88<_0x434965)captureBeamProgress=0x1-(_0x511e88-(_0x434965-_0x693100))/_0x693100;else{captureBeamProgress=0x0,captureBeamActive=![],capturingBossId=null,stopSound(captureSound),_0x2f54a9[_0x5c6505(0x260)]=_0x5c6505(0x29c),_0x2f54a9['attackPathSegments']=generateAttackPath(_0x2f54a9),_0x2f54a9['attackPathSegmentIndex']=0x0,_0x2f54a9[_0x5c6505(0x269)]=0x0,_0x2f54a9[_0x5c6505(0x2a6)]=BASE_ENEMY_ATTACK_SPEED*ENEMY3_ATTACK_SPEED_FACTOR,_0x2f54a9['lastFiredTime']=0x0,_0x2f54a9['canFireThisDive']=!![],_0x2f54a9[_0x5c6505(0x21e)]=0x0,_0x2f54a9[_0x5c6505(0x2a2)]=null;break;}}}captureBeamProgress=Math[_0x5c6505(0x245)](0x0,Math[_0x5c6505(0x1b3)](0x1,captureBeamProgress));if(ship&&captureBeamActive&&captureBeamProgress>=0.95&&!isShipCaptured&&!isInvincible){const _0xa8675a=BOSS_WIDTH*CAPTURE_BEAM_WIDTH_TOP_FACTOR,_0x411cf6=SHIP_WIDTH*CAPTURE_BEAM_WIDTH_BOTTOM_FACTOR,_0x35202c=_0x2f54a9['x']+_0x47c0cc/0x2,_0x55cdc3=_0x2f54a9['y']+_0x398466,_0x395e0a=gameCanvas[_0x5c6505(0x297)]-LIFE_ICON_MARGIN_BOTTOM-LIFE_ICON_SIZE-0xa,_0x118b97=Math['max'](_0xa8675a,_0x411cf6),_0x4ea027=_0x35202c-_0x118b97/0x2,_0x387610=_0x55cdc3,_0x40fefa=_0x395e0a-_0x55cdc3;if(_0x40fefa>0x0){const _0x121f4b={'x':_0x4ea027,'y':_0x387610,'width':_0x118b97,'height':_0x40fefa},_0x497baa={'x':ship['x'],'y':ship['y'],'width':ship[_0x5c6505(0x1de)],'height':ship[_0x5c6505(0x297)]};if(checkCollision(_0x497baa,_0x121f4b)){isShipCaptured=!![],_0x2f54a9[_0x5c6505(0x263)]={'width':ship[_0x5c6505(0x1de)],'height':ship[_0x5c6505(0x297)]},_0x2f54a9[_0x5c6505(0x1ff)]=!![],stopSound(captureSound),_0x2f54a9['state']=_0x5c6505(0x2a0),_0x2f54a9[_0x5c6505(0x1f5)]=null,_0x2f54a9[_0x5c6505(0x1c3)]=null,_0x2f54a9[_0x5c6505(0x1c7)]=ship['y'],_0x2f54a9[_0x5c6505(0x292)]=0x0,isShowingCaptureMessage=!![],captureMessageStartTime=_0x85d636,capturedBossIdWithMessage=_0x2f54a9['id'],playSound(shipCapturedSound);const _0x2141b4=currentPlayer;playerLives--,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![];if(playerLives<=0x0){if(_0x2141b4===0x1)player1Lives=0x0;if(_0x2141b4===0x2)player2Lives=0x0;if(isTwoPlayerMode){isShowingPlayerGameOverMessage=!![],playerGameOverMessageStartTime=_0x85d636,playerWhoIsGameOver=_0x2141b4;const _0x4819eb=_0x2141b4===0x1?0x2:0x1,_0x5eecc0=_0x4819eb===0x1?player1Lives:player2Lives;_0x5eecc0>0x0?nextActionAfterPlayerGameOver=_0x5c6505(0x28f):nextActionAfterPlayerGameOver=_0x5c6505(0x237);bullets=[],enemyBullets=[],explosions=[],fallingShips=[],isDualShipActive=![];if(_0x2141b4===0x1)player1IsDualShipActive=![];else player2IsDualShipActive=![];playSound(gameOverSound);}else triggerFinalGameOverSequence();break;}else{if(isTwoPlayerMode){if(_0x2141b4===0x1)player1Lives=playerLives;else player2Lives=playerLives;}ship&&gameCanvas&&(ship['y']=gameCanvas['height']-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,!isManualControl&&(aiNeedsStabilization=!![])),(!isManualControl||isTwoPlayerMode)&&(forceCenterShipNextReset=!![]),isShipCaptured=![],isInvincible=!![],invincibilityEndTime=_0x85d636+INVINCIBILITY_DURATION_MS;}}}else console['warn'](_0x5c6505(0x1e9),_0x40fefa);}break;}case _0x5c6505(0x2a0):{_0x2f54a9['velocityX']=0x0,_0x2f54a9[_0x5c6505(0x281)]=0x0;if(_0x2f54a9[_0x5c6505(0x1ff)]&&_0x2f54a9[_0x5c6505(0x263)]&&typeof _0x2f54a9[_0x5c6505(0x1c7)]===_0x5c6505(0x1f8)){const _0x3547ee=_0x85d636-captureMessageStartTime,_0x59c325=Math['min'](0x1,_0x3547ee/CAPTURE_MESSAGE_DURATION),_0x31ff65=_0x2f54a9['y']+CAPTURED_SHIP_OFFSET_Y,_0x53401a=_0x2f54a9[_0x5c6505(0x1c7)];_0x2f54a9[_0x5c6505(0x233)]=_0x53401a+(_0x31ff65-_0x53401a)*_0x59c325,_0x2f54a9[_0x5c6505(0x22c)]=_0x2f54a9['x']+CAPTURED_SHIP_OFFSET_X;}else _0x2f54a9['capturedShipX']=_0x2f54a9['x']+CAPTURED_SHIP_OFFSET_X,_0x2f54a9[_0x5c6505(0x233)]=_0x2f54a9['y']+CAPTURED_SHIP_OFFSET_Y;break;}case _0x5c6505(0x29c):{if(isEntrancePhaseActive)break;const _0x1bf06e=_0x2f54a9[_0x5c6505(0x26e)],_0x242e8f=3.8;if(!_0x1bf06e||_0x1bf06e[_0x5c6505(0x299)]===0x0){console[_0x5c6505(0x27a)](_0x5c6505(0x19b)+_0xe1a31b+_0x5c6505(0x1eb)),_0x2f54a9[_0x5c6505(0x260)]=_0x5c6505(0x1e2);try{const {x:_0x36b5c6,y:_0x4b2995}=getCurrentGridSlotPosition(_0x2f54a9['gridRow'],_0x2f54a9[_0x5c6505(0x294)],_0x47c0cc);_0x2f54a9[_0x5c6505(0x1f5)]=_0x36b5c6,_0x2f54a9[_0x5c6505(0x1c3)]=_0x4b2995;}catch(_0x1ffd8d){console['error'](_0x5c6505(0x1a7)+_0xe1a31b+'\x20(no\x20attack\x20path):',_0x1ffd8d),_0x2f54a9[_0x5c6505(0x1f5)]=gameCanvas['width']/0x2,_0x2f54a9[_0x5c6505(0x1c3)]=ENEMY_TOP_MARGIN;}break;}if(_0x2f54a9[_0x5c6505(0x1dd)]>=_0x1bf06e[_0x5c6505(0x299)]){console[_0x5c6505(0x290)](_0x5c6505(0x19b)+_0xe1a31b+'\x20attacking,\x20index\x20'+_0x2f54a9[_0x5c6505(0x1dd)]+_0x5c6505(0x2b3)+_0x1bf06e[_0x5c6505(0x299)]+_0x5c6505(0x1f1)),_0x2f54a9[_0x5c6505(0x260)]=_0x5c6505(0x1e2);try{const {x:_0x188742,y:_0x788edd}=getCurrentGridSlotPosition(_0x2f54a9[_0x5c6505(0x1f6)],_0x2f54a9[_0x5c6505(0x294)],_0x47c0cc);_0x2f54a9[_0x5c6505(0x1f5)]=_0x188742,_0x2f54a9[_0x5c6505(0x1c3)]=_0x788edd;}catch(_0x556883){console[_0x5c6505(0x27a)](_0x5c6505(0x1a7)+_0xe1a31b+_0x5c6505(0x2a9),_0x556883),_0x2f54a9[_0x5c6505(0x1f5)]=gameCanvas['width']/0x2,_0x2f54a9['targetGridY']=ENEMY_TOP_MARGIN;}break;}const _0xc9adfd=_0x1bf06e[_0x2f54a9[_0x5c6505(0x1dd)]];if(!_0xc9adfd||!_0xc9adfd['p0']||!_0xc9adfd['p1']||!_0xc9adfd['p2']||!_0xc9adfd['p3']){console[_0x5c6505(0x27a)](_0x5c6505(0x19b)+_0xe1a31b+_0x5c6505(0x246)+_0x2f54a9[_0x5c6505(0x1dd)]+_0x5c6505(0x25f)),_0x2f54a9[_0x5c6505(0x260)]=_0x5c6505(0x1e2);try{const {x:_0x84ff7e,y:_0x9886e1}=getCurrentGridSlotPosition(_0x2f54a9['gridRow'],_0x2f54a9[_0x5c6505(0x294)],_0x47c0cc);_0x2f54a9[_0x5c6505(0x1f5)]=_0x84ff7e,_0x2f54a9['targetGridY']=_0x9886e1;}catch(_0x30da10){console[_0x5c6505(0x27a)](_0x5c6505(0x1a7)+_0xe1a31b+_0x5c6505(0x216),_0x30da10),_0x2f54a9[_0x5c6505(0x1f5)]=gameCanvas['width']/0x2,_0x2f54a9[_0x5c6505(0x1c3)]=ENEMY_TOP_MARGIN;}break;}const _0x6d6e1b=_0x2f54a9[_0x5c6505(0x2a6)]/0x3e8*_0x242e8f;_0x2f54a9['attackPathT']+=_0x6d6e1b;let _0x5bc989,_0x39fde0;const _0x1d0d82=_0x2f54a9['x'],_0x2a200a=_0x2f54a9['y'];if(_0x2f54a9['attackPathT']>=0x1){try{_0x5bc989=calculateBezierPoint(0x1,_0xc9adfd['p0']['x'],_0xc9adfd['p1']['x'],_0xc9adfd['p2']['x'],_0xc9adfd['p3']['x']),_0x39fde0=calculateBezierPoint(0x1,_0xc9adfd['p0']['y'],_0xc9adfd['p1']['y'],_0xc9adfd['p2']['y'],_0xc9adfd['p3']['y']);}catch(_0x55168a){console[_0x5c6505(0x27a)](_0x5c6505(0x219)+_0x2f54a9['id']+':',_0x55168a),_0x5bc989=_0x2f54a9['x'],_0x39fde0=_0x2f54a9['y'],_0x2f54a9['state']=_0x5c6505(0x1e2);try{const {x:_0x312db0,y:_0x2e5b61}=getCurrentGridSlotPosition(_0x2f54a9[_0x5c6505(0x1f6)],_0x2f54a9['gridCol'],_0x47c0cc);_0x2f54a9[_0x5c6505(0x1f5)]=_0x312db0,_0x2f54a9[_0x5c6505(0x1c3)]=_0x2e5b61;}catch(_0x3abc45){console['error'](_0x5c6505(0x2b6)+_0x2f54a9['id']+':',_0x3abc45),_0x2f54a9['targetGridX']=gameCanvas[_0x5c6505(0x1de)]/0x2,_0x2f54a9[_0x5c6505(0x1c3)]=ENEMY_TOP_MARGIN;}break;}_0x2f54a9[_0x5c6505(0x269)]=0x0,_0x2f54a9[_0x5c6505(0x1dd)]++;if(_0x2f54a9['attackPathSegmentIndex']>=_0x1bf06e[_0x5c6505(0x299)]){_0x2f54a9[_0x5c6505(0x260)]='returning',_0x2f54a9[_0x5c6505(0x1a1)]=0x0,_0x2f54a9[_0x5c6505(0x21e)]=0x0,_0x2f54a9['attackGroupId']=null;try{const {x:_0x47cf09,y:_0x402fef}=getCurrentGridSlotPosition(_0x2f54a9[_0x5c6505(0x1f6)],_0x2f54a9[_0x5c6505(0x294)],_0x47c0cc);_0x2f54a9['targetGridX']=_0x47cf09,_0x2f54a9[_0x5c6505(0x1c3)]=_0x402fef;}catch(_0x5d2676){console['error']('Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20'+_0xe1a31b+_0x5c6505(0x1b0),_0x5d2676),_0x2f54a9[_0x5c6505(0x1f5)]=gameCanvas[_0x5c6505(0x1de)]/0x2,_0x2f54a9['targetGridY']=ENEMY_TOP_MARGIN;}}else{const _0x9327ba=_0x1bf06e[_0x2f54a9['attackPathSegmentIndex']];if(!_0x9327ba?.['p0']){console[_0x5c6505(0x27a)]('Enemy\x20'+_0xe1a31b+_0x5c6505(0x266)+_0x2f54a9[_0x5c6505(0x1dd)]+_0x5c6505(0x25f)),_0x5bc989=_0x2f54a9['x'],_0x39fde0=_0x2f54a9['y'],_0x2f54a9[_0x5c6505(0x260)]=_0x5c6505(0x1e2);try{const {x:_0x2894b6,y:_0x1cc116}=getCurrentGridSlotPosition(_0x2f54a9[_0x5c6505(0x1f6)],_0x2f54a9['gridCol'],_0x47c0cc);_0x2f54a9[_0x5c6505(0x1f5)]=_0x2894b6,_0x2f54a9[_0x5c6505(0x1c3)]=_0x1cc116;}catch(_0x22e0be){console[_0x5c6505(0x27a)]('Error\x20getting\x20grid\x20pos\x20after\x20invalid\x20NEXT\x20attack\x20segment\x20for\x20'+_0x2f54a9['id']+':',_0x22e0be),_0x2f54a9['targetGridX']=gameCanvas[_0x5c6505(0x1de)]/0x2,_0x2f54a9[_0x5c6505(0x1c3)]=ENEMY_TOP_MARGIN;}break;}}}else try{_0x5bc989=calculateBezierPoint(_0x2f54a9['attackPathT'],_0xc9adfd['p0']['x'],_0xc9adfd['p1']['x'],_0xc9adfd['p2']['x'],_0xc9adfd['p3']['x']),_0x39fde0=calculateBezierPoint(_0x2f54a9[_0x5c6505(0x269)],_0xc9adfd['p0']['y'],_0xc9adfd['p1']['y'],_0xc9adfd['p2']['y'],_0xc9adfd['p3']['y']);}catch(_0x3753ce){console['error'](_0x5c6505(0x1fe)+_0x2f54a9['id']+':',_0x3753ce),_0x5bc989=_0x2f54a9['x'],_0x39fde0=_0x2f54a9['y'],_0x2f54a9[_0x5c6505(0x260)]=_0x5c6505(0x1e2);try{const {x:_0x167fee,y:_0x5bc726}=getCurrentGridSlotPosition(_0x2f54a9[_0x5c6505(0x1f6)],_0x2f54a9[_0x5c6505(0x294)],_0x47c0cc);_0x2f54a9[_0x5c6505(0x1f5)]=_0x167fee,_0x2f54a9[_0x5c6505(0x1c3)]=_0x5bc726;}catch(_0x465fcf){console[_0x5c6505(0x27a)](_0x5c6505(0x20f)+_0x2f54a9['id']+':',_0x465fcf),_0x2f54a9[_0x5c6505(0x1f5)]=gameCanvas[_0x5c6505(0x1de)]/0x2,_0x2f54a9[_0x5c6505(0x1c3)]=ENEMY_TOP_MARGIN;}break;}if(_0x2f54a9&&_0x2f54a9['state']===_0x5c6505(0x29c)){const _0x16c2ee=_0x2f54a9['attackFormationOffsetX']||0x0,_0x478622=_0x5bc989+_0x16c2ee,_0x4d6203=_0x39fde0;_0x2f54a9[_0x5c6505(0x1e6)]=_0x478622-_0x1d0d82,_0x2f54a9[_0x5c6505(0x281)]=_0x4d6203-_0x2a200a,_0x2f54a9['x']=_0x478622,_0x2f54a9['y']=_0x4d6203;if(_0x2f54a9['y']>gameCanvas[_0x5c6505(0x297)]+_0x398466*1.5){_0x2f54a9[_0x5c6505(0x260)]='returning',_0x2f54a9[_0x5c6505(0x1dd)]=0x0,_0x2f54a9[_0x5c6505(0x269)]=0x0,_0x2f54a9[_0x5c6505(0x1a1)]=0x0,_0x2f54a9[_0x5c6505(0x21e)]=0x0,_0x2f54a9[_0x5c6505(0x2a2)]=null,_0x2f54a9['y']=-_0x398466*(1.1+Math[_0x5c6505(0x1e1)]()*0.4),_0x2f54a9['x']=Math[_0x5c6505(0x1e1)]()*(gameCanvas[_0x5c6505(0x1de)]-_0x47c0cc),_0x2f54a9[_0x5c6505(0x1e6)]=0x0,_0x2f54a9['velocityY']=0x0;try{const {x:_0x197174,y:_0x5eca81}=getCurrentGridSlotPosition(_0x2f54a9[_0x5c6505(0x1f6)],_0x2f54a9['gridCol'],_0x47c0cc);_0x2f54a9[_0x5c6505(0x1f5)]=_0x197174,_0x2f54a9[_0x5c6505(0x1c3)]=_0x5eca81;}catch(_0xab518f){console[_0x5c6505(0x27a)](_0x5c6505(0x1a7)+_0xe1a31b+_0x5c6505(0x1f4),_0xab518f),_0x2f54a9['targetGridX']=gameCanvas['width']/0x2,_0x2f54a9[_0x5c6505(0x1c3)]=ENEMY_TOP_MARGIN;}}}break;}case _0x5c6505(0x1e2):{if(isEntrancePhaseActive)break;if(_0x2f54a9['targetGridX']==null||_0x2f54a9[_0x5c6505(0x1c3)]==null){console[_0x5c6505(0x290)](_0x5c6505(0x19b)+_0xe1a31b+_0x5c6505(0x2ac));try{const {x:_0x3bf15e,y:_0x592da1}=getCurrentGridSlotPosition(_0x2f54a9['gridRow'],_0x2f54a9['gridCol'],_0x47c0cc);_0x2f54a9['targetGridX']=_0x3bf15e,_0x2f54a9[_0x5c6505(0x1c3)]=_0x592da1;}catch(_0x21f3ba){console['error'](_0x5c6505(0x1b9)+_0xe1a31b+_0x5c6505(0x1c0),_0x21f3ba),_0x2f54a9[_0x5c6505(0x260)]=_0x5c6505(0x251),_0x2f54a9['x']=gameCanvas[_0x5c6505(0x1de)]/0x2,_0x2f54a9['y']=ENEMY_TOP_MARGIN;break;}}const _0x3533ae=_0x2f54a9[_0x5c6505(0x1f5)],_0x42ba25=_0x2f54a9[_0x5c6505(0x1c3)],_0x420f9c=_0x3533ae-_0x2f54a9['x'],_0x3d61fa=_0x42ba25-_0x2f54a9['y'],_0x57ddfd=Math[_0x5c6505(0x204)](_0x420f9c*_0x420f9c+_0x3d61fa*_0x3d61fa),_0x32dcba=scaleValue(level,BASE_RETURN_SPEED_FACTOR,MAX_RETURN_SPEED_FACTOR),_0xf33e49=BASE_RETURN_SPEED*_0x32dcba,_0x1d7163=_0xf33e49*0.5;_0x57ddfd>_0x1d7163?(_0x2f54a9[_0x5c6505(0x1e6)]=_0x420f9c/_0x57ddfd*_0xf33e49,_0x2f54a9[_0x5c6505(0x281)]=_0x3d61fa/_0x57ddfd*_0xf33e49,_0x2f54a9['x']+=_0x2f54a9[_0x5c6505(0x1e6)],_0x2f54a9['y']+=_0x2f54a9[_0x5c6505(0x281)]):(_0x2f54a9['x']=_0x3533ae,_0x2f54a9['y']=_0x42ba25,_0x2f54a9[_0x5c6505(0x1e6)]=0x0,_0x2f54a9[_0x5c6505(0x281)]=0x0,_0x2f54a9[_0x5c6505(0x260)]=_0x5c6505(0x251),_0x2f54a9[_0x5c6505(0x1f9)]=!![],_0x2f54a9[_0x5c6505(0x21e)]=0x0,_0x2f54a9['attackGroupId']=null,_0x2f54a9[_0x5c6505(0x1d1)](_0x5c6505(0x1ac))&&delete _0x2f54a9[_0x5c6505(0x1ac)],!isGridSoundPlaying&&!isChallengingStage&&(isGridSoundPlaying=!![],playSound(gridBackgroundSound)));break;}}if(_0x2f54a9&&!isShowingPlayerGameOverMessage&&!(isShipCaptured&&_0x2f54a9['state']===_0x5c6505(0x252))){const _0x1fb60c={'x':0x0,'y':0x0,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT},_0x81ba5={'x':_0x2f54a9['x'],'y':_0x2f54a9['y'],'width':_0x47c0cc,'height':_0x398466};for(let _0x52d687=bullets[_0x5c6505(0x299)]-0x1;_0x52d687>=0x0;_0x52d687--){const _0x2ac3dc=bullets[_0x52d687];if(!_0x2ac3dc)continue;_0x1fb60c['x']=_0x2ac3dc['x'],_0x1fb60c['y']=_0x2ac3dc['y'];if(checkCollision(_0x1fb60c,_0x81ba5)){const _0x482fd6=handleEnemyHit(_0x2f54a9);bullets[_0x5c6505(0x1c1)](_0x52d687,0x1);if(_0x482fd6['destroyed']){enemies[_0x5c6505(0x1c1)](_0x1f06fe,0x1),_0x2f54a9=null;break;}}}}if(_0x2f54a9&&ship&&!isShipCaptured&&!isWaitingForRespawn&&!isShowingPlayerGameOverMessage&&!isInvincible){const _0x4dcb96=[_0x5c6505(0x29c),'following_entrance_path','following_bezier_path','diving_to_capture_position'];if(_0x4dcb96[_0x5c6505(0x2ae)](_0x2f54a9[_0x5c6505(0x260)])){const _0x4a6eba={'x':_0x2f54a9['x'],'y':_0x2f54a9['y'],'width':_0x47c0cc,'height':_0x398466},_0x16f89e={'x':ship['x'],'y':ship['y'],'width':ship[_0x5c6505(0x1de)],'height':ship[_0x5c6505(0x297)]},_0x9a1d16=isDualShipActive?{'x':ship['x']+DUAL_SHIP_OFFSET_X,'y':ship['y'],'width':ship[_0x5c6505(0x1de)],'height':ship[_0x5c6505(0x297)]}:null;let _0x2841bb=![],_0x38643b=![];if(checkCollision(_0x4a6eba,_0x16f89e))_0x2841bb=!![],_0x38643b=![];else _0x9a1d16&&checkCollision(_0x4a6eba,_0x9a1d16)&&(_0x2841bb=!![],_0x38643b=!![]);if(_0x2841bb){createExplosion(_0x2f54a9['x']+_0x47c0cc/0x2,_0x2f54a9['y']+_0x398466/0x2),playSound(lostLifeSound),enemies['splice'](_0x1f06fe,0x1),_0x2f54a9=null;if(isDualShipActive){isDualShipActive=![];if(currentPlayer===0x1)player1IsDualShipActive=![];else player2IsDualShipActive=![];_0x38643b?createExplosion(_0x9a1d16['x']+ship[_0x5c6505(0x1de)]/0x2,_0x9a1d16['y']+ship[_0x5c6505(0x297)]/0x2):createExplosion(_0x16f89e['x']+ship[_0x5c6505(0x1de)]/0x2,_0x16f89e['y']+ship[_0x5c6505(0x297)]/0x2),isInvincible=!![],invincibilityEndTime=_0x85d636+INVINCIBILITY_DURATION_MS;}else{playerLives--,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],fallingShips=[],isInvincible=!![],invincibilityEndTime=_0x85d636+INVINCIBILITY_DURATION_MS;ship&&gameCanvas?(ship['y']=gameCanvas[_0x5c6505(0x297)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,!isManualControl&&(aiNeedsStabilization=!![])):console[_0x5c6505(0x27a)]('Cannot\x20reposition\x20ship\x20Y\x20-\x20ship\x20or\x20canvas\x20not\x20ready.');if(playerLives<=0x0){const _0x11ba82=currentPlayer;if(_0x11ba82===0x1)player1Lives=0x0;if(_0x11ba82===0x2)player2Lives=0x0;if(isTwoPlayerMode){isShowingPlayerGameOverMessage=!![],playerGameOverMessageStartTime=_0x85d636,playerWhoIsGameOver=_0x11ba82;const _0x109256=_0x11ba82===0x1?0x2:0x1,_0x41acc4=_0x109256===0x1?player1Lives:player2Lives;_0x41acc4>0x0?nextActionAfterPlayerGameOver=_0x5c6505(0x28f):nextActionAfterPlayerGameOver=_0x5c6505(0x237),bullets=[],enemyBullets=[],explosions=[],playSound(gameOverSound);}else triggerFinalGameOverSequence();break;}else{if(isTwoPlayerMode){if(currentPlayer===0x1)player1Lives=playerLives;else player2Lives=playerLives;}break;}}}}}}if(ship&&!isShowingPlayerGameOverMessage&&!isShipCaptured&&!isWaitingForRespawn&&!isInvincible){const _0x1a6334={'x':ship['x'],'y':ship['y'],'width':ship[_0x5c6505(0x1de)],'height':ship[_0x5c6505(0x297)]},_0xafa9f6=isDualShipActive?{'x':ship['x']+DUAL_SHIP_OFFSET_X,'y':ship['y'],'width':ship[_0x5c6505(0x1de)],'height':ship[_0x5c6505(0x297)]}:null;for(let _0x48b843=enemyBullets[_0x5c6505(0x299)]-0x1;_0x48b843>=0x0;_0x48b843--){const _0x2801ac=enemyBullets[_0x48b843];if(!_0x2801ac){enemyBullets['splice'](_0x48b843,0x1);continue;}const _0x430362={'x':_0x2801ac['x'],'y':_0x2801ac['y'],'width':_0x2801ac['width'],'height':_0x2801ac['height']};let _0x1e7f10=checkCollision(_0x1a6334,_0x430362),_0x1f325e=0x0;!_0x1e7f10&&_0xafa9f6&&checkCollision(_0xafa9f6,_0x430362)&&(_0x1e7f10=!![],_0x1f325e=0x1);if(_0x1e7f10){enemyBullets[_0x5c6505(0x1c1)](_0x48b843,0x1);if(isDualShipActive){isDualShipActive=![];if(currentPlayer===0x1)player1IsDualShipActive=![];else player2IsDualShipActive=![];_0x1f325e===0x1?createExplosion(_0xafa9f6['x']+ship[_0x5c6505(0x1de)]/0x2,_0xafa9f6['y']+ship[_0x5c6505(0x297)]/0x2):createExplosion(_0x1a6334['x']+ship['width']/0x2,_0x1a6334['y']+ship[_0x5c6505(0x297)]/0x2),playSound(lostLifeSound),isInvincible=!![],invincibilityEndTime=_0x85d636+INVINCIBILITY_DURATION_MS;}else{playerLives--,playSound(lostLifeSound),createExplosion(ship['x']+ship[_0x5c6505(0x1de)]/0x2,ship['y']+ship[_0x5c6505(0x297)]/0x2),csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],fallingShips=[],isInvincible=!![],invincibilityEndTime=_0x85d636+INVINCIBILITY_DURATION_MS;ship&&gameCanvas?(ship['y']=gameCanvas[_0x5c6505(0x297)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,!isManualControl&&(aiNeedsStabilization=!![])):console[_0x5c6505(0x27a)](_0x5c6505(0x24c));if(playerLives<=0x0){const _0x525b12=currentPlayer;if(_0x525b12===0x1)player1Lives=0x0;if(_0x525b12===0x2)player2Lives=0x0;if(isTwoPlayerMode){isShowingPlayerGameOverMessage=!![],playerGameOverMessageStartTime=_0x85d636,playerWhoIsGameOver=_0x525b12;const _0x389d79=_0x525b12===0x1?0x2:0x1,_0x552c12=_0x389d79===0x1?player1Lives:player2Lives;_0x552c12>0x0?nextActionAfterPlayerGameOver='switch_player':nextActionAfterPlayerGameOver=_0x5c6505(0x237),bullets=[],enemyBullets=[],explosions=[],playSound(gameOverSound);}else triggerFinalGameOverSequence();break;}else{if(isTwoPlayerMode){if(currentPlayer===0x1)player1Lives=playerLives;else player2Lives=playerLives;}break;}}}}}if(ship&&!isShipCaptured&&!isWaitingForRespawn&&!isDualShipActive&&fallingShips['length']>0x0&&!isInvincible){const _0x57bd47={'x':ship['x'],'y':ship['y'],'width':ship[_0x5c6505(0x1de)],'height':ship[_0x5c6505(0x297)]};for(let _0xab8145=fallingShips[_0x5c6505(0x299)]-0x1;_0xab8145>=0x0;_0xab8145--){const _0x35f5c4=fallingShips[_0xab8145];if(!_0x35f5c4)continue;const _0x1d9ecb={'x':_0x35f5c4['x'],'y':_0x35f5c4['y'],'width':_0x35f5c4[_0x5c6505(0x1de)],'height':_0x35f5c4[_0x5c6505(0x297)]};if(checkCollision(_0x57bd47,_0x1d9ecb)){fallingShips['splice'](_0xab8145,0x1),isDualShipActive=!![];if(currentPlayer===0x1)player1IsDualShipActive=!![];else player2IsDualShipActive=!![];playSound(dualShipSound);break;}}}updateHitSparks();}catch(_0x1c89e8){console[_0x5c6505(0x27a)]('FATAL\x20Error\x20in\x20moveEntities:',_0x1c89e8,_0x1c89e8[_0x5c6505(0x22a)]),isGridSoundPlaying=![],stopSound(gridBackgroundSound),isEntrancePhaseActive=![],stopSound(entranceSound),isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',isShipCaptured=![],captureBeamActive=![],capturingBossId=null,stopSound(captureSound),stopSound(shipCapturedSound),isWaitingForRespawn=![],fallingShips=[],isDualShipActive=![],player1IsDualShipActive=![],player2IsDualShipActive=![],isInvincible=![],invincibilityEndTime=0x0,hitSparks=[];if(typeof showMenuState===_0x5c6505(0x1bf))showMenuState();if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,alert(_0x5c6505(0x1ce));}}function switchPlayerTurn(){if(!isTwoPlayerMode)return![];stopSound(hiScoreSound),highScore=Math['max'](highScore,score);currentPlayer===0x1?(player1Score=score,player1IsDualShipActive=isDualShipActive):(player2Score=score,player2IsDualShipActive=isDualShipActive);const _0x2eff62=currentPlayer===0x1?0x2:0x1,_0x1ab326=_0x2eff62===0x1?player1Lives:player2Lives;if(_0x1ab326<=0x0){const _0x424da7=currentPlayer===0x1?player1Lives:player2Lives;return _0x424da7<=0x0?(triggerFinalGameOverSequence(),![]):(forceCenterShipNextReset=![],![]);}return currentPlayer=_0x2eff62,score=currentPlayer===0x1?player1Score:player2Score,playerLives=currentPlayer===0x1?player1Lives:player2Lives,isDualShipActive=currentPlayer===0x1?player1IsDualShipActive:player2IsDualShipActive,forceCenterShipNextReset=!![],scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],isShipCaptured=![],captureBeamActive=![],capturingBossId=null,isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,fallingShips=[],hitSparks=[],showExtraLifeMessage=![],extraLifeMessageStartTime=0x0,!![];}function firePlayerBullet(_0x360cf4=![]){const _0x57cdb8=_0x21a6;let _0x527de9=_0x360cf4?0x1:currentPlayer,_0x5a69ce=selectedFiringMode==='single',_0x1d57bd=!_0x360cf4&&isTwoPlayerMode&&currentPlayer===0x2;if(isPaused||!isInGameState||playerLives<=0x0||gameOverSequenceStartTime>0x0||!ship||isShipCaptured||isWaitingForRespawn||isShowingIntro||showReadyMessage||isCsCompletionDelayActive||showCsHitsMessage||showPerfectMessage||showCsBonusScoreMessage||showCSClearMessage||isShowingPlayerGameOverMessage)return![];try{const _0x328611=ship['y'];let _0x4c3b38=0x0;if(isDualShipActive){const _0x18ecf3=ship['x']+ship[_0x57cdb8(0x1de)]/0x2,_0x1828dc=ship['x']+DUAL_SHIP_OFFSET_X+ship[_0x57cdb8(0x1de)]/0x2,_0x2d9636=_0x18ecf3-PLAYER_BULLET_WIDTH/0x2,_0x2040d=_0x1828dc-PLAYER_BULLET_WIDTH/0x2;bullets['push']({'x':_0x2d9636,'y':_0x328611,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED}),bullets[_0x57cdb8(0x279)]({'x':_0x2040d,'y':_0x328611,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED}),_0x4c3b38=0x2;}else{const _0x54b3c1=ship['x']+ship[_0x57cdb8(0x1de)]/0x2-PLAYER_BULLET_WIDTH/0x2;bullets['push']({'x':_0x54b3c1,'y':_0x328611,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT,'speed':PLAYER_BULLET_SPEED}),_0x4c3b38=0x1;}_0x5a69ce&&!_0x360cf4&&(_0x1d57bd?p2JustFiredSingle=!![]:p1JustFiredSingle=!![]);playSound(playerShootSound);if(_0x527de9===0x1||_0x360cf4)player1ShotsFired+=_0x4c3b38;else _0x527de9===0x2&&(player2ShotsFired+=_0x4c3b38);return!![];}catch(_0x191d07){return console[_0x57cdb8(0x27a)]('Error\x20creating\x20player\x20bullet(s):',_0x191d07),![];}}function handlePlayerInput(){const _0x33d8a7=_0x21a6;try{if(isPaused||!isManualControl||playerLives<=0x0||!ship||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage||isWaitingForRespawn){leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1FireInputWasDown=![],p2FireInputWasDown=![],keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![];return;}leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![];let _0x5caf5c=keyboardP1LeftDown,_0x2115fc=keyboardP1RightDown,_0xbb3b5b=keyboardP1ShootDown,_0x1315f4=keyboardP2LeftDown,_0x195879=keyboardP2RightDown,_0x325d5b=keyboardP2ShootDown,_0x450e14=![],_0x8dd279=![],_0x298ffb=![],_0x1a7802=![],_0x3fb02b=![],_0x149a48=![];const _0x12a547=selectedFiringMode===_0x33d8a7(0x1fb);if(connectedGamepadIndex!==null){const _0x5acfe7=navigator[_0x33d8a7(0x1c6)]();if(_0x5acfe7?.[connectedGamepadIndex]){const _0x1317b1=_0x5acfe7[connectedGamepadIndex],_0x3bd1cd=processSingleController(_0x1317b1,previousGameButtonStates);_0x450e14=_0x3bd1cd[_0x33d8a7(0x265)],_0x8dd279=_0x3bd1cd[_0x33d8a7(0x26b)],_0x298ffb=_0x3bd1cd['shoot'];const _0x195469=previousGameButtonStates[PS5_BUTTON_CROSS]??![],_0x46f693=!_0x298ffb&&_0x195469;if(_0x46f693&&_0x12a547)p1JustFiredSingle=![];previousButtonStates=_0x3bd1cd[_0x33d8a7(0x1a0)];if(_0x3bd1cd[_0x33d8a7(0x253)]){togglePause();return;}if(_0x3bd1cd['back']){stopGameAndShowMenu();return;}}else{if(previousButtonStates['length']>0x0)previousButtonStates=[];if(_0x12a547)p1JustFiredSingle=![];p1FireInputWasDown=![];}}else{if(previousButtonStates['length']>0x0)previousButtonStates=[];}if(isTwoPlayerMode&&connectedGamepadIndexP2!==null){const _0x3be117=navigator[_0x33d8a7(0x1c6)]();if(_0x3be117?.[connectedGamepadIndexP2]){const _0x5e5cb3=_0x3be117[connectedGamepadIndexP2],_0x264ee2=processSingleController(_0x5e5cb3,previousGameButtonStatesP2);_0x1a7802=_0x264ee2[_0x33d8a7(0x265)],_0x3fb02b=_0x264ee2[_0x33d8a7(0x26b)],_0x149a48=_0x264ee2['shoot'];const _0x4d3b25=previousGameButtonStatesP2[PS5_BUTTON_CROSS]??![],_0x342cc5=!_0x149a48&&_0x4d3b25;if(_0x342cc5&&_0x12a547)p2JustFiredSingle=![];previousGameButtonStatesP2=_0x264ee2[_0x33d8a7(0x1a0)];}else{if(previousGameButtonStatesP2[_0x33d8a7(0x299)]>0x0)previousGameButtonStatesP2=[];if(_0x12a547)p2JustFiredSingle=![];p2FireInputWasDown=![];}}else{if(previousGameButtonStatesP2['length']>0x0)previousGameButtonStatesP2=[];}let _0x3bc197=![],_0xa89ab9=![];const _0x20efd3=Date[_0x33d8a7(0x1bb)]();let _0x3f38ad=_0xbb3b5b||_0x298ffb,_0x415ced=![];const _0x3465dc=isTwoPlayerMode&&connectedGamepadIndexP2===null&&connectedGamepadIndex!==null;isTwoPlayerMode&&(_0x415ced=_0x325d5b||_0x149a48||_0x3465dc&&_0x298ffb);const _0x2d2322=_0x3f38ad&&!p1FireInputWasDown,_0xe0dcaf=!_0x3f38ad&&p1FireInputWasDown,_0xca97d2=_0x415ced&&!p2FireInputWasDown,_0x457df8=!_0x415ced&&p2FireInputWasDown;if(currentPlayer===0x1||!isTwoPlayerMode)leftPressed=_0x5caf5c||_0x450e14,rightPressed=_0x2115fc||_0x8dd279,_0x12a547?(_0x2d2322&&!p1JustFiredSingle&&(_0x3bc197=!![]),_0xe0dcaf&&(p1JustFiredSingle=![])):_0x3f38ad&&_0x20efd3-playerLastShotTime>=SHOOT_COOLDOWN&&(_0x3bc197=!![]),shootPressed=_0x3bc197;else{if(isTwoPlayerMode&&currentPlayer===0x2){p2LeftPressed=_0x1315f4||_0x1a7802||_0x3465dc&&_0x450e14,p2RightPressed=_0x195879||_0x3fb02b||_0x3465dc&&_0x8dd279;const _0x3d3007=_0x3465dc&&(!_0x298ffb&&(previousGameButtonStates[PS5_BUTTON_CROSS]??![]));_0x12a547?(_0xca97d2&&!p2JustFiredSingle&&(_0xa89ab9=!![]),(_0x457df8||_0x3d3007)&&(p2JustFiredSingle=![])):_0x415ced&&_0x20efd3-playerLastShotTime>=SHOOT_COOLDOWN&&(_0xa89ab9=!![]),p2ShootPressed=_0xa89ab9;}}(_0x3bc197||_0xa89ab9)&&(firePlayerBullet(![])&&(!_0x12a547&&(playerLastShotTime=_0x20efd3))),p1FireInputWasDown=_0x3f38ad,p2FireInputWasDown=_0x415ced;}catch(_0x17b567){console[_0x33d8a7(0x27a)]('Error\x20handling\x20player\x20input:',_0x17b567),leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![];}}function aiControl(){const _0x26538a=_0x21a6;try{if(isPaused||isManualControl||playerLives<=0x0||!ship||!gameCanvas||!isInGameState||gameOverSequenceStartTime>0x0||isShowingPlayerGameOverMessage||isShipCaptured||isWaitingForRespawn){if(ship)ship[_0x26538a(0x244)]=ship['x'];aiNeedsStabilization=!![],smoothedShipX=undefined;return;}smoothedShipX===undefined&&(smoothedShipX=ship['x']);const _0x37c2a5=Date[_0x26538a(0x1bb)](),_0x2e900f=gameCanvas[_0x26538a(0x1de)],_0x1973e=gameCanvas['height'];let _0x40c7a1=ship[_0x26538a(0x1de)];isDualShipActive&&(_0x40c7a1=DUAL_SHIP_OFFSET_X+ship[_0x26538a(0x1de)]);const _0x4474bd=ship['x']+_0x40c7a1/0x2,_0x1c6daf=ship['y'],_0x4a5c3b=_0x2e900f/0x2;let _0x271b2e;isDualShipActive?_0x271b2e=_0x4a5c3b-_0x40c7a1/0x2:_0x271b2e=_0x4a5c3b-ship['width']/0x2;const _0x1f12ef=showReadyMessage||showCSClearMessage||showCsHitsMessage||showPerfectMessage||showCsBonusScoreMessage||showExtraLifeMessage||isCsCompletionDelayActive;let _0x4d19e5=smoothedShipX,_0x5cb458=![],_0x52b3ea=![],_0x22d2d7=smoothedShipX,_0x297df1=null,_0x471e00=![];aiNeedsStabilization&&!_0x1f12ef&&(aiStabilizationEndTime=_0x37c2a5+AI_STABILIZATION_DURATION,aiNeedsStabilization=![],smoothedShipX=ship['x']);if(_0x37c2a5<aiStabilizationEndTime&&!_0x1f12ef)_0x4d19e5=_0x271b2e;else{_0x52b3ea=![],_0x22d2d7=smoothedShipX;if(!isInvincible){let _0x3cc162=[];const _0x23f05b=isChallengingStage?FINAL_DODGE_LOOKAHEAD*0.8:isEntrancePhaseActive?ENTRANCE_BULLET_DODGE_LOOKAHEAD:FINAL_DODGE_LOOKAHEAD,_0x436262=isChallengingStage?FINAL_DODGE_BUFFER_BASE*0.8:isEntrancePhaseActive?ENTRANCE_BULLET_DODGE_BUFFER:FINAL_DODGE_BUFFER_BASE,_0x2aeffc={'x':ship['x']-_0x436262/0x2,'y':ship['y']-_0x23f05b,'width':_0x40c7a1+_0x436262,'height':_0x23f05b+ship[_0x26538a(0x297)]};for(const _0x73b50c of enemyBullets){if(_0x73b50c&&_0x73b50c['y']+_0x73b50c['height']>0x0&&_0x73b50c['y']<_0x1973e){const _0x1eb243={'x':_0x73b50c['x'],'y':_0x73b50c['y'],'width':_0x73b50c[_0x26538a(0x1de)],'height':_0x73b50c[_0x26538a(0x297)]};checkCollision(_0x2aeffc,_0x1eb243)&&_0x3cc162[_0x26538a(0x279)](_0x73b50c);}}if(_0x3cc162[_0x26538a(0x299)]>0x0){_0x52b3ea=!![];let _0x21399d=_0x2e900f,_0x253077=0x0,_0x2aef3d=Infinity;_0x3cc162[_0x26538a(0x27e)](_0x47c55e=>{const _0xe3982=_0x26538a;_0x21399d=Math[_0xe3982(0x1b3)](_0x21399d,_0x47c55e['x']),_0x253077=Math[_0xe3982(0x245)](_0x253077,_0x47c55e['x']+_0x47c55e[_0xe3982(0x1de)]),_0x2aef3d=Math[_0xe3982(0x1b3)](_0x2aef3d,_0x1c6daf-(_0x47c55e['y']+_0x47c55e[_0xe3982(0x297)]));});const _0x17c482=(_0x21399d+_0x253077)/0x2,_0x1fe171=_0x4474bd<_0x17c482?-0x1:0x1,_0x124d0d=0x1-Math['min'](0x1,Math[_0x26538a(0x245)](0x0,_0x2aef3d)/_0x23f05b),_0x537efd=isChallengingStage?1.6:isEntrancePhaseActive?2.2:1.8,_0x583b80=isChallengingStage?1.3:isEntrancePhaseActive?1.8:1.5,_0x373262=Math[_0x26538a(0x245)](0x0,_0x3cc162['length']-0x1)*_0x40c7a1*0.3,_0xd70e2c=_0x40c7a1*(_0x537efd+_0x124d0d*_0x583b80)+_0x373262;_0x22d2d7=smoothedShipX+_0x1fe171*_0xd70e2c;}if(!_0x52b3ea&&!isChallengingStage&&!isFullGridWave){let _0x3cd347=![],_0x3a8c5c=Infinity;for(const _0x22e858 of enemies){if(_0x22e858&&_0x22e858[_0x26538a(0x1c2)]===ENEMY3_TYPE&&_0x22e858[_0x26538a(0x260)]===_0x26538a(0x225)&&_0x22e858['targetX']!=null){const _0x5be9cf=AI_COLLISION_LOOKAHEAD*1.5,_0x16ae1a=FINAL_DODGE_BUFFER_BASE*1.8,_0x2493ea=0.2,_0xb807c3=_0x22e858['x']+(_0x22e858['targetX']-_0x22e858['x'])*_0x2493ea,_0x9dd6d9={'x':_0xb807c3,'y':_0x22e858['y'],'width':_0x22e858[_0x26538a(0x1de)],'height':_0x22e858['height']},_0x6bbce6={'x':ship['x']-_0x16ae1a/0x2,'y':ship['y']-_0x5be9cf,'width':_0x40c7a1+_0x16ae1a,'height':_0x5be9cf+ship[_0x26538a(0x297)]};if(checkCollision(_0x6bbce6,_0x9dd6d9)){const _0x17d3c1=_0x1c6daf-(_0x22e858['y']+_0x22e858[_0x26538a(0x297)]);if(_0x17d3c1<_0x3a8c5c){_0x3a8c5c=_0x17d3c1,_0x52b3ea=!![],_0x3cd347=!![];const _0x2672ee=_0x22e858['targetX']+_0x22e858['width']/0x2,_0x4ee71b=_0x2e900f/0x2,_0x1e44d2=_0x2672ee<_0x4ee71b?0x1:-0x1,_0x4a2739=0x1-Math[_0x26538a(0x1b3)](0x1,Math['max'](0x0,_0x17d3c1)/_0x5be9cf),_0x4b069b=_0x40c7a1*(2.5+_0x4a2739*0x2);_0x22d2d7=smoothedShipX+_0x1e44d2*_0x4b069b;}}}}}if(!_0x52b3ea){const _0x5b6d3f=AI_COLLISION_LOOKAHEAD,_0x506b7b=NORMAL_WAVE_ATTACKING_DODGE_BUFFER_MULTIPLIER,_0xf0db5d=BEE_DODGE_BUFFER_HORIZONTAL_FACTOR;let _0x4a8ab7=Infinity;for(const _0x42093c of enemies){if(_0x42093c&&_0x42093c['state']==='attacking'&&_0x42093c['y']+_0x42093c[_0x26538a(0x297)]>0x0&&_0x42093c['y']<_0x1973e){let _0x44736b=FINAL_DODGE_BUFFER_BASE*_0x506b7b;_0x42093c['type']===ENEMY1_TYPE&&(_0x44736b*=_0xf0db5d);const _0x2bc719={'x':ship['x']-_0x44736b/0x2,'y':ship['y']-_0x5b6d3f,'width':_0x40c7a1+_0x44736b,'height':_0x5b6d3f+ship[_0x26538a(0x297)]},_0x586c15={'x':_0x42093c['x'],'y':_0x42093c['y'],'width':_0x42093c['width'],'height':_0x42093c[_0x26538a(0x297)]};if(checkCollision(_0x2bc719,_0x586c15)){const _0x5a5ee6=_0x1c6daf-(_0x42093c['y']+_0x42093c[_0x26538a(0x297)]);if(_0x5a5ee6<_0x4a8ab7){_0x4a8ab7=_0x5a5ee6,_0x52b3ea=!![];const _0x23c54b=_0x42093c['x']+_0x42093c[_0x26538a(0x1de)]/0x2,_0x4c1f05=_0x4474bd<_0x23c54b?-0x1:0x1,_0x13a33b=0x1-Math['min'](0x1,Math[_0x26538a(0x245)](0x0,_0x5a5ee6)/_0x5b6d3f),_0x1fde51=_0x40c7a1*(0x2+_0x13a33b*1.8);_0x22d2d7=smoothedShipX+_0x4c1f05*_0x1fde51;}}}}}if(!_0x52b3ea&&!isFullGridWave){const _0x1ccb9b=AI_COLLISION_LOOKAHEAD;let _0x22d380=Infinity;for(const _0x3aba4d of enemies){const _0x3b3497=_0x3aba4d&&(_0x3aba4d[_0x26538a(0x260)]==='following_entrance_path'||_0x3aba4d[_0x26538a(0x260)]===_0x26538a(0x1e2));if(_0x3b3497&&_0x3aba4d['y']+_0x3aba4d[_0x26538a(0x297)]>0x0&&_0x3aba4d['y']<_0x1973e){let _0x1fea32=FINAL_DODGE_BUFFER_BASE;_0x3aba4d[_0x26538a(0x1c2)]===ENEMY1_TYPE&&(_0x1fea32*=BEE_DODGE_BUFFER_HORIZONTAL_FACTOR);const _0x2c7540={'x':ship['x']-_0x1fea32/0x2,'y':ship['y']-_0x1ccb9b,'width':_0x40c7a1+_0x1fea32,'height':_0x1ccb9b+ship[_0x26538a(0x297)]},_0x3aaaa9={'x':_0x3aba4d['x'],'y':_0x3aba4d['y'],'width':_0x3aba4d[_0x26538a(0x1de)],'height':_0x3aba4d[_0x26538a(0x297)]};if(checkCollision(_0x2c7540,_0x3aaaa9)){const _0x817060=_0x1c6daf-(_0x3aba4d['y']+_0x3aba4d['height']);if(_0x817060<_0x22d380){_0x22d380=_0x817060,_0x52b3ea=!![];const _0x423e4e=_0x3aba4d['x']+_0x3aba4d['width']/0x2,_0x35b622=_0x4474bd<_0x423e4e?-0x1:0x1,_0x731bfe=0x1-Math[_0x26538a(0x1b3)](0x1,Math[_0x26538a(0x245)](0x0,_0x817060)/_0x1ccb9b),_0x5ad003=_0x40c7a1*(0x2+_0x731bfe*1.8);_0x22d2d7=smoothedShipX+_0x35b622*_0x5ad003;}}}}}}if(_0x52b3ea&&!isInvincible){const _0x66187a=Math[_0x26538a(0x245)](AI_ANTI_CORNER_BUFFER,Math[_0x26538a(0x1b3)](_0x2e900f-_0x40c7a1-AI_ANTI_CORNER_BUFFER,_0x22d2d7));_0x4d19e5=_0x66187a,_0x297df1=null,_0x5cb458=![];}else{if(fallingShips[_0x26538a(0x299)]>0x0&&!isShipCaptured&&!isWaitingForRespawn){const _0x43a894=fallingShips[0x0];if(_0x43a894){const _0x25c62e=_0x43a894['x']+_0x43a894[_0x26538a(0x1de)]/0x2;_0x4d19e5=_0x25c62e-_0x40c7a1/0x2,_0x4d19e5=Math[_0x26538a(0x245)](AI_EDGE_BUFFER,Math[_0x26538a(0x1b3)](_0x2e900f-_0x40c7a1-AI_EDGE_BUFFER,_0x4d19e5)),_0x297df1=null;let _0x4b063a=-Infinity,_0x126516=null;for(const _0x3b2068 of enemies){if(_0x3b2068&&_0x3b2068['y']<_0x1c6daf){const _0x2d920c=_0x3b2068['x']+_0x3b2068['width']/0x2,_0x989853=Math[_0x26538a(0x1b7)](_0x2d920c-_0x4474bd),_0x3a4721=_0x1c6daf-(_0x3b2068['y']+_0x3b2068[_0x26538a(0x297)]);if(_0x989853<_0x40c7a1*1.5&&_0x3a4721>0x0){const _0x24567d=_0x1973e-_0x3b2068['y']-_0x989853*0x2-_0x3a4721;_0x24567d>_0x4b063a&&(_0x4b063a=_0x24567d,_0x126516=_0x3b2068);}}}if(_0x126516){let _0x29edb5=!![];const _0x52d176={'x':ship['x']-ENTRANCE_SHOOT_BULLET_CHECK_BUFFER/0x2,'y':ship['y']-ENTRANCE_SHOOT_BULLET_CHECK_LOOKAHEAD,'width':_0x40c7a1+ENTRANCE_SHOOT_BULLET_CHECK_BUFFER,'height':ENTRANCE_SHOOT_BULLET_CHECK_LOOKAHEAD+ship[_0x26538a(0x297)]};for(const _0x213890 of enemyBullets){if(_0x213890&&_0x213890['y']+_0x213890['height']>0x0&&_0x213890['y']<_0x1973e){const _0x2f4d2a={'x':_0x213890['x'],'y':_0x213890['y'],'width':_0x213890[_0x26538a(0x1de)],'height':_0x213890['height']};if(checkCollision(_0x52d176,_0x2f4d2a)){_0x29edb5=![];break;}}}_0x29edb5&&!(_0x126516[_0x26538a(0x1c2)]===ENEMY3_TYPE&&_0x126516[_0x26538a(0x260)]===_0x26538a(0x2b7))&&(_0x5cb458=!![],_0x297df1=_0x126516);}}}else{let _0x181c51=![],_0xc814b6=null;if(!isFullGridWave&&!isManualControl&&captureBeamActive&&capturingBossId&&playerLives>0x1&&!isShipCaptured&&!isInvincible){_0xc814b6=enemies[_0x26538a(0x1a9)](_0x5d7de0=>_0x5d7de0['id']===capturingBossId);if(_0xc814b6&&_0xc814b6[_0x26538a(0x260)]==='capturing'){_0x181c51=!![];const _0xba9993=_0x37c2a5-_0xc814b6[_0x26538a(0x1cf)];if(_0xba9993>=AI_CAPTURE_WAIT_DURATION_MS){_0x471e00=!![];const _0x60de13=_0xc814b6['x']+_0xc814b6[_0x26538a(0x1de)]/0x2;_0x4d19e5=_0x60de13-_0x40c7a1/0x2,_0x297df1=null,_0x5cb458=![];}}}if(!_0x471e00){_0x297df1=null;if(isEntrancePhaseActive&&!isChallengingStage&&!isFullGridWave){_0x4d19e5=_0x271b2e;let _0x40f7cc=-Infinity,_0x34a436=null;for(const _0x4a68ec of enemies){if(_0x4a68ec&&(_0x4a68ec[_0x26538a(0x260)]==='following_entrance_path'||_0x4a68ec[_0x26538a(0x260)]===_0x26538a(0x277))&&_0x4a68ec['y']<_0x1c6daf){const _0xc069e4=_0x4a68ec['x']+_0x4a68ec[_0x26538a(0x1de)]/0x2,_0x1efc9b=_0x4a68ec['y']+_0x4a68ec[_0x26538a(0x297)]/0x2,_0xfa6caa=_0xc069e4-_0x4474bd,_0x59dd90=_0x1c6daf-_0x1efc9b,_0x4039c9=Math['sqrt'](_0xfa6caa*_0xfa6caa+_0x59dd90*_0x59dd90),_0x4799a2=Math[_0x26538a(0x245)](0x0,_0x40c7a1*1.5-Math[_0x26538a(0x1b7)](_0xfa6caa)),_0x4f4f4d=(_0x1973e-_0x4a68ec['y'])*1.5+_0x4799a2-_0x4039c9*0.5;_0x4f4f4d>_0x40f7cc&&(_0x40f7cc=_0x4f4f4d,_0x34a436=_0x4a68ec);}}if(_0x34a436){_0x297df1=_0x34a436;const _0x3f76e3=_0x297df1['x']+_0x297df1['width']/0x2,_0x146db8=Math[_0x26538a(0x1b7)](_0x4474bd-_0x3f76e3),_0x34df23=_0x40c7a1*ENTRANCE_SHOOT_ALIGNMENT_FACTOR;let _0x5c418e=!![];const _0x44f460={'x':ship['x']-ENTRANCE_SHOOT_BULLET_CHECK_BUFFER/0x2,'y':ship['y']-ENTRANCE_SHOOT_BULLET_CHECK_LOOKAHEAD,'width':_0x40c7a1+ENTRANCE_SHOOT_BULLET_CHECK_BUFFER,'height':ENTRANCE_SHOOT_BULLET_CHECK_LOOKAHEAD+ship[_0x26538a(0x297)]};for(const _0x5871f7 of enemyBullets){if(_0x5871f7&&_0x5871f7['y']+_0x5871f7[_0x26538a(0x297)]>0x0&&_0x5871f7['y']<_0x1973e){const _0x9c26a={'x':_0x5871f7['x'],'y':_0x5871f7['y'],'width':_0x5871f7[_0x26538a(0x1de)],'height':_0x5871f7['height']};if(checkCollision(_0x44f460,_0x9c26a)){_0x5c418e=![];break;}}}_0x5c418e&&_0x146db8<_0x34df23&&((isDualShipActive||_0x297df1[_0x26538a(0x1c2)]!==ENEMY3_TYPE||captureAttemptMadeThisLevel||isShipCaptured)&&(_0x5cb458=!![]));}}else{if(isChallengingStage){let _0x1353b0=Infinity;_0x297df1=null;for(const _0x5781c7 of enemies){if(_0x5781c7&&_0x5781c7[_0x26538a(0x260)]===_0x26538a(0x20d)&&_0x5781c7['y']<_0x1c6daf){const _0x92974=_0x5781c7['x']+_0x5781c7[_0x26538a(0x1de)]/0x2,_0x5dac83=Math[_0x26538a(0x1b7)](_0x92974-_0x4474bd),_0x4d93b5=(0x1-Math['min'](0x1,_0x5781c7['y']/_0x1c6daf))*0x2,_0x1fbbc0=_0x5dac83/_0x2e900f*0.5,_0x547a19=_0x4d93b5+_0x1fbbc0;_0x547a19<_0x1353b0&&(_0x1353b0=_0x547a19,_0x297df1=_0x5781c7);}}let _0x51d065=_0x4474bd;if(_0x297df1){const _0x425405=_0x297df1['x']+_0x297df1['width']/0x2,_0x5e81b4=_0x297df1['y']+_0x297df1['height']/0x2,_0x55aa46=_0x1c6daf-_0x5e81b4;let _0x30e222=_0x425405;const _0x704ed8=_0x297df1[_0x26538a(0x224)]===0x2||_0x297df1['squadronId']===0x3;if(!_0x704ed8&&_0x55aa46>0x0&&PLAYER_BULLET_SPEED>0.1){const _0x41f7be=Math[_0x26538a(0x1b3)](MAX_PREDICTION_TIME_CS,_0x55aa46/PLAYER_BULLET_SPEED),_0x4e6fb2=0.4,_0x529f4c=(_0x297df1[_0x26538a(0x1e6)]||0x0)*_0x41f7be;_0x30e222=_0x425405+_0x529f4c*_0x4e6fb2,_0x30e222=Math[_0x26538a(0x245)](_0x297df1[_0x26538a(0x1de)]/0x2,Math['min'](_0x2e900f-_0x297df1[_0x26538a(0x1de)]/0x2,_0x30e222));}_0x51d065=_0x30e222,_0x4d19e5=_0x51d065-_0x40c7a1/0x2,_0x4d19e5=Math[_0x26538a(0x245)](AI_EDGE_BUFFER,Math['min'](_0x2e900f-_0x40c7a1-AI_EDGE_BUFFER,_0x4d19e5));const _0x4878ea=_0x40c7a1*1.5,_0x41f117=Math[_0x26538a(0x1b7)](_0x4474bd-_0x51d065);_0x41f117<_0x4878ea&&(_0x5cb458=!![]);}else{const _0x2e1c4b=Math[_0x26538a(0x19a)](_0x37c2a5/AI_WIGGLE_PERIOD*0x2*Math['PI'])*AI_WIGGLE_AMPLITUDE*0.5;_0x4d19e5=_0x271b2e+_0x2e1c4b,_0x4d19e5=Math['max'](AI_EDGE_BUFFER,Math[_0x26538a(0x1b3)](_0x2e900f-_0x40c7a1-AI_EDGE_BUFFER,_0x4d19e5));}}else{let _0x12be63=-Infinity;_0x297df1=null;const _0x434f3f=_0x181c51&&!_0x471e00;for(const _0x1d2f72 of enemies){if(!_0x1d2f72)continue;if(_0x434f3f&&_0x1d2f72['id']===capturingBossId)continue;let _0x1a003f=![],_0x47aadb=0x0;switch(_0x1d2f72[_0x26538a(0x260)]){case _0x26538a(0x251):_0x1a003f=!![],_0x47aadb=_0x434f3f?0x4e20:0x4650;break;case'moving_to_grid':case'returning':_0x1a003f=!![],_0x47aadb=0x2328;break;case _0x26538a(0x19c):_0x1a003f=!![],_0x47aadb=0x1b58;break;case _0x26538a(0x29c):_0x1a003f=!![],_0x47aadb=0x1770;break;case _0x26538a(0x2b7):_0x1a003f=!![],_0x47aadb=0x61a8;break;}if(_0x1a003f){let _0x4e40cb=_0x47aadb,_0x18ead3=_0x1d2f72[_0x26538a(0x1fa)]&&_0x1d2f72[_0x26538a(0x1c2)]===ENEMY3_TYPE?0x1388:0x0,_0x9ddff0=(_0x1973e-_0x1d2f72['y'])*0x2,_0x2b6302=Math[_0x26538a(0x245)](0x0,_0x40c7a1*0x1-Math[_0x26538a(0x1b7)](_0x1d2f72['x']+_0x1d2f72[_0x26538a(0x1de)]/0x2-_0x4474bd))*0x1;_0x4e40cb+=_0x9ddff0+_0x18ead3+_0x2b6302,_0x4e40cb>_0x12be63&&(_0x12be63=_0x4e40cb,_0x297df1=_0x1d2f72);}}let _0x22f0d9=_0x271b2e+_0x40c7a1/0x2;if(_0x297df1){const _0x16ff23=_0x297df1['x']+_0x297df1['width']/0x2,_0x27cbf5=_0x297df1['y']+_0x297df1[_0x26538a(0x297)]/0x2,_0x9b8cd9=_0x1c6daf-_0x27cbf5;let _0x4d539b=_0x16ff23;if(_0x297df1[_0x26538a(0x260)]!=='in_grid'&&_0x297df1['state']!=='preparing_capture'){if(_0x9b8cd9>0x0&&PLAYER_BULLET_SPEED>0.1){const _0x17e1f4=Math[_0x26538a(0x1b3)](MAX_PREDICTION_TIME,_0x9b8cd9/PLAYER_BULLET_SPEED);let _0x5b26fd=_0x16ff23+(_0x297df1[_0x26538a(0x1e6)]||0x0)*_0x17e1f4;_0x4d539b=Math[_0x26538a(0x245)](_0x297df1[_0x26538a(0x1de)]/0x2,Math[_0x26538a(0x1b3)](_0x2e900f-_0x297df1[_0x26538a(0x1de)]/0x2,_0x5b26fd));}}_0x22f0d9=_0x4d539b,_0x4d19e5=_0x22f0d9-_0x40c7a1/0x2;if(_0x297df1[_0x26538a(0x260)]===_0x26538a(0x251)||_0x297df1['state']===_0x26538a(0x2b7))_0x4d19e5=Math['max'](AI_EDGE_BUFFER,Math[_0x26538a(0x1b3)](_0x2e900f-_0x40c7a1-AI_EDGE_BUFFER,_0x4d19e5));else{const _0x1342ce=_0x2e900f*0.6/0x2,_0x2e908e=_0x4a5c3b-_0x1342ce,_0x293473=_0x4a5c3b+_0x1342ce-_0x40c7a1;_0x4d19e5=Math['max'](_0x2e908e,Math[_0x26538a(0x1b3)](_0x293473,_0x4d19e5)),_0x4d19e5=Math[_0x26538a(0x245)](AI_EDGE_BUFFER,Math[_0x26538a(0x1b3)](_0x2e900f-_0x40c7a1-AI_EDGE_BUFFER,_0x4d19e5));}let _0x45de08=![],_0xe5c1ea=Math[_0x26538a(0x1b7)](_0x4474bd-_0x22f0d9),_0xb668f8=_0x297df1[_0x26538a(0x260)]===_0x26538a(0x251)||_0x297df1[_0x26538a(0x260)]===_0x26538a(0x2b7)?_0x40c7a1*GRID_SHOOT_ALIGNMENT_FACTOR:_0x40c7a1*FINAL_SHOOT_ALIGNMENT_THRESHOLD;const _0x187cb8=ship['x']<AI_EDGE_BUFFER*AI_EDGE_SHOOT_BUFFER_FACTOR,_0x49e973=ship['x']>_0x2e900f-_0x40c7a1-AI_EDGE_SHOOT_BUFFER_FACTOR,_0xb308d3=_0x22f0d9>_0x2e900f*AI_EDGE_SHOOT_TARGET_THRESHOLD_FACTOR,_0x10f91f=_0x22f0d9<_0x2e900f*(0x1-AI_EDGE_SHOOT_TARGET_THRESHOLD_FACTOR);(_0x187cb8&&_0xb308d3||_0x49e973&&_0x10f91f)&&(_0x45de08=!![]);if(!_0x45de08&&_0xe5c1ea<_0xb668f8){let _0x4449a1=![];if(_0x297df1[_0x26538a(0x260)]!==_0x26538a(0x251)&&_0x297df1['state']!=='preparing_capture')for(const _0x5a5699 of enemies){if(!_0x5a5699||_0x5a5699===_0x297df1)continue;if(_0x434f3f&&_0x5a5699['id']===capturingBossId)continue;if(_0x5a5699['y']<_0x1c6daf&&_0x5a5699['y']+_0x5a5699['height']>_0x297df1['y']){const _0x48bb4d=_0x5a5699['x']-AI_SHOT_CLEARANCE_BUFFER,_0x4b39db=_0x5a5699['x']+_0x5a5699[_0x26538a(0x1de)]+AI_SHOT_CLEARANCE_BUFFER;if(_0x22f0d9>_0x48bb4d&&_0x22f0d9<_0x4b39db){_0x4449a1=!![];break;}}}!_0x4449a1&&((!_0x434f3f||_0x297df1['id']!==capturingBossId)&&(_0x5cb458=!![]));}}else{const _0xa65cd3=Math['sin'](_0x37c2a5/AI_WIGGLE_PERIOD*0x2*Math['PI'])*AI_WIGGLE_AMPLITUDE;_0x4d19e5=_0x271b2e+_0xa65cd3,_0x4d19e5=Math[_0x26538a(0x245)](AI_EDGE_BUFFER,Math[_0x26538a(0x1b3)](_0x2e900f-_0x40c7a1-AI_EDGE_BUFFER,_0x4d19e5));}}}}}}}ship[_0x26538a(0x244)]=_0x4d19e5;if(_0x5cb458&&!_0x52b3ea&&!_0x471e00){let _0x531d90=!![];!isChallengingStage&&(_0x531d90=_0x37c2a5>=aiCanShootTime),_0x531d90&&_0x37c2a5-aiLastShotTime>=AI_SHOOT_COOLDOWN&&(firePlayerBullet(!![])&&(aiLastShotTime=_0x37c2a5));}}catch(_0x23f24d){console[_0x26538a(0x27a)](_0x26538a(0x1d6),_0x23f24d,_0x23f24d[_0x26538a(0x22a)]);if(ship)ship[_0x26538a(0x244)]=ship['x'];aiNeedsStabilization=!![],smoothedShipX=undefined;}}function findAndDetachEnemy(){const _0x409b26=_0x21a6;try{if(!isFullGridWave&&isShipCaptured){const _0x248ab6=enemies['find'](_0x4aeff1=>_0x4aeff1&&_0x4aeff1[_0x409b26(0x1c2)]===ENEMY3_TYPE&&_0x4aeff1[_0x409b26(0x1ff)]&&_0x4aeff1[_0x409b26(0x260)]===_0x409b26(0x251));if(_0x248ab6){console[_0x409b26(0x1a8)](_0x409b26(0x1f7)+_0x248ab6['id']+_0x409b26(0x20e)),_0x248ab6[_0x409b26(0x1f9)]=!![],_0x248ab6[_0x409b26(0x2af)]=_0x409b26(0x21b);const _0x1d59d0=new Set([_0x248ab6['id']]);return resetJustReturnedFlags(_0x1d59d0),[_0x248ab6];}}if(isEntrancePhaseActive)return null;let _0x11eaae=enemies[_0x409b26(0x25e)](_0x4a3708=>_0x4a3708&&_0x4a3708[_0x409b26(0x260)]===_0x409b26(0x251)&&!_0x4a3708[_0x409b26(0x1f9)]);if(_0x11eaae[_0x409b26(0x299)]===0x0){_0x11eaae=enemies[_0x409b26(0x25e)](_0x53bce4=>_0x53bce4&&_0x53bce4[_0x409b26(0x260)]===_0x409b26(0x251));if(_0x11eaae[_0x409b26(0x299)]===0x0)return null;}if(_0x11eaae[_0x409b26(0x299)]===0x0)return null;_0x11eaae[_0x409b26(0x24a)]((_0x423a57,_0x458f7c)=>(_0x458f7c[_0x409b26(0x1f6)]||0x0)-(_0x423a57[_0x409b26(0x1f6)]||0x0));const _0x3c6872=_0x11eaae['length']<=0x3;let _0x5467eb=[];const _0x2114db=_0x409b26(0x21b);gridJustCompleted&&(gridJustCompleted=![]);let _0x27cb89=![];if(level>0x1&&!_0x3c6872&&_0x11eaae[_0x409b26(0x299)]>=0x3){const _0x32cd99=_0x11eaae['filter'](_0x28332d=>_0x28332d['type']===ENEMY3_TYPE&&!_0x28332d[_0x409b26(0x1ff)]);for(const _0x4f6ad6 of _0x32cd99){const _0x1351c3=_0x11eaae['find'](_0x56c2ac=>_0x56c2ac['type']===ENEMY2_TYPE&&_0x56c2ac[_0x409b26(0x1f6)]===_0x4f6ad6[_0x409b26(0x1f6)]&&_0x56c2ac[_0x409b26(0x294)]===_0x4f6ad6[_0x409b26(0x294)]-0x1),_0x14ce80=_0x11eaae['find'](_0x45fb7d=>_0x45fb7d[_0x409b26(0x1c2)]===ENEMY2_TYPE&&_0x45fb7d[_0x409b26(0x1f6)]===_0x4f6ad6[_0x409b26(0x1f6)]&&_0x45fb7d[_0x409b26(0x294)]===_0x4f6ad6[_0x409b26(0x294)]+0x1);if(_0x1351c3&&_0x14ce80){_0x5467eb=[_0x4f6ad6,_0x1351c3,_0x14ce80],_0x27cb89=!![];break;}}}if(!_0x27cb89&&!_0x3c6872){const _0x4a2fe1=_0x11eaae[_0x409b26(0x25e)](_0x5ea111=>_0x5ea111['type']===ENEMY1_TYPE),_0x1f8367=scaleValue(level,BASE_BEE_GROUP_ATTACK_PROBABILITY,MAX_BEE_GROUP_ATTACK_PROBABILITY)*1.2;if(_0x4a2fe1[_0x409b26(0x299)]>=0x2&&Math[_0x409b26(0x1e1)]()<_0x1f8367){const _0xdd6984=scaleValue(level,BASE_BEE_TRIPLE_ATTACK_PROBABILITY,MAX_BEE_TRIPLE_ATTACK_PROBABILITY)*1.1,_0x2d3e74=_0x4a2fe1[_0x409b26(0x299)]>=0x3&&Math[_0x409b26(0x1e1)]()<_0xdd6984?0x3:0x2;let _0x277c26=![];_0x4a2fe1[_0x409b26(0x24a)](()=>Math[_0x409b26(0x1e1)]()-0.5);for(let _0x45ccb7=0x0;_0x45ccb7<_0x4a2fe1[_0x409b26(0x299)];_0x45ccb7++){const _0x35f564=_0x4a2fe1[_0x45ccb7];let _0x38205a=[_0x35f564];const _0x2a9dbb=_0x4a2fe1[_0x409b26(0x25e)](_0x38775a=>_0x38775a['id']!==_0x35f564['id']&&_0x38775a['gridRow']===_0x35f564[_0x409b26(0x1f6)]);_0x2a9dbb['sort']((_0x1b1a2f,_0x208aff)=>Math[_0x409b26(0x1b7)](_0x1b1a2f[_0x409b26(0x294)]-_0x35f564[_0x409b26(0x294)])-Math[_0x409b26(0x1b7)](_0x208aff[_0x409b26(0x294)]-_0x35f564[_0x409b26(0x294)]));for(let _0x20fc80=0x0;_0x20fc80<_0x2a9dbb['length']&&_0x38205a['length']<_0x2d3e74;_0x20fc80++){_0x38205a[_0x409b26(0x279)](_0x2a9dbb[_0x20fc80]);}if(_0x38205a['length']===_0x2d3e74){_0x5467eb=_0x38205a,_0x27cb89=!![],_0x277c26=!![];break;}}!_0x277c26&&_0x4a2fe1[_0x409b26(0x299)]>=_0x2d3e74&&(_0x5467eb=_0x4a2fe1['slice'](0x0,_0x2d3e74),_0x27cb89=!![]);}}if(!_0x27cb89&&!_0x3c6872){const _0x4c924e=_0x11eaae[_0x409b26(0x25e)](_0x324128=>_0x324128[_0x409b26(0x1c2)]===ENEMY2_TYPE),_0x1e6986=0.2;if(_0x4c924e[_0x409b26(0x299)]>=0x2&&Math['random']()<_0x1e6986){const _0x34cc1b=0x2;let _0x5a500b=![];_0x4c924e[_0x409b26(0x24a)](()=>Math['random']()-0.5);for(let _0x3cf5ab=0x0;_0x3cf5ab<_0x4c924e[_0x409b26(0x299)];_0x3cf5ab++){const _0x17557e=_0x4c924e[_0x3cf5ab];let _0xc6f9bd=[_0x17557e];const _0x5c67c1=_0x4c924e['filter'](_0x576c7d=>_0x576c7d['id']!==_0x17557e['id']&&_0x576c7d['gridRow']===_0x17557e['gridRow']);_0x5c67c1['sort']((_0x6cec92,_0x50298b)=>Math[_0x409b26(0x1b7)](_0x6cec92[_0x409b26(0x294)]-_0x17557e[_0x409b26(0x294)])-Math['abs'](_0x50298b[_0x409b26(0x294)]-_0x17557e[_0x409b26(0x294)]));for(let _0x263322=0x0;_0x263322<_0x5c67c1[_0x409b26(0x299)]&&_0xc6f9bd[_0x409b26(0x299)]<_0x34cc1b;_0x263322++){_0xc6f9bd['push'](_0x5c67c1[_0x263322]);}if(_0xc6f9bd[_0x409b26(0x299)]===_0x34cc1b){_0x5467eb=_0xc6f9bd,_0x27cb89=!![],_0x5a500b=!![];break;}}!_0x5a500b&&_0x4c924e[_0x409b26(0x299)]>=_0x34cc1b&&(_0x5467eb=_0x4c924e[_0x409b26(0x1ae)](0x0,_0x34cc1b),_0x27cb89=!![]);}}if(!_0x27cb89&&_0x11eaae[_0x409b26(0x299)]>0x0){const _0x45c582=_0x11eaae[0x0];_0x5467eb[_0x409b26(0x279)](_0x45c582);if(_0x11eaae['length']>0x1&&!_0x3c6872&&Math['random']()<0.2){const _0x48807b=_0x11eaae['find'](_0x549511=>_0x549511['id']!==_0x45c582['id']&&_0x549511['gridRow']===_0x45c582[_0x409b26(0x1f6)]&&_0x549511[_0x409b26(0x294)]===_0x45c582[_0x409b26(0x294)]-0x1),_0x2b1783=_0x11eaae[_0x409b26(0x1a9)](_0x5aca90=>_0x5aca90['id']!==_0x45c582['id']&&_0x5aca90['gridRow']===_0x45c582['gridRow']&&_0x5aca90['gridCol']===_0x45c582['gridCol']+0x1),_0xd2d10d=_0x48807b||_0x2b1783;if(_0xd2d10d){const _0x364880=_0x45c582[_0x409b26(0x1c2)]===ENEMY3_TYPE&&_0xd2d10d[_0x409b26(0x1c2)]===ENEMY3_TYPE;!_0x364880&&_0x5467eb[_0x409b26(0x279)](_0xd2d10d);}}_0x27cb89=!![];}if(_0x5467eb['length']>0x0){_0x5467eb=_0x5467eb[_0x409b26(0x25e)](_0x1b57a6=>_0x1b57a6);if(_0x5467eb[_0x409b26(0x299)]===0x0)return null;_0x5467eb[_0x409b26(0x27e)](_0x1420ca=>{const _0x255ed8=_0x409b26;_0x1420ca&&(_0x1420ca[_0x255ed8(0x1f9)]=!![],_0x1420ca['attackType']=_0x2114db);});const _0x6476af=new Set(_0x5467eb[_0x409b26(0x23c)](_0x1e7c94=>_0x1e7c94['id']));return resetJustReturnedFlags(_0x6476af),_0x5467eb;}return null;}catch(_0x40fca6){return console[_0x409b26(0x27a)](_0x409b26(0x229),_0x40fca6),null;}}function _0x1b0a(){const _0x5c3ecb=['following_bezier_path','\x20for\x20MUST\x20DIVE\x20(Normal\x20attack).','Error\x20getting\x20grid\x20pos\x20after\x20bezier\x20error\x20for\x20','[DEBUG\x20Attack\x20Path\x20Failed]\x20Could\x20not\x20generate\x20path\x20for\x20leader\x20','\x20after\x20NaN','2254452TDXgFr','\x20after\x20bad\x20next\x20segment','Error\x20starting\x20attack\x20for\x20','\x22\x20became\x20empty\x20after\x20enemy\x20path\x20validation.\x20Removing.','\x20(invalid\x20attack\x20segment):','FATAL\x20Error\x20in\x20moveEntities:','[scheduleEntranceFlightWave]\x20Called\x20inappropriately\x20for\x20non-entrance\x20wave\x20type\x20(Level\x20','Error\x20calculating\x20FINAL\x20bezier\x20point\x20for\x20attack\x20','Error\x20updating\x20explosions:','normal','Attempted\x20to\x20start\x20Full\x20Grid\x20wave\x20without\x20valid\x20definition\x20or\x20when\x20not\x20in\x20Full\x20Grid\x20mode.','following_entrance_path','attackFormationOffsetX','.\x20Skipping.','pathT','5000anbBaJ','completed','Invalid\x20Normal\x20Bezier\x20segment\x20','squadronId','diving_to_capture_position','Invalid\x20start\x20segment\x20for\x20path\x20','661365zqvjIU','CS:\x20Path\x20','Error\x20in\x20findAndDetachEnemy:','stack','Invalid\x20next\x20CS\x20Bezier\x20segment\x20','capturedShipX','[scheduleSingleEntranceSquadron]\x20Called\x20inappropriately\x20for\x20non-entrance\x20wave\x20type\x20(Level\x20','\x20for\x20SHARED\x20path\x20','.\x20Skipping\x20attack.','\x22\x20not\x20found!\x20Aborting\x20CS.','creationTime','\x20destroyed,\x20had\x20ship\x20initially\x20but\x20dimensions\x20missing!\x20Resetting\x20state\x20anyway.','capturedShipY','Error\x20deep\x20copying\x20selected\x20pattern\x200\x20for\x20Full\x20Grid:','health','65kEfgpt','show_results',':\x20Enemy\x20entrancePathId\x20\x22','\x20path\x20index\x20','\x20has\x20invalid\x20enemy\x20data.','CS3_DiveLoopL_Sharp','map','CS_LoopAttack_TL','\x20was\x20in\x20\x27capturing\x27,\x20but\x20another\x20ship\x20(','[Capture\x20Message\x20End]\x20Could\x20not\x20find\x20Boss\x20',':\x20Squadron\x20\x22','\x20attacking,\x20index\x20','Boss\x20','toString','targetX','max','\x20attacking,\x20invalid\x20segment\x20','isArray','Entrance\x20Wave:\x20Assigned\x20entrance\x20path\x20\x22','CRITICAL:\x20Failed\x20to\x20define\x20CS\x20paths!','sort','entrance_flight_1','Cannot\x20reposition\x20ship\x20Y\x20-\x20ship\x20or\x20canvas\x20not\x20ready.','keys','Canvas/ship\x20not\x20ready\x20in\x20resetWave.','CS_LoopAttack_TR','[DEBUG]\x20Error\x20generating\x20attack\x20path\x20for\x20enemy\x20','in_grid','capturing','pause','\x20for\x20path\x20','Error\x20calculating\x20final\x20bezier\x20point\x20for\x20','enemy-grid-','enemies','110fgUrFq','CRITICAL:\x20waveEntrancePatterns\x20is\x20not\x20defined\x20or\x20invalid\x20in\x20generateWaveDefinition\x20(Level\x20','.\x20Enemy\x20','CRITICAL:\x20normalWaveEntrancePaths\x20is\x20not\x20defined\x20or\x20empty\x20in\x20generateWaveDefinition\x20(Level\x20',',\x20index\x20','cos','filter','!\x20Returning.','state','\x20(Entrance\x201):\x20Basis\x20patroon\x200\x20is\x20ongeldig\x20of\x20leeg!','hasFired','capturedShipDimensions','Error\x20in\x20triggerImmediateCaptureDive:','left','\x20attacking,\x20invalid\x20NEXT\x20segment\x20','some',')\x20during\x20shift:','attackPathT','CRITICAL:\x20Required\x20CS\x20path\x20\x22','right','Error\x20during\x20enemy\x20burst\x20firing\x20(bullet\x20','Full\x20Grid:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20','attackPathSegments','\x20definition\x20failed.\x20Transitioning\x20immediately.','\x20(Path\x20','44MlTcLX','destroyed','NaN\x20detected\x20in\x20CS\x20path\x20calculation\x20for\x20enemy\x20','\x20to\x20reset\x20state/rotation.','\x20at\x20end\x20of\x20normal\x20path\x20','add','moving_to_grid','object','push','error','15nGMhYq',',\x20Squadron\x20','A\x20critical\x20error\x20occurred\x20in\x20the\x20game\x20loop.\x20Please\x20refresh.','forEach','\x20invalid!\x20Skipping.','has','velocityY','entrancePathId','hasFiredPostLanding','targetY','FATAL\x20Error\x20in\x20resetWave:','.\x20Removing.','[Destroyed\x20Boss\x20Score\x20-\x20Attack]\x20Boss\x20destroyed\x20on\x20first\x20hit?\x20Awarding\x20','CS_LoopAttack_BR','particles','[handleEnemyHit]\x20CRITICAL:\x20Boss\x20','\x20points.\x20Health\x20was:\x20','Error\x20deep\x20copying\x20selected\x20pattern\x201\x20for\x20Entrance\x202:','),\x20index\x20','round','switch_player','warn','NaN\x20detected\x20in\x20Normal\x20path\x20calculation\x20for\x20enemy\x20','captureAnimationRotation','\x22\x20invalid\x20or\x20missing\x20in\x20normalWaveEntrancePaths!\x20Removing\x20enemy.','gridCol','\x20not\x20found.','Invalid\x20start\x20segment\x20for\x20squadron\x20path\x20','height','attack-','length','alpha','\x20(state:\x20','attacking','pathSegmentIndex','substring','Onbekend\x20wave\x20patroon\x20index\x20','showing_capture_message','Error\x20getting\x20grid\x20pos\x20within\x20\x27in_grid\x27\x20for\x20','attackGroupId','\x20after\x20bad\x20segment','capturedShipLastFiredTime','[Capture\x20Message\x20End]\x20Boss\x20','speed','indexOf','duration','\x20(invalid\x20attack\x20index):','Entrance\x20Wave:\x20Invalid\x20enemy\x20def\x20in\x20squadron\x20','Error\x20checking/awarding\x20extra\x20life:','\x20returning\x20without\x20target\x20coords.\x20Recalculating.','pathId','includes','attackType','Entrance\x20Wave:\x20Error\x20processing\x20enemies\x20for\x20squadron\x20','Error\x20getting\x20target\x20grid\x20pos\x20for\x20new\x20enemy\x20','Error\x20updating\x20floating\x20scores:','\x20out\x20of\x20bounds\x20(','\x20in\x20moving_to_grid\x20state\x20without\x20target.\x20Recalculating.','\x20after\x20missing\x20path','Error\x20getting\x20grid\x20pos\x20after\x20FINAL\x20bezier\x20error\x20for\x20','preparing_capture','\x22\x20for\x20enemy\x20in\x20squadron\x20',',\x20Idx\x20','\x20missing\x20SHARED\x20path\x20','enemy-cs-','sin','Enemy\x20','preparing_attack','\x20after\x20bezier\x20error','CS:\x20Error\x20setting\x20up\x20spawns\x20for\x20squadron\x20','squadronEnemyIndex','newButtonStates','lastFiredTime',')\x20for\x20','floor','Entrance\x20Wave:\x20Error\x20during\x20enemy\x20spawn\x20execution\x20(Sq\x20','canFireThisDive','unknown','Error\x20getting\x20grid\x20pos\x20for\x20returning\x20enemy\x20','log','find','boss_loop_right','[handleEnemyHit]\x20Attempted\x20to\x20create\x20falling\x20ship,\x20but\x20similar\x20one\x20already\x20exists.\x20Skipping.','returnLogDone','\x20state\x20changed\x20unexpectedly.\x20Resetting\x20rotation.','slice','Invalid\x20next\x20Normal\x20Bezier\x20segment\x20','\x20after\x20attack:','CS3_DiveLoopR_Sharp','5789qpbUSJ','min','Full\x20Grid:\x20Squadron\x20','\x20in\x20moving_to_grid',',\x20isFullGrid:\x20','abs',')\x20was\x20already\x20captured.\x20Returning.','Error\x20getting\x20grid\x20pos\x20for\x20','.\x20Switching\x20to\x20moving_to_grid.','now','CS_HorizontalFlyByL','Invalid\x20CS\x20Bezier\x20segment\x20','Error\x20calculating\x20Normal\x20Bezier\x20point\x20for\x20enemy\x20','function','\x20in\x20returning','splice','type','targetGridY',',\x20Path\x20','Full\x20Grid:\x20Error\x20getting\x20target\x20grid\x20pos\x20for\x20enemy\x20','getGamepads','initialCaptureAnimationY','Error\x20getting\x20target\x20grid\x20pos\x20for\x20','[Player\x20GO\x20Delay\x20End]\x20Invalid\x20next\x20action:','Error\x20getting\x20grid\x20pos\x20for\x20returning\x20boss\x20','72056WNEhLA','every','[scheduleSingleEntranceSquadron]\x20Firing\x20status\x20for\x20squadron\x20','Critical\x20error\x20during\x20entity\x20movement/collision.\x20Returning\x20to\x20menu.','captureStartTime','total','hasOwnProperty','3178860cAFHRy','Entrance\x20Wave:\x20Path\x20','1090728XTKaOo','\x20diving\x20to\x20capture\x20without\x20targetX/Y!\x20Aborting.','Error\x20in\x20aiControl:',').\x20Skipping.','74846IZEtuF','[Capture\x20State]\x20Boss\x20','\x22\x20does\x20not\x20exist\x20in\x20normalWaveEntrancePaths!\x20Removing\x20squadron.','pathSpeedMultiplier','string','attackPathSegmentIndex','width','back','Wave\x20','random','returning','\x20(Full\x20Grid):\x20Basis\x20patroon\x200\x20is\x20ongeldig\x20of\x20leeg!','tintProgress','challenging_stage','velocityX','capturePrepareTimeout',',\x20Pattern\x20','Beam\x20collision\x20box\x20has\x20invalid\x20height:','Error\x20calculating\x20CS\x20Bezier\x20point\x20for\x20enemy\x20','\x20attacking\x20without\x20path!\x20Returning.','scheduledStartTime','entrance_flight_2','Error\x20during\x20post-landing\x20fire\x20for\x20','full_grid','diveStartTime',')!\x20Returning.',',\x20isCS:\x20','\x20at\x20[','\x20off\x20screen:','targetGridX','gridRow','[findAndDetachEnemy\x20-\x20PRIORITY]\x20Ship\x20captured.\x20Selecting\x20Boss\x20','number','justReturned','isDamaged','single','Attempted\x20to\x20schedule\x20entrance\x20flight\x20wave\x20without\x20valid\x20definition.','CS_HorizontalFlyByR','Error\x20calculating\x20bezier\x20point\x20during\x20attack\x20for\x20','hasCapturedShip','\x20invalid!\x20Skipping\x20squadron.','rotation','Failed\x20to\x20return\x20to\x20menu\x20after\x20critical\x20error:','Error\x20updating\x20target\x20grid\x20pos\x20for\x20enemy\x20','sqrt','stringify','\x20after\x20invalid\x20path\x20index','\x20for\x20squadron\x20','findIndex','parse','CS:\x20Error\x20during\x20enemy\x20spawn\x20execution\x20(Sq\x20','undefined','lifetime'];_0x1b0a=function(){return _0x5c3ecb;};return _0x1b0a();}function triggerImmediateCaptureDive(){const _0x101ef5=_0x21a6;try{if(playerLives<=0x1||isChallengingStage||isShipCaptured||isDualShipActive||captureAttemptMadeThisLevel)return;const _0x3c5437=enemies[_0x101ef5(0x25e)](_0x45e84a=>_0x45e84a&&_0x45e84a[_0x101ef5(0x260)]===_0x101ef5(0x251)&&_0x45e84a['type']===ENEMY3_TYPE&&!_0x45e84a[_0x101ef5(0x1ff)]);if(_0x3c5437['length']>0x0){const _0x55b5fa=_0x3c5437[Math[_0x101ef5(0x1a3)](Math[_0x101ef5(0x1e1)]()*_0x3c5437[_0x101ef5(0x299)])],_0x28734a=Date['now']();captureAttemptMadeThisLevel=!![],_0x55b5fa[_0x101ef5(0x1f9)]=!![];const _0x5d94f8=new Set([_0x55b5fa['id']]);resetJustReturnedFlags(_0x5d94f8);const _0x682eab=Math[_0x101ef5(0x1e1)]()<0.5?_0x101ef5(0x265):_0x101ef5(0x26b),_0x326557=_0x682eab===_0x101ef5(0x265)?gameCanvas['width']*CAPTURE_DIVE_SIDE_MARGIN_FACTOR:gameCanvas[_0x101ef5(0x1de)]*(0x1-CAPTURE_DIVE_SIDE_MARGIN_FACTOR)-BOSS_WIDTH,_0x1ec5a7=gameCanvas[_0x101ef5(0x297)]*CAPTURE_DIVE_BOTTOM_HOVER_Y_FACTOR;_0x55b5fa[_0x101ef5(0x260)]=_0x101ef5(0x2b7),_0x55b5fa[_0x101ef5(0x244)]=_0x326557,_0x55b5fa[_0x101ef5(0x284)]=_0x1ec5a7,_0x55b5fa[_0x101ef5(0x1f0)]=_0x28734a,playSound(bossGalagaDiveSound);const _0x5eeee2=_0x55b5fa['id'];_0x55b5fa['capturePrepareTimeout']=setTimeout(()=>{const _0x51992c=_0x101ef5,_0x439486=enemies[_0x51992c(0x1a9)](_0x35e9f1=>_0x35e9f1?.['id']===_0x5eeee2);_0x439486&&_0x439486[_0x51992c(0x260)]===_0x51992c(0x2b7)&&(_0x439486[_0x51992c(0x260)]=_0x51992c(0x225));if(_0x439486)_0x439486['capturePrepareTimeout']=null;const _0x54ac9e=enemySpawnTimeouts[_0x51992c(0x208)](_0x2b909e=>_0x2b909e===_0x55b5fa[_0x51992c(0x1e7)]);if(_0x54ac9e>-0x1)enemySpawnTimeouts['splice'](_0x54ac9e,0x1);},0x12c),enemySpawnTimeouts[_0x101ef5(0x279)](_0x55b5fa[_0x101ef5(0x1e7)]);}else{}}catch(_0x287b17){console['error'](_0x101ef5(0x264),_0x287b17);}}function resetJustReturnedFlags(_0x6c2d8){const _0x19a257=_0x21a6;enemies[_0x19a257(0x27e)](_0x2d7a4a=>{const _0x5233a0=_0x19a257;let _0x576d64=![];if(_0x6c2d8 instanceof Set)_0x576d64=_0x6c2d8[_0x5233a0(0x280)](_0x2d7a4a['id']);else typeof _0x6c2d8===_0x5233a0(0x1dc)&&(_0x576d64=_0x2d7a4a['id']===_0x6c2d8);_0x2d7a4a&&_0x2d7a4a[_0x5233a0(0x260)]==='in_grid'&&_0x2d7a4a[_0x5233a0(0x1f9)]&&!_0x576d64&&(_0x2d7a4a[_0x5233a0(0x1f9)]=![]);});}function updateFloatingScores(){const _0xcfefb2=_0x21a6;if(isPaused)return;try{const _0x52b507=Date['now']();floatingScores=floatingScores[_0xcfefb2(0x25e)](_0x4f5cb2=>_0x52b507-_0x4f5cb2[_0xcfefb2(0x231)]<FLOATING_SCORE_DURATION+FLOATING_SCORE_APPEAR_DELAY);}catch(_0x27082a){console[_0xcfefb2(0x27a)](_0xcfefb2(0x2b2),_0x27082a),floatingScores=[];}}function updateExplosions(){const _0x1cbd78=_0x21a6;if(isPaused)return;try{const _0x4e8bc2=Date[_0x1cbd78(0x1bb)]();for(let _0xefda6a=explosions[_0x1cbd78(0x299)]-0x1;_0xefda6a>=0x0;_0xefda6a--){const _0xbb578e=explosions[_0xefda6a],_0x3a3368=_0x4e8bc2-_0xbb578e[_0x1cbd78(0x231)];if(_0x3a3368>_0xbb578e[_0x1cbd78(0x2a8)]){explosions[_0x1cbd78(0x1c1)](_0xefda6a,0x1);continue;}_0xbb578e[_0x1cbd78(0x289)]['forEach'](_0xc7278=>{const _0x388c26=_0x1cbd78;_0xc7278['x']+=_0xc7278['vx'],_0xc7278['y']+=_0xc7278['vy'],_0xc7278[_0x388c26(0x29a)]=Math[_0x388c26(0x245)](0x0,0x1-_0x3a3368/_0xbb578e['duration']*EXPLOSION_FADE_SPEED);});}}catch(_0x522561){console[_0x1cbd78(0x27a)](_0x1cbd78(0x21a),_0x522561),explosions=[];}}function moveEntities(){const _0x13497b=_0x21a6;if(isPaused)return;try{if(ship&&isInGameState&&playerLives>0x0&&gameOverSequenceStartTime===0x0&&!isShowingPlayerGameOverMessage&&!isWaitingForRespawn){let _0x1f8730=ship[_0x13497b(0x1de)];isDualShipActive&&(_0x1f8730+=DUAL_SHIP_OFFSET_X);let _0x4ba1bb=ship['x'];if(isManualControl){let _0x47297c=![],_0x501a96=![];currentPlayer===0x1||!isTwoPlayerMode?(_0x47297c=leftPressed,_0x501a96=rightPressed):(_0x47297c=p2LeftPressed,_0x501a96=p2RightPressed);if(_0x47297c&&ship['x']>0x0)_0x4ba1bb=ship['x']-ship[_0x13497b(0x2a6)];else _0x501a96&&ship['x']<gameCanvas[_0x13497b(0x1de)]-_0x1f8730&&(_0x4ba1bb=ship['x']+ship['speed']);ship['x']=Math['max'](0x0,Math[_0x13497b(0x1b3)](gameCanvas[_0x13497b(0x1de)]-_0x1f8730,_0x4ba1bb)),ship[_0x13497b(0x244)]=ship['x'];}else{if(typeof smoothedShipX!==_0x13497b(0x20b)){const _0x4439ff=0.1,_0x5ea1ee=1.2;smoothedShipX+=(ship[_0x13497b(0x244)]-smoothedShipX)*AI_SMOOTHING_FACTOR_MOVE;const _0x2133d9=smoothedShipX-ship['x'],_0x11067b=ship[_0x13497b(0x2a6)]*_0x5ea1ee;let _0x43de6c=0x0;if(Math[_0x13497b(0x1b7)](_0x2133d9)>_0x4439ff){const _0x50b9c1=isChallengingStage?CS_AI_MOVE_FRACTION:NORMAL_MOVE_FRACTION;_0x43de6c=_0x2133d9*_0x50b9c1,_0x43de6c=Math['max'](-_0x11067b,Math[_0x13497b(0x1b3)](_0x11067b,_0x43de6c)),Math[_0x13497b(0x1b7)](_0x43de6c)>Math[_0x13497b(0x1b7)](_0x2133d9)&&(_0x43de6c=_0x2133d9),ship['x']+=_0x43de6c,ship['x']=Math[_0x13497b(0x245)](0x0,Math[_0x13497b(0x1b3)](gameCanvas['width']-_0x1f8730,ship['x']));}}else ship['x']=Math['max'](0x0,Math[_0x13497b(0x1b3)](gameCanvas[_0x13497b(0x1de)]-_0x1f8730,ship['targetX']));}}const _0xb9694f=Date[_0x13497b(0x1bb)]();for(let _0x38afeb=bullets[_0x13497b(0x299)]-0x1;_0x38afeb>=0x0;_0x38afeb--){const _0x53ffd9=bullets[_0x38afeb];_0x53ffd9?(_0x53ffd9['y']-=_0x53ffd9[_0x13497b(0x2a6)],_0x53ffd9['y']+PLAYER_BULLET_HEIGHT<0x0&&bullets[_0x13497b(0x1c1)](_0x38afeb,0x1)):bullets[_0x13497b(0x1c1)](_0x38afeb,0x1);}for(let _0x52bb7c=enemyBullets['length']-0x1;_0x52bb7c>=0x0;_0x52bb7c--){const _0xbab2bb=enemyBullets[_0x52bb7c];if(!_0xbab2bb){enemyBullets[_0x13497b(0x1c1)](_0x52bb7c,0x1);continue;}_0xbab2bb['x']+=_0xbab2bb['vx'],_0xbab2bb['y']+=_0xbab2bb['vy'],(_0xbab2bb['y']>gameCanvas[_0x13497b(0x297)]||_0xbab2bb['y']<-ENEMY_BULLET_HEIGHT||_0xbab2bb['x']<-ENEMY_BULLET_WIDTH||_0xbab2bb['x']>gameCanvas[_0x13497b(0x1de)])&&enemyBullets['splice'](_0x52bb7c,0x1);}for(let _0x25912f=fallingShips['length']-0x1;_0x25912f>=0x0;_0x25912f--){const _0x2f2f50=fallingShips[_0x25912f];if(!_0x2f2f50){fallingShips['splice'](_0x25912f,0x1);continue;}_0x2f2f50['y']+=FALLING_SHIP_SPEED;const _0x45bcc9=_0xb9694f-_0x2f2f50['creationTime'];typeof _0x2f2f50[_0x13497b(0x1e4)]===_0x13497b(0x1f8)?_0x2f2f50[_0x13497b(0x1e4)]=Math['max'](0x0,0x1-_0x45bcc9/FALLING_SHIP_FADE_DURATION_MS):_0x2f2f50[_0x13497b(0x1e4)]=0x0;if(typeof _0x2f2f50[_0x13497b(0x201)]==='number'){const _0x221d92=Math['min'](0x1,_0x45bcc9/FALLING_SHIP_ROTATION_DURATION_MS);_0x2f2f50[_0x13497b(0x201)]=_0x221d92*0x2*(0x2*Math['PI']);}else _0x2f2f50[_0x13497b(0x201)]=0x0;if(ship&&!isDualShipActive&&!isShipCaptured&&!isWaitingForRespawn&&_0x2f2f50['y']+_0x2f2f50[_0x13497b(0x297)]>=gameCanvas[_0x13497b(0x297)]-AUTO_DOCK_THRESHOLD){fallingShips['splice'](_0x25912f,0x1),isDualShipActive=!![];currentPlayer===0x1?player1IsDualShipActive=!![]:player2IsDualShipActive=!![];playSound(dualShipSound);continue;}_0x2f2f50['y']>gameCanvas[_0x13497b(0x297)]+_0x2f2f50[_0x13497b(0x297)]&&fallingShips[_0x13497b(0x1c1)](_0x25912f,0x1);}let _0x4fc65b=0x0;const _0xbc74c2=enemies[_0x13497b(0x267)](_0x49ad31=>_0x49ad31?.[_0x13497b(0x260)]===_0x13497b(0x251)),_0x23f107=!isChallengingStage&&!isWaveTransitioning&&_0xbc74c2&&!isShowingPlayerGameOverMessage;if(_0x23f107){!isGridSoundPlaying&&(isGridSoundPlaying=!![],playSound(gridBackgroundSound));const _0x1a5a6f=enemies['filter'](_0x17a95e=>_0x17a95e?.[_0x13497b(0x260)]==='in_grid');if(_0x1a5a6f['length']>0x0){let _0x1843bc=gameCanvas[_0x13497b(0x1de)],_0x3f1b09=0x0;_0x1a5a6f['forEach'](_0x5736db=>{const _0x2387f2=_0x13497b;_0x5736db&&(_0x1843bc=Math[_0x2387f2(0x1b3)](_0x1843bc,_0x5736db['x']),_0x3f1b09=Math['max'](_0x3f1b09,_0x5736db['x']+_0x5736db['width']));});const _0x4af7f2=gameCanvas[_0x13497b(0x1de)]*GRID_HORIZONTAL_MARGIN_PERCENT,_0x699780=gameCanvas[_0x13497b(0x1de)]*(0x1-GRID_HORIZONTAL_MARGIN_PERCENT);if(gridMoveDirection===0x1&&_0x3f1b09>=_0x699780)gridMoveDirection=-0x1;else gridMoveDirection===-0x1&&_0x1843bc<=_0x4af7f2&&(gridMoveDirection=0x1);const _0xb5345c=scaleValue(level,BASE_GRID_MOVE_SPEED,MAX_GRID_MOVE_SPEED);_0x4fc65b=_0xb5345c*gridMoveDirection,currentGridOffsetX+=_0x4fc65b,enemies['forEach'](_0xe5a078=>{const _0x3ab6bb=_0x13497b;if(_0xe5a078&&(_0xe5a078[_0x3ab6bb(0x260)]===_0x3ab6bb(0x1e2)||_0xe5a078['state']===_0x3ab6bb(0x251)||_0xe5a078[_0x3ab6bb(0x260)]===_0x3ab6bb(0x277)))try{const _0xbd25ae=_0xe5a078['type']===ENEMY3_TYPE?BOSS_WIDTH:_0xe5a078[_0x3ab6bb(0x1c2)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,{x:_0x382933,y:_0x474c29}=getCurrentGridSlotPosition(_0xe5a078[_0x3ab6bb(0x1f6)],_0xe5a078['gridCol'],_0xbd25ae);_0xe5a078[_0x3ab6bb(0x1f5)]=_0x382933,_0xe5a078[_0x3ab6bb(0x1c3)]=_0x474c29;}catch(_0xd33049){console['error'](_0x3ab6bb(0x203)+_0xe5a078?.['id']+'\x20(state:\x20'+_0xe5a078?.[_0x3ab6bb(0x260)]+')\x20during\x20shift:',_0xd33049);}});}}else isGridSoundPlaying&&(stopSound(gridBackgroundSound),isGridSoundPlaying=![]),_0x4fc65b=0x0;for(let _0xa2e323=enemies['length']-0x1;_0xa2e323>=0x0;_0xa2e323--){let _0x30a5a3=enemies[_0xa2e323];if(!_0x30a5a3)continue;const _0x23b3a4=_0x30a5a3['id'];if(_0x30a5a3['capturePrepareTimeout']&&_0x30a5a3[_0x13497b(0x260)]!=='preparing_capture'){clearTimeout(_0x30a5a3[_0x13497b(0x1e7)]);const _0x5b81e7=enemySpawnTimeouts[_0x13497b(0x2a7)](_0x30a5a3[_0x13497b(0x1e7)]);if(_0x5b81e7>-0x1)enemySpawnTimeouts['splice'](_0x5b81e7,0x1);_0x30a5a3[_0x13497b(0x1e7)]=null;}const _0x2f06fc=_0x30a5a3[_0x13497b(0x1c2)]===ENEMY3_TYPE?BOSS_WIDTH:_0x30a5a3[_0x13497b(0x1c2)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,_0x1df7ef=_0x30a5a3['type']===ENEMY3_TYPE?BOSS_HEIGHT:_0x30a5a3[_0x13497b(0x1c2)]===ENEMY1_TYPE?ENEMY1_HEIGHT:ENEMY_HEIGHT;switch(_0x30a5a3[_0x13497b(0x260)]){case _0x13497b(0x20d):{let _0x3117a9=CS_ENTRANCE_PATH_SPEED;const _0x104539=_0x30a5a3[_0x13497b(0x1db)]||0x1;_0x3117a9*=_0x104539;if(!isChallengingStage){enemies[_0x13497b(0x1c1)](_0xa2e323,0x1),_0x30a5a3=null;break;}let _0x263bd3=challengingStagePaths,_0x234070=_0x263bd3[_0x30a5a3[_0x13497b(0x282)]];if(!_0x234070||_0x30a5a3['pathSegmentIndex']>=_0x234070[_0x13497b(0x299)]){enemies[_0x13497b(0x1c1)](_0xa2e323,0x1),_0x30a5a3=null;break;}const _0x2e9121=_0x234070[_0x30a5a3[_0x13497b(0x29d)]];if(!_0x2e9121||!_0x2e9121['p0']||!_0x2e9121['p1']||!_0x2e9121['p2']||!_0x2e9121['p3']){console[_0x13497b(0x27a)]('Invalid\x20CS\x20Bezier\x20segment\x20'+_0x30a5a3[_0x13497b(0x29d)]+'\x20for\x20path\x20'+_0x30a5a3[_0x13497b(0x282)]+_0x13497b(0x25a)+_0x30a5a3['id']),enemies['splice'](_0xa2e323,0x1),_0x30a5a3=null;break;}_0x30a5a3[_0x13497b(0x220)]+=_0x3117a9;let _0x191dc4,_0x26a193,_0x29bb05=_0x30a5a3['x'],_0x12a37f=_0x30a5a3['y'];if(_0x30a5a3[_0x13497b(0x220)]>=0x1){_0x30a5a3[_0x13497b(0x220)]=0x0,_0x30a5a3[_0x13497b(0x29d)]++;if(_0x30a5a3[_0x13497b(0x29d)]>=_0x234070['length'])enemies['splice'](_0xa2e323,0x1),_0x30a5a3=null;else{const _0x1a3c88=_0x234070[_0x30a5a3[_0x13497b(0x29d)]];_0x1a3c88?.['p0']?(_0x191dc4=_0x1a3c88['p0']['x'],_0x26a193=_0x1a3c88['p0']['y']):(console[_0x13497b(0x27a)](_0x13497b(0x22b)+_0x30a5a3['pathSegmentIndex']+_0x13497b(0x254)+_0x30a5a3[_0x13497b(0x282)]+_0x13497b(0x25a)+_0x23b3a4),enemies[_0x13497b(0x1c1)](_0xa2e323,0x1),_0x30a5a3=null);}}else try{_0x191dc4=calculateBezierPoint(_0x30a5a3[_0x13497b(0x220)],_0x2e9121['p0']['x'],_0x2e9121['p1']['x'],_0x2e9121['p2']['x'],_0x2e9121['p3']['x']),_0x26a193=calculateBezierPoint(_0x30a5a3[_0x13497b(0x220)],_0x2e9121['p0']['y'],_0x2e9121['p1']['y'],_0x2e9121['p2']['y'],_0x2e9121['p3']['y']);}catch(_0x1672e7){console[_0x13497b(0x27a)](_0x13497b(0x1ea)+_0x23b3a4+':',_0x1672e7),enemies[_0x13497b(0x1c1)](_0xa2e323,0x1),_0x30a5a3=null;}_0x30a5a3&&(isNaN(_0x191dc4)||isNaN(_0x26a193)?(console[_0x13497b(0x27a)]('NaN\x20detected\x20in\x20CS\x20path\x20calculation\x20for\x20enemy\x20'+_0x23b3a4+_0x13497b(0x286)),enemies[_0x13497b(0x1c1)](_0xa2e323,0x1),_0x30a5a3=null):(_0x30a5a3['velocityX']=_0x191dc4-_0x29bb05,_0x30a5a3[_0x13497b(0x281)]=_0x26a193-_0x12a37f,_0x30a5a3['x']=_0x191dc4,_0x30a5a3['y']=_0x26a193));break;}case _0x13497b(0x21d):{if(isChallengingStage){enemies[_0x13497b(0x1c1)](_0xa2e323,0x1),_0x30a5a3=null;break;}let _0x19ab29=normalWaveEntrancePaths,_0x21c86d=_0x19ab29[_0x30a5a3[_0x13497b(0x282)]],_0x3fa637;_0x30a5a3[_0x13497b(0x282)]==='boss_loop_left'||_0x30a5a3['entrancePathId']===_0x13497b(0x1aa)?_0x3fa637=BOSS_LOOP_ENTRANCE_PATH_SPEED:_0x3fa637=NORMAL_ENTRANCE_PATH_SPEED;if(!_0x21c86d){console[_0x13497b(0x290)](_0x13497b(0x19b)+_0x23b3a4+_0x13497b(0x198)+_0x30a5a3[_0x13497b(0x282)]+_0x13497b(0x1ba));try{_0x30a5a3[_0x13497b(0x1f5)]=_0x30a5a3[_0x13497b(0x1f5)]??gameCanvas[_0x13497b(0x1de)]/0x2,_0x30a5a3['targetGridY']=_0x30a5a3[_0x13497b(0x1c3)]??ENEMY_TOP_MARGIN;}catch(_0x49dc95){console[_0x13497b(0x27a)]('Error\x20getting\x20grid\x20pos\x20for\x20'+_0x23b3a4+_0x13497b(0x2b5),_0x49dc95),_0x30a5a3[_0x13497b(0x1f5)]=gameCanvas[_0x13497b(0x1de)]/0x2,_0x30a5a3[_0x13497b(0x1c3)]=ENEMY_TOP_MARGIN;}_0x30a5a3[_0x13497b(0x260)]=_0x13497b(0x277),_0x30a5a3[_0x13497b(0x220)]=0x0,_0x30a5a3['pathSegmentIndex']=0x0,_0x30a5a3[_0x13497b(0x1e6)]=0x0,_0x30a5a3[_0x13497b(0x281)]=0x0;_0x30a5a3['squadronId']!==undefined&&squadronCompletionStatus[_0x30a5a3['squadronId']]&&squadronCompletionStatus[_0x30a5a3[_0x13497b(0x224)]][_0x13497b(0x222)]++;break;}if(_0x30a5a3[_0x13497b(0x29d)]>=_0x21c86d[_0x13497b(0x299)]){console[_0x13497b(0x290)](_0x13497b(0x19b)+_0x23b3a4+'\x20path\x20index\x20'+_0x30a5a3[_0x13497b(0x29d)]+'\x20out\x20of\x20bounds\x20for\x20SHARED\x20path\x20'+_0x30a5a3[_0x13497b(0x282)]+_0x13497b(0x1ba));try{_0x30a5a3[_0x13497b(0x1f5)]=_0x30a5a3[_0x13497b(0x1f5)]??gameCanvas['width']/0x2,_0x30a5a3['targetGridY']=_0x30a5a3[_0x13497b(0x1c3)]??ENEMY_TOP_MARGIN;}catch(_0x259e2a){console[_0x13497b(0x27a)](_0x13497b(0x1b9)+_0x23b3a4+'\x20after\x20invalid\x20path\x20index',_0x259e2a),_0x30a5a3[_0x13497b(0x1f5)]=gameCanvas[_0x13497b(0x1de)]/0x2,_0x30a5a3[_0x13497b(0x1c3)]=ENEMY_TOP_MARGIN;}_0x30a5a3[_0x13497b(0x260)]=_0x13497b(0x277),_0x30a5a3[_0x13497b(0x220)]=0x0,_0x30a5a3[_0x13497b(0x29d)]=0x0,_0x30a5a3['velocityX']=0x0,_0x30a5a3['velocityY']=0x0;_0x30a5a3[_0x13497b(0x224)]!==undefined&&squadronCompletionStatus[_0x30a5a3[_0x13497b(0x224)]]&&squadronCompletionStatus[_0x30a5a3[_0x13497b(0x224)]][_0x13497b(0x222)]++;break;}const _0xd3dade=_0x21c86d[_0x30a5a3[_0x13497b(0x29d)]];if(!_0xd3dade||!_0xd3dade['p0']||!_0xd3dade['p1']||!_0xd3dade['p2']||!_0xd3dade['p3']){console[_0x13497b(0x27a)]('Invalid\x20Normal\x20Bezier\x20segment\x20'+_0x30a5a3[_0x13497b(0x29d)]+_0x13497b(0x22e)+_0x30a5a3[_0x13497b(0x282)]+_0x13497b(0x25a)+_0x23b3a4+_0x13497b(0x1ba));try{_0x30a5a3[_0x13497b(0x1f5)]=_0x30a5a3['targetGridX']??gameCanvas[_0x13497b(0x1de)]/0x2,_0x30a5a3[_0x13497b(0x1c3)]=_0x30a5a3[_0x13497b(0x1c3)]??ENEMY_TOP_MARGIN+_0x30a5a3['gridRow']*(ENEMY_HEIGHT+ENEMY_V_SPACING);}catch(_0x151ae0){console[_0x13497b(0x27a)]('Error\x20getting\x20grid\x20pos\x20for\x20'+_0x23b3a4+_0x13497b(0x2a3),_0x151ae0),_0x30a5a3[_0x13497b(0x1f5)]=gameCanvas[_0x13497b(0x1de)]/0x2,_0x30a5a3[_0x13497b(0x1c3)]=ENEMY_TOP_MARGIN;}_0x30a5a3[_0x13497b(0x260)]=_0x13497b(0x277),_0x30a5a3[_0x13497b(0x220)]=0x0,_0x30a5a3[_0x13497b(0x29d)]=0x0,_0x30a5a3['velocityX']=0x0,_0x30a5a3[_0x13497b(0x281)]=0x0;_0x30a5a3[_0x13497b(0x224)]!==undefined&&squadronCompletionStatus[_0x30a5a3['squadronId']]&&squadronCompletionStatus[_0x30a5a3[_0x13497b(0x224)]][_0x13497b(0x222)]++;break;}_0x30a5a3[_0x13497b(0x220)]+=_0x3fa637;let _0x334645,_0x6db667,_0x5f4b5f=_0x30a5a3['x'],_0x717511=_0x30a5a3['y'];if(_0x30a5a3[_0x13497b(0x220)]>=0x1){_0x30a5a3['pathT']=0x0,_0x30a5a3[_0x13497b(0x29d)]++;if(_0x30a5a3[_0x13497b(0x29d)]>=_0x21c86d[_0x13497b(0x299)]){let _0x1e7697,_0x3d9a98;try{_0x1e7697=calculateBezierPoint(0x1,_0xd3dade['p0']['x'],_0xd3dade['p1']['x'],_0xd3dade['p2']['x'],_0xd3dade['p3']['x']),_0x3d9a98=calculateBezierPoint(0x1,_0xd3dade['p0']['y'],_0xd3dade['p1']['y'],_0xd3dade['p2']['y'],_0xd3dade['p3']['y']);}catch(_0x285117){console[_0x13497b(0x27a)]('Error\x20calculating\x20final\x20bezier\x20point\x20for\x20'+_0x23b3a4+_0x13497b(0x275)+_0x30a5a3[_0x13497b(0x282)],_0x285117),_0x1e7697=_0xd3dade['p3']['x'],_0x3d9a98=_0xd3dade['p3']['y'];}_0x30a5a3['x']=_0x1e7697,_0x30a5a3['y']=_0x3d9a98;try{_0x30a5a3[_0x13497b(0x1f5)]=_0x30a5a3[_0x13497b(0x1f5)]??gameCanvas[_0x13497b(0x1de)]/0x2,_0x30a5a3[_0x13497b(0x1c3)]=_0x30a5a3[_0x13497b(0x1c3)]??ENEMY_TOP_MARGIN;}catch(_0x4b7d3a){console[_0x13497b(0x27a)](_0x13497b(0x1c8)+_0x23b3a4+_0x13497b(0x275)+_0x30a5a3[_0x13497b(0x282)],_0x4b7d3a),_0x30a5a3[_0x13497b(0x1f5)]=_0x30a5a3['x'],_0x30a5a3['targetGridY']=ENEMY_TOP_MARGIN+_0x30a5a3[_0x13497b(0x1f6)]*(ENEMY_HEIGHT+ENEMY_V_SPACING);}const _0x283cf3=_0x30a5a3[_0x13497b(0x260)];_0x30a5a3[_0x13497b(0x260)]='moving_to_grid',_0x30a5a3[_0x13497b(0x1e6)]=0x0,_0x30a5a3[_0x13497b(0x281)]=0x0,_0x30a5a3['pathSegmentIndex']=0x0;_0x283cf3===_0x13497b(0x21d)&&_0x30a5a3[_0x13497b(0x224)]!==undefined&&squadronCompletionStatus[_0x30a5a3[_0x13497b(0x224)]]&&squadronCompletionStatus[_0x30a5a3[_0x13497b(0x224)]]['completed']++;break;}else{const _0x2968ad=_0x21c86d[_0x30a5a3['pathSegmentIndex']];if(_0x2968ad?.['p0'])_0x334645=_0x2968ad['p0']['x'],_0x6db667=_0x2968ad['p0']['y'];else{console[_0x13497b(0x27a)]('Invalid\x20next\x20Normal\x20Bezier\x20segment\x20'+_0x30a5a3['pathSegmentIndex']+'\x20for\x20SHARED\x20path\x20'+_0x30a5a3[_0x13497b(0x282)]+_0x13497b(0x25a)+_0x23b3a4+_0x13497b(0x1ba));try{_0x30a5a3[_0x13497b(0x1f5)]=_0x30a5a3[_0x13497b(0x1f5)]??gameCanvas[_0x13497b(0x1de)]/0x2,_0x30a5a3[_0x13497b(0x1c3)]=_0x30a5a3['targetGridY']??ENEMY_TOP_MARGIN;}catch(_0x100398){console['error'](_0x13497b(0x1b9)+_0x23b3a4+_0x13497b(0x213),_0x100398),_0x30a5a3[_0x13497b(0x1f5)]=gameCanvas[_0x13497b(0x1de)]/0x2,_0x30a5a3[_0x13497b(0x1c3)]=ENEMY_TOP_MARGIN;}_0x30a5a3['state']=_0x13497b(0x277),_0x30a5a3[_0x13497b(0x220)]=0x0,_0x30a5a3[_0x13497b(0x29d)]=0x0,_0x30a5a3[_0x13497b(0x1e6)]=0x0,_0x30a5a3[_0x13497b(0x281)]=0x0;_0x30a5a3['squadronId']!==undefined&&squadronCompletionStatus[_0x30a5a3['squadronId']]&&squadronCompletionStatus[_0x30a5a3[_0x13497b(0x224)]][_0x13497b(0x222)]++;break;}}}else try{_0x334645=calculateBezierPoint(_0x30a5a3['pathT'],_0xd3dade['p0']['x'],_0xd3dade['p1']['x'],_0xd3dade['p2']['x'],_0xd3dade['p3']['x']),_0x6db667=calculateBezierPoint(_0x30a5a3[_0x13497b(0x220)],_0xd3dade['p0']['y'],_0xd3dade['p1']['y'],_0xd3dade['p2']['y'],_0xd3dade['p3']['y']);}catch(_0x379b88){console[_0x13497b(0x27a)](_0x13497b(0x1be)+_0x23b3a4+':',_0x379b88);try{_0x30a5a3['targetGridX']=_0x30a5a3[_0x13497b(0x1f5)]??gameCanvas[_0x13497b(0x1de)]/0x2,_0x30a5a3[_0x13497b(0x1c3)]=_0x30a5a3[_0x13497b(0x1c3)]??ENEMY_TOP_MARGIN;}catch(_0x54ce62){console[_0x13497b(0x27a)](_0x13497b(0x1b9)+_0x23b3a4+_0x13497b(0x19d),_0x54ce62),_0x30a5a3[_0x13497b(0x1f5)]=gameCanvas[_0x13497b(0x1de)]/0x2,_0x30a5a3['targetGridY']=ENEMY_TOP_MARGIN;}_0x30a5a3[_0x13497b(0x260)]=_0x13497b(0x277),_0x30a5a3[_0x13497b(0x220)]=0x0,_0x30a5a3[_0x13497b(0x29d)]=0x0,_0x30a5a3[_0x13497b(0x1e6)]=0x0,_0x30a5a3[_0x13497b(0x281)]=0x0;_0x30a5a3[_0x13497b(0x224)]!==undefined&&squadronCompletionStatus[_0x30a5a3['squadronId']]&&squadronCompletionStatus[_0x30a5a3['squadronId']][_0x13497b(0x222)]++;break;}if(_0x30a5a3&&_0x30a5a3[_0x13497b(0x260)]===_0x13497b(0x21d)){if(isNaN(_0x334645)||isNaN(_0x6db667)){console[_0x13497b(0x27a)]('NaN\x20detected\x20in\x20Normal\x20path\x20calculation\x20for\x20enemy\x20'+_0x23b3a4+_0x13497b(0x1ba));try{_0x30a5a3[_0x13497b(0x1f5)]=_0x30a5a3[_0x13497b(0x1f5)]??gameCanvas[_0x13497b(0x1de)]/0x2,_0x30a5a3[_0x13497b(0x1c3)]=_0x30a5a3['targetGridY']??ENEMY_TOP_MARGIN;}catch(_0x1d652e){console['error'](_0x13497b(0x1b9)+_0x23b3a4+'\x20after\x20NaN',_0x1d652e),_0x30a5a3[_0x13497b(0x1f5)]=gameCanvas['width']/0x2,_0x30a5a3[_0x13497b(0x1c3)]=ENEMY_TOP_MARGIN;}_0x30a5a3['state']=_0x13497b(0x277),_0x30a5a3[_0x13497b(0x220)]=0x0,_0x30a5a3[_0x13497b(0x29d)]=0x0,_0x30a5a3['velocityX']=0x0,_0x30a5a3['velocityY']=0x0,_0x30a5a3['squadronId']!==undefined&&squadronCompletionStatus[_0x30a5a3[_0x13497b(0x224)]]&&squadronCompletionStatus[_0x30a5a3[_0x13497b(0x224)]][_0x13497b(0x222)]++;}else{let _0x5383fa=_0x334645;const _0x374d32=currentWavePatternIndex===0x1&&(_0x30a5a3[_0x13497b(0x224)]===0x2||_0x30a5a3[_0x13497b(0x224)]===0x3),_0x7ba816=typeof _0x30a5a3[_0x13497b(0x19f)]==='number'&&_0x30a5a3[_0x13497b(0x19f)]%0x2!==0x0;if(_0x374d32&&_0x7ba816){const _0x355560=_0x2f06fc+ENTRANCE_PAIR_HORIZONTAL_GAP;_0x5383fa=_0x334645+_0x355560;}_0x30a5a3['velocityX']=_0x5383fa-_0x5f4b5f,_0x30a5a3[_0x13497b(0x281)]=_0x6db667-_0x717511,_0x30a5a3['x']=_0x5383fa,_0x30a5a3['y']=_0x6db667;}}break;}case _0x13497b(0x277):{if(_0x30a5a3['targetGridX']==null||_0x30a5a3[_0x13497b(0x1c3)]==null){console[_0x13497b(0x290)](_0x13497b(0x19b)+_0x23b3a4+_0x13497b(0x2b4));try{const {x:_0x34dfca,y:_0x4f3b93}=getCurrentGridSlotPosition(_0x30a5a3[_0x13497b(0x1f6)],_0x30a5a3[_0x13497b(0x294)],_0x2f06fc);_0x30a5a3[_0x13497b(0x1f5)]=_0x34dfca,_0x30a5a3['targetGridY']=_0x4f3b93;}catch(_0x29b421){console[_0x13497b(0x27a)](_0x13497b(0x1b9)+_0x23b3a4+_0x13497b(0x1b5),_0x29b421),_0x30a5a3['state']=_0x13497b(0x251),_0x30a5a3['x']=gameCanvas[_0x13497b(0x1de)]/0x2,_0x30a5a3['y']=ENEMY_TOP_MARGIN;break;}}const _0x20119f=_0x30a5a3[_0x13497b(0x1f5)],_0x31047a=_0x30a5a3[_0x13497b(0x1c3)],_0x32668d=_0x20119f-_0x30a5a3['x'],_0x5c7c0c=_0x31047a-_0x30a5a3['y'],_0x4dd741=Math['sqrt'](_0x32668d*_0x32668d+_0x5c7c0c*_0x5c7c0c),_0x317af3=ENTRANCE_SPEED*1.2,_0x4302df=_0x317af3*0.5;if(_0x4dd741>_0x4302df)_0x30a5a3[_0x13497b(0x1e6)]=_0x32668d/_0x4dd741*_0x317af3,_0x30a5a3['velocityY']=_0x5c7c0c/_0x4dd741*_0x317af3,_0x30a5a3['x']+=_0x30a5a3[_0x13497b(0x1e6)],_0x30a5a3['y']+=_0x30a5a3[_0x13497b(0x281)];else{_0x30a5a3['x']=_0x20119f,_0x30a5a3['y']=_0x31047a,_0x30a5a3[_0x13497b(0x1e6)]=0x0,_0x30a5a3[_0x13497b(0x281)]=0x0;const _0x20522b=_0x30a5a3['state'];_0x30a5a3[_0x13497b(0x260)]='in_grid',_0x30a5a3[_0x13497b(0x1f9)]=![];!isGridSoundPlaying&&!isChallengingStage&&(isGridSoundPlaying=!![],playSound(gridBackgroundSound));GRID_BREATH_ENABLED&&!isGridBreathingActive&&!isChallengingStage&&(isGridBreathingActive=!![],gridBreathStartTime=_0xb9694f,currentGridBreathFactor=0x0);!firstEnemyLanded&&!isFullGridWave&&!isChallengingStage&&(lastGridFireCheckTime=Date['now'](),firstEnemyLanded=!![]);if(_0x20522b===_0x13497b(0x277)&&!isChallengingStage&&!isFullGridWave&&_0x30a5a3['squadronId']!==undefined){const _0x42fec0=_0x30a5a3['squadronId'],_0x32ae26=squadronCompletionStatus[_0x42fec0];if(_0x32ae26&&!_0x32ae26[_0x13497b(0x283)]){const _0x4cedae=enemies[_0x13497b(0x1cc)](_0x387faa=>{const _0x3bb6d5=_0x13497b;if(_0x387faa&&_0x387faa[_0x3bb6d5(0x224)]===_0x42fec0)return _0x387faa[_0x3bb6d5(0x260)]===_0x3bb6d5(0x251)||!enemies[_0x3bb6d5(0x267)](_0x4dd7e0=>_0x4dd7e0['id']===_0x387faa['id']);return!![];});if(_0x4cedae){_0x32ae26[_0x13497b(0x283)]=!![];const _0x373791=enemies['filter'](_0x4c2e26=>_0x4c2e26&&_0x4c2e26['squadronId']===_0x42fec0&&_0x4c2e26['state']===_0x13497b(0x251)&&(_0x4c2e26[_0x13497b(0x1c2)]===ENEMY2_TYPE||_0x4c2e26[_0x13497b(0x1c2)]===ENEMY3_TYPE)&&!(_0x4c2e26['type']===ENEMY3_TYPE&&_0x4c2e26[_0x13497b(0x1ff)]));if(_0x373791[_0x13497b(0x299)]>0x0){const _0xf68a2f=_0x373791[Math['floor'](Math[_0x13497b(0x1e1)]()*_0x373791[_0x13497b(0x299)])],_0x458128=_0xf68a2f['id'],_0x24e9de=0xc8+Math[_0x13497b(0x1e1)]()*0x190,_0x32084d=setTimeout(()=>{const _0x22e9b7=_0x13497b;try{const _0x506b51=enemySpawnTimeouts[_0x22e9b7(0x2a7)](_0x32084d);if(_0x506b51>-0x1)enemySpawnTimeouts[_0x22e9b7(0x1c1)](_0x506b51,0x1);if(isPaused||!isInGameState||playerLives<=0x0||isChallengingStage||isWaveTransitioning||isShipCaptured)return;const _0x209152=enemies[_0x22e9b7(0x1a9)](_0x213d99=>_0x213d99&&_0x213d99['id']===_0x458128);_0x209152&&_0x209152[_0x22e9b7(0x260)]===_0x22e9b7(0x251)&&(createBulletSimple(_0x209152)&&(playSound(enemyShootSound),_0x209152['lastFiredTime']=Date[_0x22e9b7(0x1bb)]()));}catch(_0x4afb0a){console[_0x22e9b7(0x27a)](_0x22e9b7(0x1ee)+_0x458128+':',_0x4afb0a);}},_0x24e9de);enemySpawnTimeouts[_0x13497b(0x279)](_0x32084d);}}}}}break;}case _0x13497b(0x251):{try{const _0x383457=_0x30a5a3[_0x13497b(0x1c2)]===ENEMY3_TYPE?BOSS_WIDTH:_0x30a5a3[_0x13497b(0x1c2)]===ENEMY1_TYPE?ENEMY1_WIDTH:ENEMY_WIDTH,{x:_0x28f326,y:_0x992947}=getCurrentGridSlotPosition(_0x30a5a3[_0x13497b(0x1f6)],_0x30a5a3[_0x13497b(0x294)],_0x383457);typeof _0x28f326===_0x13497b(0x1f8)&&!isNaN(_0x28f326)&&(_0x30a5a3['x']=_0x28f326),typeof _0x992947==='number'&&!isNaN(_0x992947)&&(_0x30a5a3['y']=_0x992947),_0x30a5a3[_0x13497b(0x1f5)]=_0x28f326,_0x30a5a3[_0x13497b(0x1c3)]=_0x992947;}catch(_0x4d9c06){console[_0x13497b(0x27a)](_0x13497b(0x2a1)+_0x30a5a3['id']+':',_0x4d9c06);}_0x30a5a3[_0x13497b(0x1e6)]=_0x23f107?_0x4fc65b:0x0,_0x30a5a3[_0x13497b(0x281)]=0x0;_0x30a5a3[_0x13497b(0x1c2)]===ENEMY3_TYPE&&_0x30a5a3[_0x13497b(0x1ff)]&&_0x30a5a3['capturedShipDimensions']&&(_0x30a5a3[_0x13497b(0x22c)]=_0x30a5a3['x']+CAPTURED_SHIP_OFFSET_X,_0x30a5a3[_0x13497b(0x233)]=_0x30a5a3['y']+CAPTURED_SHIP_OFFSET_Y);break;}case _0x13497b(0x19c):{_0x30a5a3[_0x13497b(0x1e6)]=0x0,_0x30a5a3[_0x13497b(0x281)]=0x0;break;}case _0x13497b(0x2b7):{_0x30a5a3[_0x13497b(0x1e6)]=0x0,_0x30a5a3[_0x13497b(0x281)]=0x0;break;}case _0x13497b(0x225):{if(isShipCaptured){_0x30a5a3[_0x13497b(0x260)]=_0x13497b(0x1e2);try{const {x:_0x1fdcb4,y:_0x2c7ceb}=getCurrentGridSlotPosition(_0x30a5a3[_0x13497b(0x1f6)],_0x30a5a3[_0x13497b(0x294)],_0x2f06fc);_0x30a5a3[_0x13497b(0x1f5)]=_0x1fdcb4,_0x30a5a3[_0x13497b(0x1c3)]=_0x2c7ceb;}catch(_0x2ef978){console[_0x13497b(0x27a)](_0x13497b(0x1ca)+_0x30a5a3['id']+':',_0x2ef978),_0x30a5a3['targetGridX']=gameCanvas[_0x13497b(0x1de)]/0x2,_0x30a5a3[_0x13497b(0x1c3)]=ENEMY_TOP_MARGIN;}break;}const _0x5bb6be=_0x30a5a3[_0x13497b(0x244)],_0x1599cb=_0x30a5a3[_0x13497b(0x284)];if(_0x5bb6be==null||_0x1599cb==null){console['error'](_0x13497b(0x242)+_0x30a5a3['id']+_0x13497b(0x1d5)),_0x30a5a3[_0x13497b(0x260)]='returning';try{const {x:_0x176e34,y:_0x3913e7}=getCurrentGridSlotPosition(_0x30a5a3[_0x13497b(0x1f6)],_0x30a5a3[_0x13497b(0x294)],_0x2f06fc);_0x30a5a3[_0x13497b(0x1f5)]=_0x176e34,_0x30a5a3['targetGridY']=_0x3913e7;}catch(_0x1e058){console[_0x13497b(0x27a)]('Error\x20getting\x20grid\x20pos\x20for\x20returning\x20boss\x20'+_0x30a5a3['id']+':',_0x1e058),_0x30a5a3[_0x13497b(0x1f5)]=gameCanvas['width']/0x2,_0x30a5a3[_0x13497b(0x1c3)]=ENEMY_TOP_MARGIN;}break;}const _0x2ec6ac=_0x5bb6be-_0x30a5a3['x'],_0x1c7dd7=_0x1599cb-_0x30a5a3['y'],_0x1d4da4=Math[_0x13497b(0x204)](_0x2ec6ac*_0x2ec6ac+_0x1c7dd7*_0x1c7dd7),_0x45a4a6=BOSS_CAPTURE_DIVE_SPEED_FACTOR*BASE_ENEMY_ATTACK_SPEED,_0x5684af=_0x45a4a6*0.6;_0x1d4da4>_0x5684af?(_0x30a5a3[_0x13497b(0x1e6)]=_0x2ec6ac/_0x1d4da4*_0x45a4a6,_0x30a5a3[_0x13497b(0x281)]=_0x1c7dd7/_0x1d4da4*_0x45a4a6,_0x30a5a3['x']+=_0x30a5a3[_0x13497b(0x1e6)],_0x30a5a3['y']+=_0x30a5a3['velocityY']):(_0x30a5a3['x']=_0x5bb6be,_0x30a5a3['y']=_0x1599cb,_0x30a5a3[_0x13497b(0x1e6)]=0x0,_0x30a5a3[_0x13497b(0x281)]=0x0,_0x30a5a3[_0x13497b(0x260)]=_0x13497b(0x252),_0x30a5a3['captureStartTime']=_0xb9694f,capturingBossId=_0x30a5a3['id'],captureBeamActive=!![],captureBeamSource={'x':_0x30a5a3['x']+_0x2f06fc/0x2,'y':_0x30a5a3['y']+_0x1df7ef},captureBeamTargetY=_0x30a5a3['y'],captureBeamProgress=0x0,playSound(captureSound));break;}case _0x13497b(0x252):{_0x30a5a3[_0x13497b(0x1e6)]=0x0,_0x30a5a3[_0x13497b(0x281)]=0x0;if(isShipCaptured&&_0x30a5a3['id']!==capturedBossIdWithMessage){console[_0x13497b(0x290)](_0x13497b(0x1d9)+_0x30a5a3['id']+_0x13497b(0x23e)+capturedBossIdWithMessage+_0x13497b(0x1b8)),captureBeamActive=![];if(capturingBossId===_0x30a5a3['id'])capturingBossId=null;_0x30a5a3[_0x13497b(0x260)]=_0x13497b(0x1e2);try{const {x:_0x4cc885,y:_0x23951a}=getCurrentGridSlotPosition(_0x30a5a3['gridRow'],_0x30a5a3[_0x13497b(0x294)],_0x2f06fc);_0x30a5a3['targetGridX']=_0x4cc885,_0x30a5a3[_0x13497b(0x1c3)]=_0x23951a;}catch(_0x5bb2e8){console[_0x13497b(0x27a)](_0x13497b(0x1ca)+_0x30a5a3['id']+':',_0x5bb2e8),_0x30a5a3[_0x13497b(0x1f5)]=gameCanvas[_0x13497b(0x1de)]/0x2,_0x30a5a3['targetGridY']=ENEMY_TOP_MARGIN;}stopSound(captureSound);break;}const _0x3bf291=_0xb9694f-_0x30a5a3[_0x13497b(0x1cf)],_0x3210e7=CAPTURE_BEAM_ANIMATION_DURATION_MS/0x2,_0x50316a=CAPTURE_BEAM_DURATION_MS;if(_0x3bf291<_0x3210e7)captureBeamProgress=_0x3bf291/_0x3210e7;else{if(_0x3bf291<_0x50316a-_0x3210e7)captureBeamProgress=0x1;else{if(_0x3bf291<_0x50316a)captureBeamProgress=0x1-(_0x3bf291-(_0x50316a-_0x3210e7))/_0x3210e7;else{captureBeamProgress=0x0,captureBeamActive=![],capturingBossId=null,stopSound(captureSound),_0x30a5a3['state']=_0x13497b(0x29c),_0x30a5a3[_0x13497b(0x26e)]=generateAttackPath(_0x30a5a3),_0x30a5a3[_0x13497b(0x1dd)]=0x0,_0x30a5a3[_0x13497b(0x269)]=0x0,_0x30a5a3['speed']=BASE_ENEMY_ATTACK_SPEED*ENEMY3_ATTACK_SPEED_FACTOR,_0x30a5a3[_0x13497b(0x1a1)]=0x0,_0x30a5a3[_0x13497b(0x1a5)]=!![],_0x30a5a3['attackFormationOffsetX']=0x0,_0x30a5a3['attackGroupId']=null;break;}}}captureBeamProgress=Math['max'](0x0,Math[_0x13497b(0x1b3)](0x1,captureBeamProgress));if(ship&&captureBeamActive&&captureBeamProgress>=0.95&&!isShipCaptured&&!isInvincible){const _0x20aed7=BOSS_WIDTH*CAPTURE_BEAM_WIDTH_TOP_FACTOR,_0x2bb221=SHIP_WIDTH*CAPTURE_BEAM_WIDTH_BOTTOM_FACTOR,_0x56e995=_0x30a5a3['x']+_0x2f06fc/0x2,_0x218860=_0x30a5a3['y']+_0x1df7ef,_0x14a560=gameCanvas[_0x13497b(0x297)]-LIFE_ICON_MARGIN_BOTTOM-LIFE_ICON_SIZE-0xa,_0x40855e=Math[_0x13497b(0x245)](_0x20aed7,_0x2bb221),_0x45285c=_0x56e995-_0x40855e/0x2,_0x5125bc=_0x218860,_0x3c5be1=_0x14a560-_0x218860;if(_0x3c5be1>0x0){const _0x24d688={'x':_0x45285c,'y':_0x5125bc,'width':_0x40855e,'height':_0x3c5be1},_0x20c425={'x':ship['x'],'y':ship['y'],'width':ship[_0x13497b(0x1de)],'height':ship[_0x13497b(0x297)]};if(checkCollision(_0x20c425,_0x24d688)){isShipCaptured=!![],_0x30a5a3[_0x13497b(0x263)]={'width':ship[_0x13497b(0x1de)],'height':ship['height']},_0x30a5a3[_0x13497b(0x1ff)]=!![],stopSound(captureSound),_0x30a5a3[_0x13497b(0x260)]=_0x13497b(0x2a0),_0x30a5a3[_0x13497b(0x1f5)]=null,_0x30a5a3[_0x13497b(0x1c3)]=null,_0x30a5a3[_0x13497b(0x1c7)]=ship['y'],_0x30a5a3['captureAnimationRotation']=0x0,isShowingCaptureMessage=!![],captureMessageStartTime=_0xb9694f,capturedBossIdWithMessage=_0x30a5a3['id'],playSound(shipCapturedSound);const _0x376769=currentPlayer;playerLives--,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![];if(playerLives<=0x0){if(_0x376769===0x1)player1Lives=0x0;if(_0x376769===0x2)player2Lives=0x0;if(isTwoPlayerMode){isShowingPlayerGameOverMessage=!![],playerGameOverMessageStartTime=_0xb9694f,playerWhoIsGameOver=_0x376769;const _0x105e3e=_0x376769===0x1?0x2:0x1,_0x557374=_0x105e3e===0x1?player1Lives:player2Lives;_0x557374>0x0?nextActionAfterPlayerGameOver=_0x13497b(0x28f):nextActionAfterPlayerGameOver=_0x13497b(0x237);bullets=[],enemyBullets=[],explosions=[],fallingShips=[],isDualShipActive=![];if(_0x376769===0x1)player1IsDualShipActive=![];else player2IsDualShipActive=![];playSound(gameOverSound);}else triggerFinalGameOverSequence();break;}else{if(isTwoPlayerMode){if(_0x376769===0x1)player1Lives=playerLives;else player2Lives=playerLives;}ship&&gameCanvas&&(ship['y']=gameCanvas[_0x13497b(0x297)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,!isManualControl&&(aiNeedsStabilization=!![])),(!isManualControl||isTwoPlayerMode)&&(forceCenterShipNextReset=!![]),isShipCaptured=![],isInvincible=!![],invincibilityEndTime=_0xb9694f+INVINCIBILITY_DURATION_MS;}}}else console[_0x13497b(0x290)]('Beam\x20collision\x20box\x20has\x20invalid\x20height:',_0x3c5be1);}break;}case _0x13497b(0x2a0):{_0x30a5a3[_0x13497b(0x1e6)]=0x0,_0x30a5a3['velocityY']=0x0;if(_0x30a5a3['hasCapturedShip']&&_0x30a5a3['capturedShipDimensions']&&typeof _0x30a5a3['initialCaptureAnimationY']===_0x13497b(0x1f8)){const _0x220c76=_0xb9694f-captureMessageStartTime,_0x425d27=Math[_0x13497b(0x1b3)](0x1,_0x220c76/CAPTURE_MESSAGE_DURATION),_0x2c1b42=_0x30a5a3['y']+CAPTURED_SHIP_OFFSET_Y,_0x48d8ba=_0x30a5a3[_0x13497b(0x1c7)];_0x30a5a3[_0x13497b(0x233)]=_0x48d8ba+(_0x2c1b42-_0x48d8ba)*_0x425d27,_0x30a5a3[_0x13497b(0x22c)]=_0x30a5a3['x']+CAPTURED_SHIP_OFFSET_X;}else _0x30a5a3[_0x13497b(0x22c)]=_0x30a5a3['x']+CAPTURED_SHIP_OFFSET_X,_0x30a5a3[_0x13497b(0x233)]=_0x30a5a3['y']+CAPTURED_SHIP_OFFSET_Y;break;}case'attacking':{if(isEntrancePhaseActive)break;const _0xa33830=_0x30a5a3[_0x13497b(0x26e)],_0x2f0056=3.8;if(!_0xa33830||_0xa33830[_0x13497b(0x299)]===0x0){console[_0x13497b(0x27a)](_0x13497b(0x19b)+_0x23b3a4+_0x13497b(0x1eb)),_0x30a5a3[_0x13497b(0x260)]=_0x13497b(0x1e2);try{const {x:_0x4ec6ca,y:_0x3be591}=getCurrentGridSlotPosition(_0x30a5a3[_0x13497b(0x1f6)],_0x30a5a3[_0x13497b(0x294)],_0x2f06fc);_0x30a5a3['targetGridX']=_0x4ec6ca,_0x30a5a3['targetGridY']=_0x3be591;}catch(_0x4c66cf){console[_0x13497b(0x27a)](_0x13497b(0x1a7)+_0x23b3a4+'\x20(no\x20attack\x20path):',_0x4c66cf),_0x30a5a3[_0x13497b(0x1f5)]=gameCanvas[_0x13497b(0x1de)]/0x2,_0x30a5a3[_0x13497b(0x1c3)]=ENEMY_TOP_MARGIN;}break;}if(_0x30a5a3[_0x13497b(0x1dd)]>=_0xa33830[_0x13497b(0x299)]){console['warn']('Enemy\x20'+_0x23b3a4+_0x13497b(0x241)+_0x30a5a3[_0x13497b(0x1dd)]+_0x13497b(0x2b3)+_0xa33830[_0x13497b(0x299)]+')!\x20Returning.'),_0x30a5a3[_0x13497b(0x260)]='returning';try{const {x:_0x202304,y:_0x24bfec}=getCurrentGridSlotPosition(_0x30a5a3['gridRow'],_0x30a5a3[_0x13497b(0x294)],_0x2f06fc);_0x30a5a3[_0x13497b(0x1f5)]=_0x202304,_0x30a5a3[_0x13497b(0x1c3)]=_0x24bfec;}catch(_0x1797c9){console[_0x13497b(0x27a)](_0x13497b(0x1a7)+_0x23b3a4+_0x13497b(0x2a9),_0x1797c9),_0x30a5a3['targetGridX']=gameCanvas[_0x13497b(0x1de)]/0x2,_0x30a5a3[_0x13497b(0x1c3)]=ENEMY_TOP_MARGIN;}break;}const _0x13a97e=_0xa33830[_0x30a5a3[_0x13497b(0x1dd)]];if(!_0x13a97e||!_0x13a97e['p0']||!_0x13a97e['p1']||!_0x13a97e['p2']||!_0x13a97e['p3']){console[_0x13497b(0x27a)](_0x13497b(0x19b)+_0x23b3a4+_0x13497b(0x246)+_0x30a5a3[_0x13497b(0x1dd)]+_0x13497b(0x25f)),_0x30a5a3['state']='returning';try{const {x:_0x4be8be,y:_0x2deff6}=getCurrentGridSlotPosition(_0x30a5a3[_0x13497b(0x1f6)],_0x30a5a3[_0x13497b(0x294)],_0x2f06fc);_0x30a5a3['targetGridX']=_0x4be8be,_0x30a5a3['targetGridY']=_0x2deff6;}catch(_0x53ae41){console[_0x13497b(0x27a)](_0x13497b(0x1a7)+_0x23b3a4+_0x13497b(0x216),_0x53ae41),_0x30a5a3[_0x13497b(0x1f5)]=gameCanvas[_0x13497b(0x1de)]/0x2,_0x30a5a3['targetGridY']=ENEMY_TOP_MARGIN;}break;}const _0x5ae948=_0x30a5a3[_0x13497b(0x2a6)]/0x3e8*_0x2f0056;_0x30a5a3[_0x13497b(0x269)]+=_0x5ae948;let _0x344df0,_0x330b63;const _0x118adc=_0x30a5a3['x'],_0x4de001=_0x30a5a3['y'];if(_0x30a5a3[_0x13497b(0x269)]>=0x1){try{_0x344df0=calculateBezierPoint(0x1,_0x13a97e['p0']['x'],_0x13a97e['p1']['x'],_0x13a97e['p2']['x'],_0x13a97e['p3']['x']),_0x330b63=calculateBezierPoint(0x1,_0x13a97e['p0']['y'],_0x13a97e['p1']['y'],_0x13a97e['p2']['y'],_0x13a97e['p3']['y']);}catch(_0x471772){console[_0x13497b(0x27a)](_0x13497b(0x219)+_0x30a5a3['id']+':',_0x471772),_0x344df0=_0x30a5a3['x'],_0x330b63=_0x30a5a3['y'],_0x30a5a3[_0x13497b(0x260)]=_0x13497b(0x1e2);try{const {x:_0x2bf4e6,y:_0xcf6e85}=getCurrentGridSlotPosition(_0x30a5a3[_0x13497b(0x1f6)],_0x30a5a3[_0x13497b(0x294)],_0x2f06fc);_0x30a5a3[_0x13497b(0x1f5)]=_0x2bf4e6,_0x30a5a3[_0x13497b(0x1c3)]=_0xcf6e85;}catch(_0x493d1b){console[_0x13497b(0x27a)](_0x13497b(0x2b6)+_0x30a5a3['id']+':',_0x493d1b),_0x30a5a3[_0x13497b(0x1f5)]=gameCanvas[_0x13497b(0x1de)]/0x2,_0x30a5a3[_0x13497b(0x1c3)]=ENEMY_TOP_MARGIN;}break;}_0x30a5a3[_0x13497b(0x269)]=0x0,_0x30a5a3[_0x13497b(0x1dd)]++;if(_0x30a5a3[_0x13497b(0x1dd)]>=_0xa33830['length']){_0x30a5a3[_0x13497b(0x260)]=_0x13497b(0x1e2),_0x30a5a3[_0x13497b(0x1a1)]=0x0,_0x30a5a3[_0x13497b(0x21e)]=0x0,_0x30a5a3[_0x13497b(0x2a2)]=null;try{const {x:_0x43ed5c,y:_0x16b2d5}=getCurrentGridSlotPosition(_0x30a5a3[_0x13497b(0x1f6)],_0x30a5a3[_0x13497b(0x294)],_0x2f06fc);_0x30a5a3[_0x13497b(0x1f5)]=_0x43ed5c,_0x30a5a3['targetGridY']=_0x16b2d5;}catch(_0x5eedde){console[_0x13497b(0x27a)](_0x13497b(0x1a7)+_0x23b3a4+_0x13497b(0x1b0),_0x5eedde),_0x30a5a3[_0x13497b(0x1f5)]=gameCanvas[_0x13497b(0x1de)]/0x2,_0x30a5a3[_0x13497b(0x1c3)]=ENEMY_TOP_MARGIN;}}else{const _0x3568b5=_0xa33830[_0x30a5a3[_0x13497b(0x1dd)]];if(!_0x3568b5?.['p0']){console['error']('Enemy\x20'+_0x23b3a4+_0x13497b(0x266)+_0x30a5a3[_0x13497b(0x1dd)]+'!\x20Returning.'),_0x344df0=_0x30a5a3['x'],_0x330b63=_0x30a5a3['y'],_0x30a5a3[_0x13497b(0x260)]=_0x13497b(0x1e2);try{const {x:_0x4f2735,y:_0x2aa6db}=getCurrentGridSlotPosition(_0x30a5a3[_0x13497b(0x1f6)],_0x30a5a3['gridCol'],_0x2f06fc);_0x30a5a3[_0x13497b(0x1f5)]=_0x4f2735,_0x30a5a3[_0x13497b(0x1c3)]=_0x2aa6db;}catch(_0x5bd5f3){console['error']('Error\x20getting\x20grid\x20pos\x20after\x20invalid\x20NEXT\x20attack\x20segment\x20for\x20'+_0x30a5a3['id']+':',_0x5bd5f3),_0x30a5a3[_0x13497b(0x1f5)]=gameCanvas[_0x13497b(0x1de)]/0x2,_0x30a5a3[_0x13497b(0x1c3)]=ENEMY_TOP_MARGIN;}break;}}}else try{_0x344df0=calculateBezierPoint(_0x30a5a3[_0x13497b(0x269)],_0x13a97e['p0']['x'],_0x13a97e['p1']['x'],_0x13a97e['p2']['x'],_0x13a97e['p3']['x']),_0x330b63=calculateBezierPoint(_0x30a5a3[_0x13497b(0x269)],_0x13a97e['p0']['y'],_0x13a97e['p1']['y'],_0x13a97e['p2']['y'],_0x13a97e['p3']['y']);}catch(_0x33c1a6){console[_0x13497b(0x27a)](_0x13497b(0x1fe)+_0x30a5a3['id']+':',_0x33c1a6),_0x344df0=_0x30a5a3['x'],_0x330b63=_0x30a5a3['y'],_0x30a5a3[_0x13497b(0x260)]=_0x13497b(0x1e2);try{const {x:_0x5b7eb5,y:_0x1684bc}=getCurrentGridSlotPosition(_0x30a5a3[_0x13497b(0x1f6)],_0x30a5a3[_0x13497b(0x294)],_0x2f06fc);_0x30a5a3[_0x13497b(0x1f5)]=_0x5b7eb5,_0x30a5a3['targetGridY']=_0x1684bc;}catch(_0x63c1dc){console['error'](_0x13497b(0x20f)+_0x30a5a3['id']+':',_0x63c1dc),_0x30a5a3[_0x13497b(0x1f5)]=gameCanvas['width']/0x2,_0x30a5a3[_0x13497b(0x1c3)]=ENEMY_TOP_MARGIN;}break;}if(_0x30a5a3&&_0x30a5a3[_0x13497b(0x260)]==='attacking'){const _0x17b1ab=_0x30a5a3[_0x13497b(0x21e)]||0x0,_0x2eb5ca=_0x344df0+_0x17b1ab,_0x4a9758=_0x330b63;_0x30a5a3['velocityX']=_0x2eb5ca-_0x118adc,_0x30a5a3[_0x13497b(0x281)]=_0x4a9758-_0x4de001,_0x30a5a3['x']=_0x2eb5ca,_0x30a5a3['y']=_0x4a9758;if(_0x30a5a3['y']>gameCanvas[_0x13497b(0x297)]+_0x1df7ef*1.5){_0x30a5a3['state']=_0x13497b(0x1e2),_0x30a5a3['attackPathSegmentIndex']=0x0,_0x30a5a3[_0x13497b(0x269)]=0x0,_0x30a5a3[_0x13497b(0x1a1)]=0x0,_0x30a5a3[_0x13497b(0x21e)]=0x0,_0x30a5a3[_0x13497b(0x2a2)]=null,_0x30a5a3['y']=-_0x1df7ef*(1.1+Math[_0x13497b(0x1e1)]()*0.4),_0x30a5a3['x']=Math['random']()*(gameCanvas[_0x13497b(0x1de)]-_0x2f06fc),_0x30a5a3['velocityX']=0x0,_0x30a5a3[_0x13497b(0x281)]=0x0;try{const {x:_0x584563,y:_0x2a4031}=getCurrentGridSlotPosition(_0x30a5a3[_0x13497b(0x1f6)],_0x30a5a3[_0x13497b(0x294)],_0x2f06fc);_0x30a5a3['targetGridX']=_0x584563,_0x30a5a3['targetGridY']=_0x2a4031;}catch(_0x189c98){console['error'](_0x13497b(0x1a7)+_0x23b3a4+_0x13497b(0x1f4),_0x189c98),_0x30a5a3[_0x13497b(0x1f5)]=gameCanvas[_0x13497b(0x1de)]/0x2,_0x30a5a3[_0x13497b(0x1c3)]=ENEMY_TOP_MARGIN;}}}break;}case _0x13497b(0x1e2):{if(isEntrancePhaseActive)break;if(_0x30a5a3[_0x13497b(0x1f5)]==null||_0x30a5a3['targetGridY']==null){console[_0x13497b(0x290)](_0x13497b(0x19b)+_0x23b3a4+_0x13497b(0x2ac));try{const {x:_0x57e7c4,y:_0x22d98d}=getCurrentGridSlotPosition(_0x30a5a3[_0x13497b(0x1f6)],_0x30a5a3[_0x13497b(0x294)],_0x2f06fc);_0x30a5a3[_0x13497b(0x1f5)]=_0x57e7c4,_0x30a5a3[_0x13497b(0x1c3)]=_0x22d98d;}catch(_0x260888){console[_0x13497b(0x27a)](_0x13497b(0x1b9)+_0x23b3a4+_0x13497b(0x1c0),_0x260888),_0x30a5a3['state']=_0x13497b(0x251),_0x30a5a3['x']=gameCanvas[_0x13497b(0x1de)]/0x2,_0x30a5a3['y']=ENEMY_TOP_MARGIN;break;}}const _0x174184=_0x30a5a3[_0x13497b(0x1f5)],_0x17e345=_0x30a5a3[_0x13497b(0x1c3)],_0xedd24b=_0x174184-_0x30a5a3['x'],_0x4c8d2d=_0x17e345-_0x30a5a3['y'],_0x58d683=Math[_0x13497b(0x204)](_0xedd24b*_0xedd24b+_0x4c8d2d*_0x4c8d2d),_0x49b4e1=scaleValue(level,BASE_RETURN_SPEED_FACTOR,MAX_RETURN_SPEED_FACTOR),_0x28a895=BASE_RETURN_SPEED*_0x49b4e1,_0x29d45e=_0x28a895*0.5;_0x58d683>_0x29d45e?(_0x30a5a3['velocityX']=_0xedd24b/_0x58d683*_0x28a895,_0x30a5a3[_0x13497b(0x281)]=_0x4c8d2d/_0x58d683*_0x28a895,_0x30a5a3['x']+=_0x30a5a3[_0x13497b(0x1e6)],_0x30a5a3['y']+=_0x30a5a3[_0x13497b(0x281)]):(_0x30a5a3['x']=_0x174184,_0x30a5a3['y']=_0x17e345,_0x30a5a3[_0x13497b(0x1e6)]=0x0,_0x30a5a3[_0x13497b(0x281)]=0x0,_0x30a5a3['state']=_0x13497b(0x251),_0x30a5a3[_0x13497b(0x1f9)]=!![],_0x30a5a3[_0x13497b(0x21e)]=0x0,_0x30a5a3[_0x13497b(0x2a2)]=null,_0x30a5a3[_0x13497b(0x1d1)](_0x13497b(0x1ac))&&delete _0x30a5a3[_0x13497b(0x1ac)],!isGridSoundPlaying&&!isChallengingStage&&(isGridSoundPlaying=!![],playSound(gridBackgroundSound)));break;}}if(_0x30a5a3&&!isShowingPlayerGameOverMessage&&!(isShipCaptured&&_0x30a5a3[_0x13497b(0x260)]===_0x13497b(0x252))){const _0x277124={'x':0x0,'y':0x0,'width':PLAYER_BULLET_WIDTH,'height':PLAYER_BULLET_HEIGHT},_0x314899={'x':_0x30a5a3['x'],'y':_0x30a5a3['y'],'width':_0x2f06fc,'height':_0x1df7ef};for(let _0x329043=bullets['length']-0x1;_0x329043>=0x0;_0x329043--){const _0x1becb4=bullets[_0x329043];if(!_0x1becb4)continue;_0x277124['x']=_0x1becb4['x'],_0x277124['y']=_0x1becb4['y'];if(checkCollision(_0x277124,_0x314899)){const _0x13306f=handleEnemyHit(_0x30a5a3);bullets[_0x13497b(0x1c1)](_0x329043,0x1);if(_0x13306f[_0x13497b(0x272)]){enemies[_0x13497b(0x1c1)](_0xa2e323,0x1),_0x30a5a3=null;break;}}}}if(_0x30a5a3&&ship&&!isShipCaptured&&!isWaitingForRespawn&&!isShowingPlayerGameOverMessage&&!isInvincible){const _0x24bae7=[_0x13497b(0x29c),'following_entrance_path',_0x13497b(0x20d),_0x13497b(0x225)];if(_0x24bae7[_0x13497b(0x2ae)](_0x30a5a3[_0x13497b(0x260)])){const _0x5cd279={'x':_0x30a5a3['x'],'y':_0x30a5a3['y'],'width':_0x2f06fc,'height':_0x1df7ef},_0x2276ff={'x':ship['x'],'y':ship['y'],'width':ship[_0x13497b(0x1de)],'height':ship[_0x13497b(0x297)]},_0x4daf56=isDualShipActive?{'x':ship['x']+DUAL_SHIP_OFFSET_X,'y':ship['y'],'width':ship[_0x13497b(0x1de)],'height':ship['height']}:null;let _0x3ba775=![],_0x3f030d=![];if(checkCollision(_0x5cd279,_0x2276ff))_0x3ba775=!![],_0x3f030d=![];else _0x4daf56&&checkCollision(_0x5cd279,_0x4daf56)&&(_0x3ba775=!![],_0x3f030d=!![]);if(_0x3ba775){createExplosion(_0x30a5a3['x']+_0x2f06fc/0x2,_0x30a5a3['y']+_0x1df7ef/0x2),playSound(lostLifeSound),enemies['splice'](_0xa2e323,0x1),_0x30a5a3=null;if(isDualShipActive){isDualShipActive=![];if(currentPlayer===0x1)player1IsDualShipActive=![];else player2IsDualShipActive=![];_0x3f030d?createExplosion(_0x4daf56['x']+ship[_0x13497b(0x1de)]/0x2,_0x4daf56['y']+ship[_0x13497b(0x297)]/0x2):createExplosion(_0x2276ff['x']+ship[_0x13497b(0x1de)]/0x2,_0x2276ff['y']+ship[_0x13497b(0x297)]/0x2),isInvincible=!![],invincibilityEndTime=_0xb9694f+INVINCIBILITY_DURATION_MS;}else{playerLives--,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],fallingShips=[],isInvincible=!![],invincibilityEndTime=_0xb9694f+INVINCIBILITY_DURATION_MS;ship&&gameCanvas?(ship['y']=gameCanvas[_0x13497b(0x297)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,!isManualControl&&(aiNeedsStabilization=!![])):console[_0x13497b(0x27a)](_0x13497b(0x24c));if(playerLives<=0x0){const _0x18c5f7=currentPlayer;if(_0x18c5f7===0x1)player1Lives=0x0;if(_0x18c5f7===0x2)player2Lives=0x0;if(isTwoPlayerMode){isShowingPlayerGameOverMessage=!![],playerGameOverMessageStartTime=_0xb9694f,playerWhoIsGameOver=_0x18c5f7;const _0x3e4698=_0x18c5f7===0x1?0x2:0x1,_0x976487=_0x3e4698===0x1?player1Lives:player2Lives;_0x976487>0x0?nextActionAfterPlayerGameOver=_0x13497b(0x28f):nextActionAfterPlayerGameOver=_0x13497b(0x237),bullets=[],enemyBullets=[],explosions=[],playSound(gameOverSound);}else triggerFinalGameOverSequence();break;}else{if(isTwoPlayerMode){if(currentPlayer===0x1)player1Lives=playerLives;else player2Lives=playerLives;}break;}}}}}}if(ship&&!isShowingPlayerGameOverMessage&&!isShipCaptured&&!isWaitingForRespawn&&!isInvincible){const _0x4aba4f={'x':ship['x'],'y':ship['y'],'width':ship['width'],'height':ship['height']},_0x3ad514=isDualShipActive?{'x':ship['x']+DUAL_SHIP_OFFSET_X,'y':ship['y'],'width':ship[_0x13497b(0x1de)],'height':ship[_0x13497b(0x297)]}:null;for(let _0x7eca8d=enemyBullets[_0x13497b(0x299)]-0x1;_0x7eca8d>=0x0;_0x7eca8d--){const _0x5d012e=enemyBullets[_0x7eca8d];if(!_0x5d012e){enemyBullets[_0x13497b(0x1c1)](_0x7eca8d,0x1);continue;}const _0x3c15cd={'x':_0x5d012e['x'],'y':_0x5d012e['y'],'width':_0x5d012e[_0x13497b(0x1de)],'height':_0x5d012e['height']};let _0x2aef12=checkCollision(_0x4aba4f,_0x3c15cd),_0x519272=0x0;!_0x2aef12&&_0x3ad514&&checkCollision(_0x3ad514,_0x3c15cd)&&(_0x2aef12=!![],_0x519272=0x1);if(_0x2aef12){enemyBullets[_0x13497b(0x1c1)](_0x7eca8d,0x1);if(isDualShipActive){isDualShipActive=![];if(currentPlayer===0x1)player1IsDualShipActive=![];else player2IsDualShipActive=![];_0x519272===0x1?createExplosion(_0x3ad514['x']+ship[_0x13497b(0x1de)]/0x2,_0x3ad514['y']+ship[_0x13497b(0x297)]/0x2):createExplosion(_0x4aba4f['x']+ship['width']/0x2,_0x4aba4f['y']+ship[_0x13497b(0x297)]/0x2),playSound(lostLifeSound),isInvincible=!![],invincibilityEndTime=_0xb9694f+INVINCIBILITY_DURATION_MS;}else{playerLives--,playSound(lostLifeSound),createExplosion(ship['x']+ship[_0x13497b(0x1de)]/0x2,ship['y']+ship[_0x13497b(0x297)]/0x2),csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],fallingShips=[],isInvincible=!![],invincibilityEndTime=_0xb9694f+INVINCIBILITY_DURATION_MS;ship&&gameCanvas?(ship['y']=gameCanvas[_0x13497b(0x297)]-SHIP_HEIGHT-SHIP_BOTTOM_MARGIN,!isManualControl&&(aiNeedsStabilization=!![])):console[_0x13497b(0x27a)](_0x13497b(0x24c));if(playerLives<=0x0){const _0x1225d9=currentPlayer;if(_0x1225d9===0x1)player1Lives=0x0;if(_0x1225d9===0x2)player2Lives=0x0;if(isTwoPlayerMode){isShowingPlayerGameOverMessage=!![],playerGameOverMessageStartTime=_0xb9694f,playerWhoIsGameOver=_0x1225d9;const _0x5a423a=_0x1225d9===0x1?0x2:0x1,_0x342b90=_0x5a423a===0x1?player1Lives:player2Lives;_0x342b90>0x0?nextActionAfterPlayerGameOver=_0x13497b(0x28f):nextActionAfterPlayerGameOver=_0x13497b(0x237),bullets=[],enemyBullets=[],explosions=[],playSound(gameOverSound);}else triggerFinalGameOverSequence();break;}else{if(isTwoPlayerMode){if(currentPlayer===0x1)player1Lives=playerLives;else player2Lives=playerLives;}break;}}}}}if(ship&&!isShipCaptured&&!isWaitingForRespawn&&!isDualShipActive&&fallingShips[_0x13497b(0x299)]>0x0&&!isInvincible){const _0xbcd30b={'x':ship['x'],'y':ship['y'],'width':ship['width'],'height':ship[_0x13497b(0x297)]};for(let _0x465d6c=fallingShips[_0x13497b(0x299)]-0x1;_0x465d6c>=0x0;_0x465d6c--){const _0x21f3c4=fallingShips[_0x465d6c];if(!_0x21f3c4)continue;const _0xb60683={'x':_0x21f3c4['x'],'y':_0x21f3c4['y'],'width':_0x21f3c4[_0x13497b(0x1de)],'height':_0x21f3c4[_0x13497b(0x297)]};if(checkCollision(_0xbcd30b,_0xb60683)){fallingShips[_0x13497b(0x1c1)](_0x465d6c,0x1),isDualShipActive=!![];if(currentPlayer===0x1)player1IsDualShipActive=!![];else player2IsDualShipActive=!![];playSound(dualShipSound);break;}}}updateHitSparks();}catch(_0x508dc9){console['error'](_0x13497b(0x217),_0x508dc9,_0x508dc9['stack']),isGridSoundPlaying=![],stopSound(gridBackgroundSound),isEntrancePhaseActive=![],stopSound(entranceSound),isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',isShipCaptured=![],captureBeamActive=![],capturingBossId=null,stopSound(captureSound),stopSound(shipCapturedSound),isWaitingForRespawn=![],fallingShips=[],isDualShipActive=![],player1IsDualShipActive=![],player2IsDualShipActive=![],isInvincible=![],invincibilityEndTime=0x0,hitSparks=[];if(typeof showMenuState===_0x13497b(0x1bf))showMenuState();if(mainLoopId)cancelAnimationFrame(mainLoopId);mainLoopId=null,alert(_0x13497b(0x1ce));}}function switchPlayerTurn(){const _0x51bd0b=_0x21a6;if(!isTwoPlayerMode)return![];stopSound(hiScoreSound),highScore=Math[_0x51bd0b(0x245)](highScore,score);currentPlayer===0x1?(player1Score=score,player1IsDualShipActive=isDualShipActive):(player2Score=score,player2IsDualShipActive=isDualShipActive);const _0xf5b044=currentPlayer===0x1?0x2:0x1,_0x2ee3af=_0xf5b044===0x1?player1Lives:player2Lives;if(_0x2ee3af<=0x0){const _0xf95bcd=currentPlayer===0x1?player1Lives:player2Lives;return _0xf95bcd<=0x0?(triggerFinalGameOverSequence(),![]):(forceCenterShipNextReset=![],![]);}return currentPlayer=_0xf5b044,score=currentPlayer===0x1?player1Score:player2Score,playerLives=currentPlayer===0x1?player1Lives:player2Lives,isDualShipActive=currentPlayer===0x1?player1IsDualShipActive:player2IsDualShipActive,forceCenterShipNextReset=!![],scoreEarnedThisCS=0x0,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,leftPressed=![],rightPressed=![],shootPressed=![],p2LeftPressed=![],p2RightPressed=![],p2ShootPressed=![],keyboardP1LeftDown=![],keyboardP1RightDown=![],keyboardP1ShootDown=![],keyboardP2LeftDown=![],keyboardP2RightDown=![],keyboardP2ShootDown=![],p1JustFiredSingle=![],p2JustFiredSingle=![],p1FireInputWasDown=![],p2FireInputWasDown=![],isShipCaptured=![],captureBeamActive=![],capturingBossId=null,isWaitingForRespawn=![],respawnTime=0x0,isInvincible=![],invincibilityEndTime=0x0,fallingShips=[],hitSparks=[],showExtraLifeMessage=![],extraLifeMessageStartTime=0x0,!![];}function triggerGridFiring(){const _0x1a252e=_0x21a6;if(isPaused||!isInGameState||playerLives<=0x0||isChallengingStage||isWaveTransitioning||isShipCaptured)return;const _0x3221c1=enemies[_0x1a252e(0x25e)](_0x43ac23=>_0x43ac23&&_0x43ac23[_0x1a252e(0x260)]===_0x1a252e(0x251));if(_0x3221c1[_0x1a252e(0x299)]===0x0)return;const _0x28152b=Date[_0x1a252e(0x1bb)](),_0x4d5236=scaleValue(level,BASE_GRID_FIRE_INTERVAL,MIN_GRID_FIRE_INTERVAL);if(_0x28152b-lastGridFireCheckTime<_0x4d5236)return;lastGridFireCheckTime=_0x28152b;const _0x21670d=scaleValue(level,BASE_GRID_FIRE_PROBABILITY,MAX_GRID_FIRE_PROBABILITY),_0x48bc93=Math[_0x1a252e(0x28e)](scaleValue(level,BASE_GRID_MAX_FIRING_ENEMIES,MAX_GRID_MAX_FIRING_ENEMIES));let _0x38ffa6=0x0;_0x3221c1[_0x1a252e(0x24a)](()=>Math[_0x1a252e(0x1e1)]()-0.5);for(const _0x10468f of _0x3221c1){if(_0x38ffa6>=_0x48bc93)break;if(_0x10468f[_0x1a252e(0x1c2)]===ENEMY2_TYPE||_0x10468f[_0x1a252e(0x1c2)]===ENEMY3_TYPE){if(_0x10468f[_0x1a252e(0x1c2)]===ENEMY3_TYPE&&_0x10468f[_0x1a252e(0x1ff)])continue;Math[_0x1a252e(0x1e1)]()<_0x21670d&&(createBulletSimple(_0x10468f)&&(playSound(enemyShootSound),_0x10468f[_0x1a252e(0x1a1)]=_0x28152b,_0x38ffa6++));}}}function runSingleGameUpdate(_0x2ddcd8){const _0xd01de6=_0x21a6;try{const _0x43f8e1=Date[_0xd01de6(0x1bb)]();if(isManualControl&&connectedGamepadIndex!==null&&playerLives>0x0&&gameOverSequenceStartTime===0x0&&!isPaused&&!isShipCaptured){const _0x433fe5=navigator['getGamepads']();if(_0x433fe5?.[connectedGamepadIndex]){const _0xa7b076=_0x433fe5[connectedGamepadIndex],_0x2edada=processSingleController(_0xa7b076,previousButtonStates);previousButtonStates=_0x2edada[_0xd01de6(0x1a0)];if(_0x2edada[_0xd01de6(0x1df)]){stopGameAndShowMenu();return;}}else{if(previousButtonStates[_0xd01de6(0x299)]>0x0)previousButtonStates=[];}}else{if(connectedGamepadIndex===null){if(previousButtonStates[_0xd01de6(0x299)]>0x0)previousButtonStates=[];}}if(connectedGamepadIndexP2===null){if(previousGameButtonStatesP2['length']>0x0)previousGameButtonStatesP2=[];}if(isPaused){renderGame();return;}if(isShowingPlayerGameOverMessage&&isTwoPlayerMode){if(_0x43f8e1-playerGameOverMessageStartTime>=PLAYER_GAME_OVER_MESSAGE_DURATION){isShowingPlayerGameOverMessage=![];if(nextActionAfterPlayerGameOver===_0xd01de6(0x28f)){if(switchPlayerTurn()){let _0x2f19ad=level;if(playerWhoIsGameOver===0x1&&currentPlayer===0x2){}else playerWhoIsGameOver===0x2&&currentPlayer===0x1&&player1CompletedLevel===level&&(level++,player1CompletedLevel=-0x1,_0x2f19ad=level);currentPlayer===0x1?player1MaxLevelReached=Math[_0xd01de6(0x245)](player1MaxLevelReached,level):player2MaxLevelReached=Math[_0xd01de6(0x245)](player2MaxLevelReached,level),resetWave();}else triggerFinalGameOverSequence();}else nextActionAfterPlayerGameOver===_0xd01de6(0x237)?triggerFinalGameOverSequence():(console['error'](_0xd01de6(0x1c9),nextActionAfterPlayerGameOver),triggerFinalGameOverSequence());renderGame();return;}else{renderGame();return;}}if(isShowingCaptureMessage){const _0x53d9d2=enemies[_0xd01de6(0x1a9)](_0xe2437=>_0xe2437['id']===capturedBossIdWithMessage);if(_0x53d9d2&&_0x53d9d2['state']===_0xd01de6(0x2a0)){const _0x5113a1=_0x43f8e1-captureMessageStartTime,_0x5167b4=Math[_0xd01de6(0x1b3)](0x1,_0x5113a1/CAPTURE_MESSAGE_DURATION);_0x53d9d2['captureAnimationRotation']=_0x5167b4*0x2*(0x2*Math['PI']);}else _0x53d9d2&&(_0x53d9d2['captureAnimationRotation']=0x0);if(_0x43f8e1-captureMessageStartTime>=CAPTURE_MESSAGE_DURATION){isShowingCaptureMessage=![],stopSound(shipCapturedSound),captureBeamActive=![],capturingBossId=null;if(_0x53d9d2&&_0x53d9d2[_0xd01de6(0x260)]===_0xd01de6(0x2a0)){_0x53d9d2[_0xd01de6(0x260)]='returning',_0x53d9d2[_0xd01de6(0x292)]=0x0;try{const _0x3a4757=_0x53d9d2[_0xd01de6(0x1c2)]===ENEMY3_TYPE?BOSS_WIDTH:ENEMY_WIDTH,{x:_0x58d86a,y:_0xafbde8}=getCurrentGridSlotPosition(_0x53d9d2[_0xd01de6(0x1f6)],_0x53d9d2[_0xd01de6(0x294)],_0x3a4757);_0x53d9d2[_0xd01de6(0x1f5)]=_0x58d86a,_0x53d9d2[_0xd01de6(0x1c3)]=_0xafbde8;}catch(_0x450000){console['error']('[Capture\x20Message\x20End]\x20Error\x20getting\x20grid\x20pos\x20for\x20returning\x20boss\x20'+_0x53d9d2['id']+':',_0x450000),_0x53d9d2[_0xd01de6(0x1f5)]=gameCanvas[_0xd01de6(0x1de)]/0x2,_0x53d9d2[_0xd01de6(0x1c3)]=ENEMY_TOP_MARGIN;}}else _0x53d9d2?(console[_0xd01de6(0x290)](_0xd01de6(0x2a5)+capturedBossIdWithMessage+_0xd01de6(0x1ad)),_0x53d9d2[_0xd01de6(0x292)]=0x0):console[_0xd01de6(0x290)](_0xd01de6(0x23f)+capturedBossIdWithMessage+_0xd01de6(0x274));capturedBossIdWithMessage=null;}isInGameState&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0&&(moveEntities(),updateExplosions(),updateFloatingScores());renderGame();return;}!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0&&!isShipCaptured&&!isShowingCaptureMessage&&(!isManualControl&&isInGameState&&playerLives>0x0&&aiControl(),isInGameState&&isManualControl&&playerLives>0x0&&handlePlayerInput());isInGameState&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0&&!isShowingCaptureMessage&&(moveEntities(),updateExplosions(),updateFloatingScores());isInvincible&&_0x43f8e1>=invincibilityEndTime&&(isInvincible=![],invincibilityEndTime=0x0);if(isCsCompletionDelayActive&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0){if(_0x43f8e1-csCompletionDelayStartTime>=CS_COMPLETION_MESSAGE_DELAY){isCsCompletionDelayActive=![];csCompletionResultIsPerfect?(playSound(csPerfectSound),showCsHitsMessage=!![],csHitsMessageStartTime=_0x43f8e1):(playSound(csClearSound),showCSClearMessage=!![],csClearMessageStartTime=_0x43f8e1);renderGame();return;}else{renderGame();return;}}let _0x1f93cd=![],_0x43c821=![];if(!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0){if(showCsHitsMessage)Date[_0xd01de6(0x1bb)]()-csHitsMessageStartTime>CS_HITS_MESSAGE_DURATION&&(showCsHitsMessage=![],showPerfectMessage=!![],perfectMessageStartTime=_0x43f8e1),_0x43c821=!![];else{if(showPerfectMessage)Date[_0xd01de6(0x1bb)]()-perfectMessageStartTime>CS_PERFECT_MESSAGE_DURATION&&(showPerfectMessage=![],showCsBonusScoreMessage=!![],csBonusScoreMessageStartTime=_0x43f8e1),_0x43c821=!![];else{if(showCsBonusScoreMessage)Date[_0xd01de6(0x1bb)]()-csBonusScoreMessageStartTime>CS_BONUS_MESSAGE_DURATION&&(showCsBonusScoreMessage=![],_0x1f93cd=!![]),_0x43c821=!![];else{if(showCSClearMessage)Date[_0xd01de6(0x1bb)]()-csClearMessageStartTime>=CS_CLEAR_HITS_DELAY&&!showCsHitsForClearMessage&&(showCsHitsForClearMessage=!![]),Date[_0xd01de6(0x1bb)]()-csClearMessageStartTime>=CS_CLEAR_SCORE_DELAY&&!showCsScoreForClearMessage&&(showCsScoreForClearMessage=!![]),Date[_0xd01de6(0x1bb)]()-csClearMessageStartTime>=CS_CLEAR_DELAY&&(showCSClearMessage=![],showCsHitsForClearMessage=![],showCsScoreForClearMessage=![],_0x1f93cd=!![]),_0x43c821=!![];else{if(showExtraLifeMessage)Date[_0xd01de6(0x1bb)]()-extraLifeMessageStartTime>EXTRA_LIFE_MESSAGE_DURATION&&(showExtraLifeMessage=![],_0x1f93cd=!![]),_0x43c821=!![];else showReadyMessage&&(Date[_0xd01de6(0x1bb)]()-readyMessageStartTime>READY_MESSAGE_DURATION&&(showReadyMessage=![],_0x1f93cd=!![]),_0x43c821=!![]);}}}}}if(_0x43c821){renderGame();return;}if(isShowingIntro&&!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0){let _0x1dfb8f=![];const _0x1a6749=_0x43f8e1-introDisplayStartTime,_0x5258ed=0xbb8,_0x5111e4=INTRO_DURATION_PER_STEP;if(introStep===0x1)isTwoPlayerMode&&!playerIntroSoundPlayed&&(playSound(levelUpSound),playerIntroSoundPlayed=!![]),level===0x1&&currentPlayer===0x1&&!playerIntroSoundPlayed&&(playSound(startSound),playerIntroSoundPlayed=!![]);else{if(introStep===0x2)!isTwoPlayerMode&&level>0x1&&!isChallengingStage&&!stageIntroSoundPlayed&&(playSound(levelUpSound),stageIntroSoundPlayed=!![]);else introStep===0x3&&(!csIntroSoundPlayed&&(playSound(entranceSound),csIntroSoundPlayed=!![]));}if(introStep===0x1){let _0x198cbb=isTwoPlayerMode?_0x5258ed:_0x5111e4;if(level===0x1&&!isTwoPlayerMode)_0x198cbb=_0x5111e4;_0x1a6749>=_0x198cbb&&(isChallengingStage?introStep=0x3:introStep=0x2,introDisplayStartTime=_0x43f8e1);}else{if(introStep===0x2){const _0x576b8a=_0x5111e4;_0x1a6749>=_0x576b8a&&(_0x1dfb8f=!![]);}else introStep===0x3&&(_0x1a6749>=_0x5111e4&&(_0x1dfb8f=!![]));}if(_0x1dfb8f){isShowingIntro=![],introStep=0x0;!isChallengingStage?aiCanShootTime=Date['now']()+0xbb8:aiCanShootTime=0x0;if(isChallengingStage)startChallengingStageSequence();else{currentWaveDefinition=generateWaveDefinition(level);if(currentWaveDefinition&&currentWaveDefinition[_0xd01de6(0x299)]>0x0)isFullGridWave?startFullGridWave():scheduleEntranceFlightWave();else{console[_0xd01de6(0x290)](_0xd01de6(0x1e0)+level+_0xd01de6(0x26f)),isEntrancePhaseActive=![],stopSound(entranceSound),isWaveTransitioning=!![],readyForNextWaveReset=!![];const _0x499667=0x64;setTimeout(()=>{const _0x1db9e3=_0xd01de6;(isInGameState||!isInGameState&&playerLives>0x0)&&typeof resetWave===_0x1db9e3(0x1bf)&&(playerLives>0x0?resetWave():triggerFinalGameOverSequence());},_0x499667);}}}renderGame();return;}gameJustStarted&&(gameJustStarted=![]);if(!isShowingPlayerGameOverMessage&&gameOverSequenceStartTime===0x0){if(GRID_BREATH_ENABLED&&isInGameState&&!isChallengingStage&&!isWaveTransitioning&&playerLives>0x0){const _0xd0a117=enemies['some'](_0xd15fad=>_0xd15fad?.[_0xd01de6(0x260)]==='in_grid');if(_0xd0a117&&isGridBreathingActive){const _0x6c062=_0x43f8e1-gridBreathStartTime,_0x51aa6c=scaleValue(level,BASE_GRID_BREATH_CYCLE_MS,MIN_GRID_BREATH_CYCLE_MS),_0x2ffa40=_0x6c062%_0x51aa6c;currentGridBreathFactor=(Math[_0xd01de6(0x19a)](_0x2ffa40/_0x51aa6c*Math['PI']*0x2-Math['PI']/0x2)+0x1)/0x2;}else{if(!_0xd0a117&&isGridBreathingActive)isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0;else _0xd0a117&&!isGridBreathingActive&&(isGridBreathingActive=!![],gridBreathStartTime=_0x43f8e1,currentGridBreathFactor=0x0);}}else isGridBreathingActive&&(isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0);if(isEntrancePhaseActive){const _0x55601e=enemiesSpawnedThisWave>=totalEnemiesScheduledForWave,_0x1a2eed=enemies[_0xd01de6(0x267)](_0x57d9df=>_0x57d9df?.['state']==='following_entrance_path'||_0x57d9df?.['state']===_0xd01de6(0x277)||_0x57d9df?.[_0xd01de6(0x260)]===_0xd01de6(0x20d));if(totalEnemiesScheduledForWave>0x0&&_0x55601e&&!_0x1a2eed){const _0x50f953=isEntrancePhaseActive;isEntrancePhaseActive=![],_0x50f953&&(stopSound(entranceSound),enemiesSpawnedThisWave=0x0,totalEnemiesScheduledForWave=0x0,enemySpawnTimeouts[_0xd01de6(0x27e)](clearTimeout),enemySpawnTimeouts=[],gridJustCompleted=!![],!isChallengingStage&&typeof triggerImmediateCaptureDive==='function'&&triggerImmediateCaptureDive());}}!isChallengingStage&&!isShowingIntro&&!isPaused&&!isWaveTransitioning&&triggerGridFiring();if(!isWaveTransitioning&&playerLives>0x0&&!isShowingIntro&&!isShipCaptured&&!isShowingCaptureMessage&&!isEntrancePhaseActive){let _0x20737f=enemies[_0xd01de6(0x299)]===0x0,_0x55978e=fallingShips[_0xd01de6(0x299)]===0x0,_0x54fad1=![];isChallengingStage?_0x20737f&&!isEntrancePhaseActive&&(_0x54fad1=!![]):_0x20737f&&!isEntrancePhaseActive&&_0x55978e&&(_0x54fad1=!![]);if(_0x54fad1){isGridBreathingActive&&(isGridBreathingActive=![],gridBreathStartTime=0x0,currentGridBreathFactor=0x0);!isManualControl&&ship&&gameCanvas?.[_0xd01de6(0x1de)]>0x0&&(ship['x']=Math[_0xd01de6(0x28e)](gameCanvas[_0xd01de6(0x1de)]/0x2-ship[_0xd01de6(0x1de)]/0x2),ship[_0xd01de6(0x244)]=ship['x']);isWaveTransitioning=!![];isGridSoundPlaying&&(stopSound(gridBackgroundSound),isGridSoundPlaying=![]);bullets=[],enemyBullets=[],explosions=[],enemySpawnTimeouts[_0xd01de6(0x27e)](clearTimeout),enemySpawnTimeouts=[],totalEnemiesScheduledForWave=0x0,enemiesSpawnedThisWave=0x0,floatingScores=[];const _0x4430ac=currentPlayer;isTwoPlayerMode&&_0x4430ac===0x1&&(player1CompletedLevel=level);let _0x192ad4;if(isChallengingStage){csCompletionResultIsPerfect=challengingStageEnemiesHit>=challengingStageTotalEnemies,csCurrentChainHits=0x0,csCurrentChainScore=0x0,csLastHitTime=0x0,csLastChainHitPosition=null,isCsCompletionDelayActive=!![],csCompletionDelayStartTime=_0x43f8e1;if(csCompletionResultIsPerfect){const _0x35cfd0=score;score+=0x2710,highScore=Math[_0xd01de6(0x245)](highScore,score);let _0xbb5599=![],_0x3800f6=null;if(!isManualControl)_0xbb5599=player1TriggeredHighScoreSound,_0x3800f6=()=>{player1TriggeredHighScoreSound=!![];};else isTwoPlayerMode?currentPlayer===0x1?(_0xbb5599=player1TriggeredHighScoreSound,_0x3800f6=()=>{player1TriggeredHighScoreSound=!![];}):(_0xbb5599=player2TriggeredHighScoreSound,_0x3800f6=()=>{player2TriggeredHighScoreSound=!![];}):(_0xbb5599=player1TriggeredHighScoreSound,_0x3800f6=()=>{player1TriggeredHighScoreSound=!![];});if(!_0xbb5599&&score>highScore-0x2710){if(_0x3800f6)_0x3800f6();playSound(hiScoreSound);}if(currentPlayer===0x1)player1Score=score;else player2Score=score;checkAndAwardExtraLife(),_0x192ad4=CS_COMPLETION_MESSAGE_DELAY+CS_HITS_MESSAGE_DURATION+CS_PERFECT_MESSAGE_DURATION+CS_BONUS_MESSAGE_DURATION;}else checkAndAwardExtraLife(),_0x192ad4=CS_COMPLETION_MESSAGE_DELAY+CS_CLEAR_DELAY;_0x192ad4+=0x64;}else playSound(waveUpSound),normalWaveCurrentChainHits=0x0,normalWaveCurrentChainScore=0x0,normalWaveLastHitTime=0x0,normalWaveLastChainHitPosition=null,_0x192ad4=POST_MESSAGE_RESET_DELAY;setTimeout(()=>{const _0x151c62=_0xd01de6;let _0x17689f=![],_0x2b64b7=currentPlayer;if(isTwoPlayerMode){if(currentPlayer===0x1)player1Score=score;else player2Score=score;const _0x406196=switchPlayerTurn();_0x406196?(_0x2b64b7=currentPlayer,_0x4430ac===0x2&&player1CompletedLevel===level?(_0x17689f=!![],player1CompletedLevel=-0x1):_0x17689f=![]):(_0x2b64b7=_0x4430ac,_0x17689f=!![],player1CompletedLevel=-0x1);}else _0x2b64b7=0x1,_0x17689f=!![];_0x17689f&&level++;const _0x134262=_0x2b64b7===0x1?player1Lives:player2Lives;_0x134262>0x0?(_0x2b64b7===0x1?player1MaxLevelReached=Math[_0x151c62(0x245)](player1MaxLevelReached,level):player2MaxLevelReached=Math[_0x151c62(0x245)](player2MaxLevelReached,level),resetWave()):(console[_0x151c62(0x27a)]('Error:\x20Tried\x20to\x20start\x20wave\x20for\x20player\x20with\x200\x20lives.\x20Triggering\x20Game\x20Over.'),triggerFinalGameOverSequence());},_0x192ad4),renderGame();return;}if(!isChallengingStage){if(enemies[_0xd01de6(0x299)]>0x0){let _0x33590f=null;const _0x4ee8ac=enemies[_0xd01de6(0x25e)](_0x4b112f=>_0x4b112f?.['state']===_0xd01de6(0x251)),_0x4207e3=_0x4ee8ac[_0xd01de6(0x299)]<=0x3,_0x5aad3a=Math[_0xd01de6(0x245)](0x1,Math[_0xd01de6(0x1b3)](level,LEVEL_CAP_FOR_SCALING)),_0x35e909=0x1068,_0x67dca=0x320,_0x5a1dab=(_0x5aad3a-0x1)*((_0x35e909-_0x67dca)/(LEVEL_CAP_FOR_SCALING-0x1)),_0x920b3d=Math[_0xd01de6(0x245)](_0x67dca,_0x35e909-_0x5a1dab),_0x4b7ed3=Math[_0xd01de6(0x28e)](scaleValue(level,BASE_MAX_ATTACKING_ENEMIES,MAX_MAX_ATTACKING_ENEMIES)),_0x4309ad=enemies[_0xd01de6(0x25e)](_0x515b94=>_0x515b94?.['state']==='attacking'||_0x515b94?.[_0xd01de6(0x260)]===_0xd01de6(0x19c))[_0xd01de6(0x299)];if(_0x4207e3||_0x43f8e1-lastEnemyDetachTime>_0x920b3d&&_0x4ee8ac[_0xd01de6(0x299)]>0x0&&_0x4309ad<_0x4b7ed3){_0x33590f=findAndDetachEnemy();if(_0x33590f&&_0x33590f[_0xd01de6(0x299)]>0x0){const _0x37b221=_0x33590f[_0xd01de6(0x23c)](_0x4190e9=>enemies['find'](_0x1ba812=>_0x1ba812?.['id']===_0x4190e9['id']))['filter'](_0x200fc1=>_0x200fc1&&_0x200fc1[_0xd01de6(0x260)]==='in_grid');if(_0x37b221[_0xd01de6(0x299)]>0x0){const _0x25f77c=_0x37b221[0x0],_0x474fca=_0x25f77c['attackType'];!_0x4207e3&&(lastEnemyDetachTime=_0x43f8e1);if(_0x474fca===_0xd01de6(0x21b)){const _0x2eaf79=generateAttackPath(_0x25f77c);if(_0x2eaf79&&_0x2eaf79[_0xd01de6(0x299)]>0x0){_0x37b221['length']===0x3&&_0x25f77c['type']===ENEMY3_TYPE&&level!==0x1&&playSound(tripleAttackSound);let _0x59856f=[..._0x37b221];const _0x4ed78c=_0x59856f['length'];if(_0x4ed78c>0x1){let _0x352556=null,_0x48b12d=[];_0x59856f['forEach'](_0x59d292=>{const _0x2b3f02=_0xd01de6;if(_0x59d292[_0x2b3f02(0x1c2)]===ENEMY3_TYPE)_0x352556=_0x59d292;else _0x48b12d[_0x2b3f02(0x279)](_0x59d292);});_0x352556&&level!==0x1&&_0x4ed78c===0x3&&_0x48b12d[_0xd01de6(0x299)]===0x2?_0x59856f=[_0x48b12d[0x0],_0x352556,_0x48b12d[0x1]]:_0x59856f[_0xd01de6(0x24a)]((_0x5356da,_0x27ea0f)=>(_0x5356da?.[_0xd01de6(0x294)]??0x0)-(_0x27ea0f?.[_0xd01de6(0x294)]??0x0));const _0x46f01c=0x5;let _0x1148b9=0x0;_0x59856f=_0x59856f[_0xd01de6(0x25e)](_0x4c237d=>_0x4c237d&&typeof _0x4c237d[_0xd01de6(0x1de)]===_0xd01de6(0x1f8));const _0x3b85fd=_0x59856f[_0xd01de6(0x299)];for(let _0x2e5477=0x0;_0x2e5477<_0x3b85fd;_0x2e5477++){_0x1148b9+=_0x59856f[_0x2e5477][_0xd01de6(0x1de)];if(_0x2e5477<_0x3b85fd-0x1)_0x1148b9+=_0x46f01c;}const _0x46e076=-_0x1148b9/0x2;let _0x191477=_0x46e076;for(let _0x47cf49=0x0;_0x47cf49<_0x3b85fd;_0x47cf49++){const _0x351368=_0x59856f[_0x47cf49];_0x351368[_0xd01de6(0x21e)]=_0x191477+_0x351368[_0xd01de6(0x1de)]/0x2,_0x191477+=_0x351368[_0xd01de6(0x1de)]+_0x46f01c;}}else _0x59856f[_0xd01de6(0x27e)](_0x2c6b2e=>_0x2c6b2e[_0xd01de6(0x21e)]=0x0);const _0x230c9b=_0xd01de6(0x298)+_0x25f77c['id']+'-'+_0x43f8e1;_0x59856f[_0xd01de6(0x27e)](_0x878fbc=>{if(_0x878fbc)_0x878fbc['attackGroupId']=_0x230c9b;});let _0xdbb6d9=![],_0x23c1e6=GROUP_FIRE_BURST_DELAY;if(_0x25f77c[_0xd01de6(0x1c2)]===ENEMY2_TYPE||_0x25f77c[_0xd01de6(0x1c2)]===ENEMY3_TYPE)_0xdbb6d9=!![],_0x25f77c[_0xd01de6(0x1c2)]===ENEMY2_TYPE&&_0x4ed78c===0x1&&(_0x23c1e6=SOLO_BUTTERFLY_FIRE_DELAY);else _0x25f77c[_0xd01de6(0x1c2)]===ENEMY1_TYPE&&(_0xdbb6d9=!![]);_0x4207e3&&level>0x1&&(_0xdbb6d9=![]),_0xdbb6d9&&_0x59856f[_0xd01de6(0x27e)](_0x21c453=>{const _0x173f99=_0xd01de6,_0x5718f4=_0x21c453&&!(_0x21c453[_0x173f99(0x1c2)]===ENEMY3_TYPE&&_0x21c453[_0x173f99(0x1ff)]);_0x5718f4&&fireEnemyBurst(_0x21c453['id'],'attacking',_0x23c1e6);}),_0x59856f[_0xd01de6(0x27e)]((_0x213b78,_0x1622b7)=>{const _0x163f40=_0xd01de6;_0x213b78&&_0x213b78[_0x163f40(0x260)]===_0x163f40(0x251)&&(_0x213b78[_0x163f40(0x260)]=_0x163f40(0x19c),_0x213b78[_0x163f40(0x1f9)]=![],_0x213b78[_0x163f40(0x1e6)]=0x0,_0x213b78[_0x163f40(0x281)]=0x0,_0x213b78[_0x163f40(0x1a5)]=![],setTimeout(()=>{const _0x5c5ee2=_0x163f40;if(isPaused)return;const _0x11b79b=enemies[_0x5c5ee2(0x1a9)](_0x3e5d7a=>_0x3e5d7a?.['id']===_0x213b78['id']);if(_0x11b79b&&_0x11b79b['state']===_0x5c5ee2(0x19c))try{const _0x338f5a=scaleValue(level,BASE_ENEMY_ATTACK_SPEED,MAX_ENEMY_ATTACK_SPEED);let _0x5cee76=0x1;if(_0x11b79b['type']===ENEMY1_TYPE)_0x5cee76=ENEMY1_DIVE_SPEED_FACTOR;else{if(_0x11b79b[_0x5c5ee2(0x1c2)]===ENEMY2_TYPE)_0x5cee76=ENEMY2_DIVE_SPEED_FACTOR;else{if(_0x11b79b['type']===ENEMY3_TYPE)_0x5cee76=ENEMY3_ATTACK_SPEED_FACTOR;}}if(_0x213b78[_0x5c5ee2(0x1c2)]===ENEMY3_TYPE)playSound(bossGalagaDiveSound);else playSound(butterflyDiveSound);_0x11b79b[_0x5c5ee2(0x260)]='attacking',_0x11b79b[_0x5c5ee2(0x26e)]=_0x2eaf79,_0x11b79b[_0x5c5ee2(0x1dd)]=0x0,_0x11b79b[_0x5c5ee2(0x269)]=0x0,_0x11b79b[_0x5c5ee2(0x2a6)]=_0x338f5a*_0x5cee76,_0x11b79b[_0x5c5ee2(0x1a1)]=0x0,_0x11b79b[_0x5c5ee2(0x1a5)]=!![];}catch(_0x22512d){console[_0x5c5ee2(0x27a)](_0x5c5ee2(0x214)+_0x213b78['id']+':',_0x22512d);}},_0x1622b7*GROUP_DETACH_DELAY_MS));});}else console[_0xd01de6(0x290)](_0xd01de6(0x210)+_0x25f77c?.['id']+_0xd01de6(0x22f)),_0x33590f['forEach'](_0x5e647b=>{const _0x3e84c6=_0xd01de6;if(_0x5e647b)_0x5e647b[_0x3e84c6(0x1f9)]=![];});}}}}}}enemies[_0xd01de6(0x27e)](_0x5bff92=>{const _0x5bc724=_0xd01de6;if(_0x5bff92&&_0x5bff92[_0x5bc724(0x1c2)]===ENEMY3_TYPE&&_0x5bff92[_0x5bc724(0x1ff)]&&_0x5bff92[_0x5bc724(0x260)]===_0x5bc724(0x29c)&&_0x5bff92['capturedShipDimensions']&&typeof _0x5bff92[_0x5bc724(0x2a4)]===_0x5bc724(0x1f8)){if(_0x43f8e1-_0x5bff92['capturedShipLastFiredTime']>CAPTURED_SHIP_FIRE_COOLDOWN_MS){const _0x4bac30=_0x5bff92['x']+_0x5bff92[_0x5bc724(0x1de)]/0x2,_0x247908=_0x5bff92['y']+_0x5bff92[_0x5bc724(0x297)]+_0x5bff92[_0x5bc724(0x263)][_0x5bc724(0x297)]*0.5,_0x6d213a={'x':_0x4bac30,'y':_0x247908};createBulletSimple(_0x5bff92,_0x6d213a)&&(_0x5bff92[_0x5bc724(0x2a4)]=_0x43f8e1,playSound(playerShootSound));}}});}}else{if(gameOverSequenceStartTime>0x0){const _0x55363a=_0x43f8e1-gameOverSequenceStartTime,_0x457599=_0x55363a>=GAME_OVER_DURATION;_0x457599&&!isShowingResultsScreen&&(isShowingResultsScreen=!![],stopSound(gameOverSound),playSound(resultsMusicSound));}}renderGame();}catch(_0x94fe4a){console['error']('!!!\x20CRITICAL\x20ERROR\x20IN\x20runSingleGameUpdate\x20!!!',_0x94fe4a,_0x94fe4a[_0xd01de6(0x22a)]),isPaused=![];mainLoopId&&(cancelAnimationFrame(mainLoopId),mainLoopId=null);isInGameState=![],isShowingPlayerGameOverMessage=![],playerGameOverMessageStartTime=0x0,playerWhoIsGameOver=0x0,nextActionAfterPlayerGameOver='',alert(_0xd01de6(0x27d)),stopAllGameSounds(),isGridSoundPlaying=![],isInvincible=![],invincibilityEndTime=0x0;try{typeof showMenuState===_0xd01de6(0x1bf)&&showMenuState();}catch(_0x5c8b84){console['error'](_0xd01de6(0x202),_0x5c8b84);}}}function checkAndAwardExtraLife(){const _0x1365c1=_0x21a6;try{let _0x491310;!isManualControl||!isTwoPlayerMode?_0x491310=player1LifeThresholdsMet:_0x491310=currentPlayer===0x1?player1LifeThresholdsMet:player2LifeThresholdsMet;let _0x3c456c=![];while(!![]){let _0x2581af=![],_0x5d2517=-0x1;const _0x1ab726=_0x491310['size'];_0x1ab726===0x0?_0x5d2517=EXTRA_LIFE_THRESHOLD_1:_0x5d2517=EXTRA_LIFE_THRESHOLD_2+(_0x1ab726-0x1)*RECURRING_EXTRA_LIFE_INTERVAL;if(_0x5d2517!==-0x1&&score>=_0x5d2517&&!_0x491310['has'](_0x5d2517)){playerLives++,_0x491310[_0x1365c1(0x276)](_0x5d2517),_0x3c456c=!![],_0x2581af=!![];if(isTwoPlayerMode){if(currentPlayer===0x1)player1Lives=playerLives;else player2Lives=playerLives;}}if(!_0x2581af)break;}_0x3c456c&&!showExtraLifeMessage&&(showExtraLifeMessage=!![],extraLifeMessageStartTime=Date[_0x1365c1(0x1bb)](),playSound(extraLifeSound));}catch(_0x2b1d91){console[_0x1365c1(0x27a)](_0x1365c1(0x2ab),_0x2b1d91);}}